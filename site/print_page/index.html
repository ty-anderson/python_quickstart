
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://healthfin.solutions/notes/print_page/">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>Print Site - Tech Notes</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.a40c8224.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
      <link rel="stylesheet" href="../files/extra.css">
    
    <script>__md_scope=new URL("/notes/",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  
        <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function () {
            remove_material_navigation();remove_mkdocs_theme_navigation();generate_toc();
        })
        </script>
        </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#index" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Tech Notes" class="md-header__button md-logo" aria-label="Tech Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Tech Notes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Print Site
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Tech Notes" class="md-nav__button md-logo" aria-label="Tech Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Tech Notes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Intro
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Intro
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python/docs_1_what_is_python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What is Python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python/docs_2_how_to_use/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to Use
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python/docs_3_writing_code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Writing Code
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Advanced Coding
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Advanced Coding
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python/docs_5_advanced_topics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Advanced Coding Topics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python/docs_7_important_libraries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Important Libraries
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python/docs_9_std_lib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Standard Library Gems
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python/testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing Code
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Execution and Deployment
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Execution and Deployment
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python/docs_4_building_large_projects/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Building Large Projects
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python/deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deploying Python Programs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python/docs_6_publishing_project/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Publishing Projects
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Other Tools
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Other Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python/python_uv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python uv
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python/docs_8_documentation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documentation Libraries
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Git & GitHub
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Git & GitHub
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Git/basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Git Basics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Git/remotes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remotes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Git/branches/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Branches
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Docker
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Docker
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Docker/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intro
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Docker/basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Docker/docker_compose/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker Compose
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Docker/docker_images/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating Images (Dockerfile)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Self Hosting
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Self Hosting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../self_host/storage_vs_compute/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Storage vs Compute
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AI/docs_105_local_llm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ollama (Host an LLM)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../self_host/samba/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Samba (Shared Drive)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../self_host/syncthing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Syncthing (File Sync)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../self_host/video_streaming/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plex/Jellyfin (Video Streaming)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../self_host/frigate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Frigate (CCTV)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../self_host/web_server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Caddy (reverse proxy & web server)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../self_host/wireguard/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WireGuard (VPN)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Git/remotes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remotes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../self_host/nas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NAS
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Networking
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Networking
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Networking/docs_100_networking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    General Networking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Networking/docs_100_servers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Servers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Networking/docs_101_caddy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Caddy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Networking/docs_102_dns_server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DNS
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Linux and Other OS
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Linux and Other OS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/docs_104_linux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/docs_103_ssh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SSH
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/docs_199_backups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backups
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Video Processing
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Video Processing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Video%20Processing/docs_200_ffmpeg/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FFmpeg
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Video%20Processing/docs_200_streaming/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Streaming
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    AI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            AI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AI/docs_105_local_llm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ollama (Host an LLM)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AI/mcp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MCP
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Low-Level
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Low-Level
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Low%20Level/foundations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Learning Paths
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Low%20Level/drivers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Drivers
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Rust/rust01/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rust
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#index" class="md-nav__link">
    <span class="md-ellipsis">
      1 Home
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-2" class="md-nav__link">
    <span class="md-ellipsis">
      2 Python
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2 Python">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#section-2-1" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 Intro
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.1 Intro">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#python-docs_1_what_is_python" class="md-nav__link">
    <span class="md-ellipsis">
      2.1.1 What is Python
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python-docs_2_how_to_use" class="md-nav__link">
    <span class="md-ellipsis">
      2.1.2 How to Use
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python-docs_3_writing_code" class="md-nav__link">
    <span class="md-ellipsis">
      2.1.3 Writing Code
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#section-2-2" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 Advanced Coding
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.2 Advanced Coding">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#python-docs_5_advanced_topics" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.1 Advanced Coding Topics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python-docs_7_important_libraries" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.2 Important Libraries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python-docs_9_std_lib" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.3 Standard Library Gems
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python-testing" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.4 Testing Code
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#section-2-3" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 Execution and Deployment
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.3 Execution and Deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#python-docs_4_building_large_projects" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.1 Building Large Projects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.2 Deploying Python Programs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python-docs_6_publishing_project" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.3 Publishing Projects
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#section-2-4" class="md-nav__link">
    <span class="md-ellipsis">
      2.4 Other Tools
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.4 Other Tools">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#python-python_uv" class="md-nav__link">
    <span class="md-ellipsis">
      2.4.1 Python uv
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python-docs_8_documentation" class="md-nav__link">
    <span class="md-ellipsis">
      2.4.2 Documentation Libraries
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-3" class="md-nav__link">
    <span class="md-ellipsis">
      3 Git & GitHub
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 Git & GitHub">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#git-basics" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 Git Basics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#git-remotes" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 Remotes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#git-branches" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 Branches
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-4" class="md-nav__link">
    <span class="md-ellipsis">
      4 Docker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4 Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#docker-intro" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 Intro
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-basics" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 Basics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-docker_compose" class="md-nav__link">
    <span class="md-ellipsis">
      4.3 Docker Compose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-docker_images" class="md-nav__link">
    <span class="md-ellipsis">
      4.4 Creating Images (Dockerfile)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-5" class="md-nav__link">
    <span class="md-ellipsis">
      5 Self Hosting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5 Self Hosting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#self_host-storage_vs_compute" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 Storage vs Compute
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ai-docs_105_local_llm" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 Ollama (Host an LLM)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#self_host-samba" class="md-nav__link">
    <span class="md-ellipsis">
      5.3 Samba (Shared Drive)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#self_host-syncthing" class="md-nav__link">
    <span class="md-ellipsis">
      5.4 Syncthing (File Sync)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#self_host-video_streaming" class="md-nav__link">
    <span class="md-ellipsis">
      5.5 Plex/Jellyfin (Video Streaming)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#self_host-frigate" class="md-nav__link">
    <span class="md-ellipsis">
      5.6 Frigate (CCTV)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#self_host-web_server" class="md-nav__link">
    <span class="md-ellipsis">
      5.7 Caddy (reverse proxy & web server)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#self_host-wireguard" class="md-nav__link">
    <span class="md-ellipsis">
      5.8 WireGuard (VPN)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#git-remotes" class="md-nav__link">
    <span class="md-ellipsis">
      5.9 Remotes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#self_host-nas" class="md-nav__link">
    <span class="md-ellipsis">
      5.10 NAS
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-6" class="md-nav__link">
    <span class="md-ellipsis">
      6 Networking
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6 Networking">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#networking-docs_100_networking" class="md-nav__link">
    <span class="md-ellipsis">
      6.1 General Networking
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#networking-docs_100_servers" class="md-nav__link">
    <span class="md-ellipsis">
      6.2 Servers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#networking-docs_101_caddy" class="md-nav__link">
    <span class="md-ellipsis">
      6.3 Caddy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#networking-docs_102_dns_server" class="md-nav__link">
    <span class="md-ellipsis">
      6.4 DNS
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-7" class="md-nav__link">
    <span class="md-ellipsis">
      7 Linux and Other OS
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7 Linux and Other OS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linux-docs_104_linux" class="md-nav__link">
    <span class="md-ellipsis">
      7.1 Linux
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux-docs_103_ssh" class="md-nav__link">
    <span class="md-ellipsis">
      7.2 SSH
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux-docs_199_backups" class="md-nav__link">
    <span class="md-ellipsis">
      7.3 Backups
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-8" class="md-nav__link">
    <span class="md-ellipsis">
      8 Video Processing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8 Video Processing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#video%20processing-docs_200_ffmpeg" class="md-nav__link">
    <span class="md-ellipsis">
      8.1 FFmpeg
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#video%20processing-docs_200_streaming" class="md-nav__link">
    <span class="md-ellipsis">
      8.2 Streaming
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-9" class="md-nav__link">
    <span class="md-ellipsis">
      9 AI
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9 AI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ai-docs_105_local_llm" class="md-nav__link">
    <span class="md-ellipsis">
      9.1 Ollama (Host an LLM)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ai-mcp" class="md-nav__link">
    <span class="md-ellipsis">
      9.2 MCP
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-10" class="md-nav__link">
    <span class="md-ellipsis">
      10 Low-Level
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10 Low-Level">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#low%20level-foundations" class="md-nav__link">
    <span class="md-ellipsis">
      10.1 Learning Paths
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#low%20level-drivers" class="md-nav__link">
    <span class="md-ellipsis">
      10.2 Drivers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rust-rust01" class="md-nav__link">
    <span class="md-ellipsis">
      11 Rust
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<div id="print-site-page" class="print-site-enumerate-headings print-site-enumerate-figures">
        <section class="print-page">
            <div id="print-page-toc" data-toc-depth="3">
                <nav role='navigation' class='print-page-toc-nav'>
                <h1 class='print-page-toc-title'>Table of Contents</h1>
                </nav>
            </div>
        </section>
        <section class="print-page" id="index" heading-number="1"><h1 id="index-my-tech-notes">My Tech Notes</h1>
<p>Click on any of the pages on the left to begin...</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;hello world&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div></section>
                    <section class='print-page md-section' id='section-2' heading-number='2'>
                        <h1>Python<a class='headerlink' href='#section-2' title='Permanent link'></a>
                        </h1>
                    
                    <section class='print-page md-section' id='section-2-1' heading-number='2.1'>
                        <h1>Intro<a class='headerlink' href='#section-2-1' title='Permanent link'></a>
                        </h1>
                    <section class="print-page" id="python-docs_1_what_is_python" heading-number="2.1.1"><script>
  mermaid.initialize({ startOnLoad: true });
</script>

<h1 id="python-docs_1_what_is_python-what-is-python">What is Python?</h1>
<ul>
<li>Python is a general purpose programming language (its good at a lot of things).</li>
<li>Its one of the most readable languages that exist. It also has one of the biggest communities
which means there are a lot of people and resources to learn.</li>
<li>Python is an interpreted language, there is no compiling required.</li>
<li>Python is a dynamic language, no need to declare data types.</li>
<li>There are several flavors of python, some of the most popular are:<ul>
<li>CPython - the typical, most common, flavor of python. This is usually what people refer to when they say "python". 
  This is written in the C programming language and maintained by a large group of individuals.</li>
<li>Jython - Instead of the C language, this flavor of python is written in Java.</li>
<li>IronPython (aka IPython) - Instead of the C language, this flavor of python is written in .NET.</li>
<li>Anaconda - This flavor of python comes with many common data analysis packages pre-installed. This is maintained by
the Anaconda, Inc. company. Personally I think this is just CPython with bloat.</li>
<li>PyPy - A fast, minimal version of python that uses a JIT compiler. A little more difficult to configure.</li>
<li>Brython - A version of python that can run in a web browser, translating python code into JavaScript.</li>
</ul>
</li>
</ul></section><section class="print-page" id="python-docs_2_how_to_use" heading-number="2.1.2"><h1 id="python-docs_2_how_to_use-how-to-use-python">How to use Python</h1>
<h2 id="python-docs_2_how_to_use-summary-steps">Summary Steps</h2>
<ol>
<li>Create a virtual environment (venv).</li>
<li>pip install any libraries to the venv.</li>
<li>Write code in a .py file</li>
<li>Run the .py file with the venv.</li>
</ol>
<p>Example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># create venv</span>
Python<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>venv<span class="w">  </span>

<span class="c1"># activate venv</span>
venv<span class="se">\S</span>cripts<span class="se">\a</span>ctivate<span class="w">  </span>

<span class="c1"># install libraries to venv</span>
pip<span class="w"> </span>install<span class="w"> </span>pandas<span class="w"> </span>sqlalchemy<span class="w"> </span>

<span class="c1"># run your Python file in your venv (if activated)</span>
.<span class="w"> </span>python_file.py<span class="w">  </span>
</code></pre></div></td></tr></table></div>
<h2 id="python-docs_2_how_to_use-running-python">Running Python</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code>[Python File]          1. write a .py file
      |
      v
[Python Interpreter]   2. run .py file through interpreter
      |
      v
  [Result]
</code></pre></div></td></tr></table></div>
<ol>
<li>Python files end with <code>.py</code> for example <code>new_file.py</code>. Notice all lowercase and underscore format. 
Python heavily uses this <strong>snake case</strong> formatting.</li>
<li>In your <code>.py</code> file, write python code and then run it through the interpreter by using the terminal. </li>
<li>Reference the interpreter and then the .py file like the example below.</li>
<li>Example: <code>C:\username\python\bin\python.exe path\to\your\python\file.py</code></li>
<li>Note you'll modify this to the correct paths on your computer.</li>
</ol>
<h2 id="python-docs_2_how_to_use-about-the-package-manager-pip">About the package manager (pip)</h2>
<ul>
<li>The python community has a place where people can create and upload their own python packages. https://pypi.org/</li>
<li>Python has a built-in manager that allows you to install packages from PyPI directly. This manager is called <code>pip</code></li>
<li>There are many very popular libraries. Some popular and well utilized ones are:</li>
<li>For data there is <a href="https://pandas.pydata.org/docs/index.html">Pandas</a>, <a href="https://www.sqlalchemy.org/">SQLAlchemy</a>, 
  <a href="https://duckdb.org/">DuckDB</a>, <a href="https://docs.pola.rs/">Polars</a></li>
<li>API handling - <a href="https://requests.readthedocs.io/en/latest/">Requests</a>, <a href="https://docs.aiohttp.org/en/stable/">aiohttp</a></li>
<li>Markup parsing - <a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/">BeautifulSoup4</a>, <a href="https://lxml.de/">lxml</a></li>
<li>Web servers - <a href="https://flask.palletsprojects.com/en/stable/">Flask</a>, <a href="https://docs.djangoproject.com/en/5.1/">Django</a>, <a href="https://fastapi.tiangolo.com/">FastAPI</a></li>
<li>File transfer - <a href="https://www.paramiko.org/">Paramiko</a> (SFTP)</li>
<li>Environment variable usage - <a href="https://pypi.org/project/python-dotenv/">python-dotenv</a></li>
<li>So much more...</li>
<li>To make use of these, we need to use <code>pip</code> to install them into our python interpreter. But we don't want to install everything to the same python interpreter. 
That would cause it to become bloated if every project used the same interpreter. For this reason, every python project 
should have its own interpreter (see <a href="#python-docs_2_how_to_use-best-practices-for-using-python">Best practices for using python</a>)</li>
</ul>
<h2 id="python-docs_2_how_to_use-best-practices-for-using-python">Best practices for using python</h2>
<ul>
<li>Every python project should have its own interpreter, called a virtual environment or shortened to "venv". To do this, we need to create a copy of the python interpreter 
for each project. PyCharm can manage this for you, or you can do it manually. If using PyCharm, you can skip to the pip commands.</li>
<li>To do this manually, you should use the terminal to navigate to the folder your project files will exist in and type <code>python -m venv venv</code>
  This runs a python built-in command (<code>python</code>) in module mode (<code>-m</code>) to run the module venv (<code>venv</code>) and names the new interpreter venv (<code>venv</code>).</li>
<li>After you create the venv folder with the command, you'll need to activate it to install the libraries. To activate, 
  run the command <code>venv\Scripts\activate</code>. For linux or mac the command is <code>venv/bin/activate</code>.</li>
<li>From here you should see the terminal change to <code>(venv) C:\users\username\directory</code>. In PyCharm, you can open the terminal and this will already be setup.</li>
<li>Now you can run pip commands like: </li>
<li><code>pip install pandas</code> - install a package by using their PyPI name.</li>
<li><code>pip install pandas sqlalchemy duckdb</code> - you can install more than one by chaining package names.</li>
<li><code>pip uninstall pandas</code> - uninstall package by PyPI name.</li>
<li><code>pip install --upgrade pandas</code> - upgrade already installed packages when a new version comes out.</li>
<li><code>pip list</code> - show a list of installed packages.</li>
<li><code>pip freeze &gt; requirements.txt</code> - save the names and versions of installed packages to a file. 
  Good for saving and distributing dependencies so others can clone and use your project.</li>
<li>Use the venv the same way <code>C:\path\to\venv\python\bin\python.exe path\to\your\python\file.py</code>. PyCharm will automatically use these commands when you right-click and run a script.</li>
</ul></section><section class="print-page" id="python-docs_3_writing_code" heading-number="2.1.3"><h1 id="python-docs_3_writing_code-writing-python-code">Writing Python Code</h1>
<p>Python uses white-space and tabs, instead of curly-braces and semicolons like other common languages.</p>
<p>The simplest python script. This will print text to your terminal window.
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;This is my first Python script&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div></p>
<h2 id="python-docs_3_writing_code-data-types">Data Types</h2>
<p>Native data types in python include:</p>
<ul>
<li>Integer <code>int</code> - whole number ie: 5</li>
<li>Float <code>float</code>- decimal number ie: 7.9</li>
<li>String <code>str</code>- text surrounded by single or double quotes ie: 'This is a string' or "This is a string"</li>
<li>List, Tuple <code>list, tuple</code>- grouped data combined into a collection that can be iterated over. Lists use square brackets ie: a 
list of integers <code>[1, 2, 3, 4]</code>. Tuples use parenthesis ie: <code>(1, 2, 3, 4)</code>. Lists can be mutated and tuples cannot.</li>
<li>Dictionary <code>dict</code>- key value pair collection of data, using curly-braces. ie: <code>{'key 1': 'value 1', 'key 2': 'value 2'}</code></li>
</ul>
<p>Dictionary methods:</p>
<ul>
<li>Get value from dictionary <code>dict_name['key_name']'</code> or <code>dict_name.get('key_name')</code></li>
<li>Loop through the dict with:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">dict_name</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
   <span class="nb">print</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> 
</code></pre></div></td></tr></table></div></li>
</ul>
<p>String methods:</p>
<ul>
<li>f-strings - inject variables into a string with curly braces <code>print(f'Variable = {x}')</code></li>
<li>Combine iterable into string <code>''.join(iterable)</code></li>
</ul>
<h2 id="python-docs_3_writing_code-variables">Variables</h2>
<p>Any of the data types can be loaded into a variable that can then be referenced later:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">x</span> <span class="o">=</span> <span class="mi">14</span>
<span class="n">variable_01</span> <span class="o">=</span> <span class="s1">&#39;This is a variable&#39;</span>
<span class="n">also_a_variable</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="s1">&#39;bar&#39;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Variables can be named almost anything, you just can't start a variable with a number and no special characters. </p>
<p>You can perform mathematical operations, just like most programming languages.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">x</span> <span class="o">=</span> <span class="mi">5</span>  <span class="c1"># set variable</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>  <span class="c1"># add 1 to x variable</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">10</span>  <span class="c1"># multiply x by 10</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">/</span> <span class="mi">4</span>  <span class="c1"># divide x by 4</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">2</span>  <span class="c1"># raise x to the power of 2</span>

<span class="n">x</span> <span class="o">=</span> <span class="mi">7</span> <span class="o">//</span> <span class="mi">3</span>  <span class="c1"># floor division (divide and round down to the nearest whole number)</span>
<span class="c1"># output: 2.333 but rounds down to 2</span>
</code></pre></div></td></tr></table></div>
<p>You can also use the math library in the python standard library to perform more complex mathematical functions.</p>
<p><a href="https://docs.python.org/3/library/math.html">Math Standard Library Docs</a></p>
<h2 id="python-docs_3_writing_code-if-statements">If Statements</h2>
<p>If statements are great for checking conditions and running code if certain conditions are met.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">x</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">8</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x is greater than 8&#39;</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x is less or equal to 1&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x is between 1 and 8&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Keep in mind that checking equality should be done with two equal signs <code>==</code> because a single <code>=</code> is for assigning variables.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">x</span> <span class="o">=</span> <span class="mi">100</span>

<span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">100</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x is equal to 100&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h2 id="python-docs_3_writing_code-loops">Loops</h2>
<p>Types of loops:
- For - iterate over an object.
- While - loop until a condition is met.
- List comprehension - single line loop over an object.</p>
<p>For loop
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>

<span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="n">numbers</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>  <span class="c1"># will print each number in the list</span>
</code></pre></div></td></tr></table></div></p>
<p>While loop
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>  <span class="c1"># add 1 to x on each loop</span>
    <span class="c1"># this loop will terminate once x is greater than 10</span>
</code></pre></div></td></tr></table></div></p>
<p>List comprehension - this is like a single line for loop
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>

<span class="c1"># if we want to do a simple change to all the numbers in this list, such as double the amounts, we can use list comprehension</span>
<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="n">number</span> <span class="o">*</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="n">numbers</span><span class="p">]</span>
</code></pre></div></td></tr></table></div></p>
<h2 id="python-docs_3_writing_code-comments">Comments</h2>
<p>Add comments to your code:</p>
<ul>
<li><code>#</code> - single line comments</li>
<li><code>""" """</code> - multi-line comments</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># single line comment.</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Multi like comment</span>
<span class="sd">Use this to describe </span>
<span class="sd">many things.</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
<h2 id="python-docs_3_writing_code-importing-other-libraries">Importing other libraries</h2>
<p>Python comes with the "Python Standard Library" which has a lot of powerful modules ready to go, no installing required.</p>
<p><a href="https://docs.python.org/3/library/index.html">Python Standard Library Docs</a></p>
<p>To use any of these, or to use any libraries installed with pip, they must be imported. This is typically done at the top of the .py file.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>  <span class="c1"># standard library, lets you interact with objects on your operating system like files.</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>  <span class="c1"># third-party library installed with pip. This imports the package and renames it as pd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">select</span><span class="p">,</span> <span class="n">insert</span>  <span class="c1"># this imports specific parts of the sqlalchemy library, avoiding importing everything.</span>
</code></pre></div></td></tr></table></div>
<p>Load a csv file into a DataFrame using pandas.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;path/to/file.csv&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Connect to a database with sqlalchemy:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># import library</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_engine</span><span class="p">,</span> <span class="n">text</span>

<span class="c1"># create an engine object to connect</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;postgresql+psycopg2://username:password@servername:port/database&#39;</span><span class="p">)</span>

<span class="c1"># connect to the database and query a table</span>
<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">query</span> <span class="o">=</span> <span class="s1">&#39;SELECT * FROM table&#39;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="n">query</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
<h2 id="python-docs_3_writing_code-functions">Functions</h2>
<p>Use the <code>def</code> keyword to define a function. You can use parameters to pass data into the function, process the data, and return a result.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">example_function</span><span class="p">():</span>
    <span class="k">pass</span>


<span class="k">def</span><span class="w"> </span><span class="nf">repeat</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;You said </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>  <span class="c1"># this will print back your message and uses f-strings to inject your message to another string.</span>


<span class="k">def</span><span class="w"> </span><span class="nf">add_numbers</span><span class="p">(</span><span class="n">number_1</span><span class="p">,</span> <span class="n">number_2</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">number_1</span> <span class="o">+</span> <span class="n">number_2</span>
</code></pre></div></td></tr></table></div>
<p>You can create dynamic parameters using <em>args and </em>*kwargs
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_numbers</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="n">return_value</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
        <span class="n">return_value</span> <span class="o">=</span> <span class="n">return_value</span> <span class="o">+</span> <span class="n">value</span>

    <span class="k">return</span> <span class="n">return_value</span>
</code></pre></div></td></tr></table></div></p>
<h2 id="python-docs_3_writing_code-classes">Classes</h2>
<p>Classes are good for grouping similar data and functions into one object. 
It's great for maintaining state of data, and performing certain operations on that data.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Car</span><span class="p">:</span>
  <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">make</span><span class="p">,</span> <span class="n">model</span><span class="p">):</span>
    <span class="c1"># This function runs when the class is first used. Good for loading data right at the beginning.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">year</span> <span class="o">=</span> <span class="n">year</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">make</span> <span class="o">=</span> <span class="n">make</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">current_speed</span> <span class="o">=</span> <span class="mi">0</span>

  <span class="k">def</span><span class="w"> </span><span class="nf">accelerate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">current_speed</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="c1"># make car go</span>

  <span class="k">def</span><span class="w"> </span><span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">current_speed</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1"># make care brake</span>


<span class="n">car</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span> <span class="s1">&#39;Tesla&#39;</span><span class="p">,</span> <span class="s1">&#39;Model Y&#39;</span><span class="p">)</span>  <span class="c1"># create the car object</span>
<span class="n">car</span><span class="o">.</span><span class="n">accelerate</span><span class="p">()</span>                     <span class="c1"># run the accelerate function (when it&#39;s in a class it&#39;s called a method)</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>                        <span class="c1"># wait 5 seconds</span>
<span class="n">car</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>                           <span class="c1"># run the stop method</span>
</code></pre></div></td></tr></table></div></section></section>
                    <section class='print-page md-section' id='section-2-2' heading-number='2.2'>
                        <h1>Advanced Coding<a class='headerlink' href='#section-2-2' title='Permanent link'></a>
                        </h1>
                    <section class="print-page" id="python-docs_5_advanced_topics" heading-number="2.2.1"><h1 id="python-docs_5_advanced_topics-advanced-topics">Advanced Topics</h1>
<h2 id="python-docs_5_advanced_topics-dynamic-function-parameters">Dynamic Function Parameters</h2>
<p>If you have a function and you want to be able to pass any number of arguments
or keyword arguments, you can use args and kwargs.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">function_name</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="c1"># in the function you can access args and kwargs</span>
    <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">kwarg</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">kwarg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>You can also unpack dictionaries directly into a function call.
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">greet</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hello, </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">. You are </span><span class="si">{</span><span class="n">age</span><span class="si">}</span><span class="s2"> years old.&quot;</span><span class="p">)</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Alice&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">25</span><span class="p">}</span>
<span class="n">greet</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>  <span class="c1"># Equivalent to greet(name=&quot;Alice&quot;, age=25)</span>
</code></pre></div></td></tr></table></div></p>
<h2 id="python-docs_5_advanced_topics-context-managers">Context Managers</h2>
<p>In programming there are a lot of instances where you'll need to open something
(file, database connection, etc.) and you'll need to make sure to close it
to free up resources and to protect the file from being corrupted or altered.</p>
<p>A very safe way to handle this is with context managers, using the <code>with</code> keyword.</p>
<p>Read, write, append to files.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># write to file by opening in write mode &#39;w&#39;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">write_file</span><span class="p">:</span>
    <span class="n">write_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;Hello there&#39;</span><span class="p">)</span>
<span class="c1"># file is closed at this point</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">read_only_file</span><span class="p">:</span>
    <span class="n">file_data</span> <span class="o">=</span> <span class="n">read_only_file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="c1"># close the file and use the data from it</span>
<span class="nb">print</span><span class="p">(</span><span class="n">file_data</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">append_file</span><span class="p">:</span>
    <span class="n">append_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;This is how to append text to file.&#39;</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;rw&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">read_write_file</span><span class="p">:</span>
    <span class="n">read_write_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;info&#39;</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">read_write_file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>Safely manage connections to a database.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_engine</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;connection_string&#39;</span><span class="p">)</span>

<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;query here&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>You can create your own objects with context managers.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">NewObject</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">vars</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vars</span> <span class="o">=</span> <span class="nb">vars</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># open the connection using with statement</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># automatically run this on exiting with statement</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<h2 id="python-docs_5_advanced_topics-decorators">Decorators</h2>
<p>Decorators are a way to add extra functionality to other functions.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">functools</span>

<span class="k">def</span><span class="w"> </span><span class="nf">decorator_name</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="nd">@functools</span><span class="o">.</span><span class="n">wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># do something before the wrapped function</span>
        <span class="n">wrapper_value</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="c1"># do something after the wrapped function</span>
        <span class="k">return</span> <span class="n">wrapper_value</span>
    <span class="k">return</span> <span class="n">wrapper</span>
</code></pre></div></td></tr></table></div>
<p>To use this defined decorator, it would look something like this:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@decorator_name</span>
<span class="k">def</span><span class="w"> </span><span class="nf">wrapped_function</span><span class="p">():</span>
    <span class="c1"># regular function stuff</span>
</code></pre></div></td></tr></table></div></p>
<p>If you've defined the decorator to also take arguments, you can add them:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">functools</span>

<span class="k">def</span><span class="w"> </span><span class="nf">decorator_name</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">decorator_wrap</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="nd">@functools</span><span class="o">.</span><span class="n">wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="c1"># do something before the wrapped function</span>
            <span class="n">wrapper_value</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="c1"># do something after the wrapped function</span>
            <span class="k">return</span> <span class="n">wrapper_value</span>
        <span class="k">return</span> <span class="n">wrapper</span>
    <span class="k">return</span> <span class="n">decorator_name</span>


<span class="nd">@decorator_name</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">wrapped_function</span><span class="p">():</span>
    <span class="c1"># regular function stuff</span>
</code></pre></div></td></tr></table></div></p>
<p>Here is a more in-depth tutorial on decorators https://realpython.com/primer-on-python-decorators/</p>
<p>Some favorite decorators:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">time_it</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Prints the time it takes for a function to run&quot;&quot;&quot;</span>
    <span class="nd">@functools</span><span class="o">.</span><span class="n">wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="n">return_val</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1"> ran successfully in </span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">start_time</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">return_val</span>
    <span class="k">return</span> <span class="n">wrapper</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">avoid_day_of_week</span><span class="p">(</span><span class="n">day_of_week</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Avoid running the decorated function on certain day of week.</span>

<span class="sd">    day_of_week:</span>
<span class="sd">        0 -&gt; Mon</span>
<span class="sd">        1 -&gt; Tue</span>
<span class="sd">        2 -&gt; Wed</span>
<span class="sd">        3 -&gt; Thu</span>
<span class="sd">        4 -&gt; Fri</span>
<span class="sd">        5 -&gt; Sat</span>
<span class="sd">        6 -&gt; Sun</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">current_dt</span> <span class="o">=</span> <span class="n">utc_now</span><span class="p">()</span>
            <span class="n">dow</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="n">weekday</span><span class="p">(</span><span class="n">current_dt</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">current_dt</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">current_dt</span><span class="o">.</span><span class="n">day</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">dow</span> <span class="ow">in</span> <span class="n">day_of_week</span><span class="p">:</span>
                <span class="n">logit</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Avoiding day of week </span><span class="si">{</span><span class="n">calendar</span><span class="o">.</span><span class="n">day_abbr</span><span class="p">[</span><span class="n">dow</span><span class="p">]</span><span class="si">}</span><span class="s1"> day integer (</span><span class="si">{</span><span class="n">dow</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">wrapper</span>
    <span class="k">return</span> <span class="n">decorator</span>
</code></pre></div></td></tr></table></div>
<h2 id="python-docs_5_advanced_topics-generators">Generators</h2>
<p>Generators can be thought of as iterables that are not fully loaded into memory. This allows you can handle the 
same data, without worrying about memory consumption.</p>
<p>A generator is defined by a function that uses the keyword <code>yield</code>. When a function is used, it is run and then 
looses all state afterward. A generator will maintain state and can be called again multiple times.</p>
<p>For example, imagine you need to pull API data using every individual for the last 20 years. Instead of loading all
dates into one big list, you can create a generator function to calculate it.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">datetime</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>

<span class="c1"># this is a generator because it uses the keyword yield.</span>
<span class="k">def</span><span class="w"> </span><span class="nf">date_generator</span><span class="p">(</span><span class="n">start_date</span><span class="p">):</span>
    <span class="n">today</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
    <span class="k">while</span> <span class="n">start_date</span> <span class="o">&lt;</span> <span class="n">today</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">start_date</span>  <span class="c1"># this gets returned. If this function is called again, it will start here.</span>
        <span class="n">start_date</span> <span class="o">=</span> <span class="n">start_date</span> <span class="o">+</span> <span class="mi">1</span>


<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;example_url.com/api&#39;</span>
<span class="k">for</span> <span class="n">date</span> <span class="ow">in</span> <span class="n">date_generator</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">1990</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s1">/date_param=</span><span class="si">{</span><span class="n">date</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>If you don't want to loop over a generator, you can also use the <code>.next()</code> method.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">gen</span> <span class="o">=</span> <span class="n">generator_function</span><span class="p">()</span>
<span class="n">next_value</span> <span class="o">=</span> <span class="n">gen</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>More detailed info here https://wiki.python.org/moin/Generators</p>
<h2 id="python-docs_5_advanced_topics-python-import-system">Python Import System</h2>
<p>Importing libraries can be tricky in certain cases. The typical use is to just import any python package such as 
<code>import sys</code></p>
<p>The best option 99% of the time is going to be <a href="#python-docs_5_advanced_topics-run-scripts-in-module-mode">run scripts in module mode</a>. Read
below to learn more about how the python import system works.</p>
<p>A python interpreter or virtual environment has a list of directories to look for imports from.<br />
It will start to look for the import in the first item of the list and go through each directory 
until it finds the import or fails and raises an exception.  </p>
<p>If you are running a module that imports another module that you've created, in a directory 
outside of the current directory, then you might need to add that directory to the sys.path. </p>
<ul>
<li>
<p>Option 1: Add a pth file in the virtual environment with the path you want to add.</p>
</li>
<li>
<p>Go to venv/lib/python/site-packages/<create pth file like custom_path.pth></p>
</li>
<li>
<p>Add your path such as /home/tyranderson/snfStudyData</p>
</li>
<li>
<p>Option 2: Hardcode the path directly into the activate file.
In a venv you can edit the bin/activate file and include: <code>export PYTHONPATH="/the/path/you/want"</code></p>
</li>
<li>
<p>Option 3: Add into python script - within your script you can <code>sys.path.append("/the/path/you/want")</code>
but this is temporary and the path will be dropped once the script is done running.  </p>
</li>
</ul>
<p>More info here: https://help.pythonanywhere.com/pages/DebuggingImportError</p>
<h2 id="python-docs_5_advanced_topics-run-scripts-in-module-mode">Run scripts in module mode</h2>
<p>You can run scripts from a venv 2 different ways:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># standalone script</span>
path/to/venv/bin/python<span class="w"> </span>path/to/script
<span class="c1"># If this script has imports to other files, it will have import errors. NOT RECOMMENDED!</span>

<span class="c1"># module mode. RECOMMENDED!!</span>
Path/to/venv/bin/python<span class="w"> </span>-m<span class="w"> </span>path.to.script
</code></pre></div></td></tr></table></div>
<p>Linux
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>path/to/project
.<span class="w"> </span>venv/bin/activate<span class="w"> </span>-m<span class="w"> </span>path.to.python.file
</code></pre></div></td></tr></table></div></p>
<p>Windows
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>cd path\to\project
venv\Scripts\activate -m path.to.python.file
</code></pre></div></td></tr></table></div></p>
<p>Using module mode is considered best practice because it allows all modules to import from the project root properly.
If you have multiple python modules (.py files) you are importing from various directories within the project,
you will likely have import errors if you try to run using the standalone method. This is why its considered
best practice to run in module mode. (PyCharm does this for you when you run a script).</p>
<h2 id="python-docs_5_advanced_topics-asyncio">Asyncio</h2>
<p>All the code up to this point has been synchronous, meaning everything happens one step at a time.
Asynchronous (async) code can be used to handle multiple tasks at the same time.</p>
<p>Be aware, async code is more complicated than synchronous in any language, including python. </p>
<p>When should I use async code?</p>
<p>If your code is...</p>
<ul>
<li>CPU Bound - use <a href="https://docs.python.org/3/library/multiprocessing.html">Multi Processing</a></li>
<li>IO bound, fast IO, limited number of connections - use <a href="https://docs.python.org/3/library/threading.html">Threading</a></li>
<li>IO bound, slow IO, many connections - use <a href="https://docs.python.org/3/library/asyncio.html">Asyncio</a></li>
</ul>
<p>In other words....
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">if</span> <span class="n">io_bound</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">io_very_slow</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Use asyncio&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Use threads&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Use Multi processing&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div></p>
<h3 id="python-docs_5_advanced_topics-general-info">General Info</h3>
<p>The most important keywords: 
<code>async</code> and <code>await</code></p>
<p>The most important functions:
<code>asyncio.run()</code> and <code>asyncio.gather()</code></p>
<ul>
<li><code>async</code> - this keyword is used to define a function that will be capable of running async. This turns the 
function into whats called a coroutine. If a function is a coroutine (has the async keyword), then it has to 
utilize the await keyword as well.</li>
<li><code>await</code> - is the keyword that is used to let python know that a function is going to take some time to resolve. 
It will stop trying to run the function and move on to another task while it waits for the task to resolve.</li>
<li><code>asyncio.run()</code> - this is the most common way to run a coroutine (function with async). A coroutine cannot be 
called like a normal function.</li>
<li><code>asyncio.gather()</code> - this is not required but is extremely useful and common. <code>gather</code> allows you to run 
multiple coroutines at the same time.</li>
</ul>
<p>The best way to understand async code is to experiment with it. Lets look at some examples.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>

<span class="c1"># this is a coroutine</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">async_function</span><span class="p">(</span><span class="n">request_data</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">some_async_task</span><span class="p">(</span><span class="n">request_data</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">data</span>

<span class="c1"># this is a coroutine</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span>
      <span class="n">async_function</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">),</span> 
      <span class="n">async_function</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">),</span>
      <span class="n">async_function</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>  <span class="c1"># this is how you run a coroutine</span>
</code></pre></div></td></tr></table></div>
<h2 id="python-docs_5_advanced_topics-cython">Cython</h2>
<p>One of the biggest criticisms of python is its performance. When you compare it to statically typed, compiled languages,
it doesn't have near the same speed. One option to improve performance is with something called Cython. Cython is
an extension of python that allows statically typed python that can be compiled to C code for performance enhancements.</p>
<p><a href="https://cython.readthedocs.io/en/latest/index.html">Official Cython Docs</a></p>
<p>Example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># example.pyx file</span>

<span class="k">def</span><span class="w"> </span><span class="nf">sum_integers</span><span class="p">(</span><span class="nb">int</span> <span class="n">n</span><span class="p">):</span>
    <span class="n">cdef</span> <span class="nb">int</span> <span class="n">i</span>
    <span class="n">cdef</span> <span class="nb">int</span> <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">total</span> <span class="o">+=</span> <span class="n">i</span>
    <span class="k">return</span> <span class="n">total</span>
</code></pre></div></td></tr></table></div>
<p>Create setup.py file:</p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">setuptools</span><span class="w"> </span><span class="kn">import</span> <span class="n">setup</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">Cython.Build</span><span class="w"> </span><span class="kn">import</span> <span class="n">cythonize</span>

<span class="n">setup</span><span class="p">(</span>
    <span class="n">ext_modules</span> <span class="o">=</span> <span class="n">cythonize</span><span class="p">(</span><span class="s2">&quot;example.pyx&quot;</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div></td></tr></table></div>
run python setup.py build_ext --inplace</p>
<h2 id="python-docs_5_advanced_topics-global-interpreter-lock-gil">Global Interpreter Lock (GIL)</h2>
<p>To achieve thread safety in python, there is something called the Global Interpreter Lock (GIL). The GIL is 
a bit of a double-edged sword because it achieves thread safety, but it also makes python slower due to running
everything on one thread. Python 3.13 has introduced an experimental mode where the GIL can be deactivated.
The most important thing here for now is to know it exists.</p>
<h2 id="python-docs_5_advanced_topics-mixin">Mixin</h2>
<p>A Mixin is a class that is built for the purpose of being inhereted.
It adds functionality of one class to another. If you write
several classes and all of them need the same methods, you 
can make a Mixin class and then have the other classes
inherit the Mixin.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">UserMixin</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">login_user</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">login</span><span class="p">()</span>


<span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">(</span><span class="n">UserMixin</span><span class="p">):</span>
</code></pre></div></td></tr></table></div>
<h2 id="python-docs_5_advanced_topics-other-helpful-tips">Other Helpful Tips</h2>
<p><strong>Unpacking Iterables</strong> is a useful trick. If you have a list or other iterable that you want to perform an operation on
you can unpack it with an asterisk.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># with unpacking</span>
<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="o">*</span><span class="n">numbers</span><span class="p">)</span>

<span class="c1"># this gives the same result, but requires more code</span>
<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="n">numbers</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>The double asterisk ** is for unpacking keyword arguments. This is why
they are used in functions with args and kwargs.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">function_name</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="c1"># in the function you can access args and kwargs</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;item_01&#39;</span><span class="p">])</span>


<span class="n">function_name</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">item_01</span><span class="o">=</span><span class="s1">&#39;value 1&#39;</span><span class="p">,</span> <span class="n">item_02</span><span class="o">=</span><span class="s1">&#39;value 2&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div></section><section class="print-page" id="python-docs_7_important_libraries" heading-number="2.2.2"><h1 id="python-docs_7_important_libraries-important-libraries-getting-started">Important Libraries - Getting Started</h1>
<h2 id="python-docs_7_important_libraries-pandas">Pandas</h2>
<p>Pandas is a well-known data handling library. It has the ability to extract, manipulate, and load data.</p>
<p>The central component to pandas is the DataFrame. This is where tabular data is loaded and lives in memory.
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="c1"># blank dataframe</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

<span class="c1"># load a dict into a dataframe</span>
<span class="n">sample_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">400</span><span class="p">]}</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">sample_data</span><span class="p">)</span>

<span class="c1"># load direct from other formats</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;path/to/csv/file.csv&#39;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s1">&#39;sql statement&#39;</span><span class="p">,</span> <span class="n">sqlalchemy_conn</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="s1">&#39;io&#39;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_xml</span><span class="p">(</span><span class="s1">&#39;io&#39;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_clipboard</span><span class="p">()</span>
</code></pre></div></td></tr></table></div></p>
<p>More here https://pandas.pydata.org/docs/reference/io.html</p>
<h3 id="python-docs_7_important_libraries-transformations">Transformations</h3>
<p>Once you have data loaded into a dataframe, you can perform all kinds of operations on the values.
There are generally two ways of performing modifications. Iterating through each value (not recommended) and
across columns (called vectorization). A vectorized operation can look like this:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;path/to/file.csv&#39;</span><span class="p">)</span> <span class="c1"># sample data</span>

<span class="c1"># performing math computations across columns. You can overwrite existing columns or create new columns</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;int_column_new&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;int_column_01&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;int_column_02&#39;</span><span class="p">]</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;int_column_01&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;int_column_01&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;int_column_02&#39;</span><span class="p">]</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;float_column_new&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;float_column_01&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;float_column_02&#39;</span><span class="p">]</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;float_column_01&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;float_column_01&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;float_column_02&#39;</span><span class="p">]</span>

<span class="c1"># perform string operations</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;string_col&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;string_col&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="python-docs_7_important_libraries-filtering">Filtering</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;path/to/file.csv&#39;</span><span class="p">)</span> <span class="c1"># sample data</span>

<span class="c1"># filter where column_name is equal to a value</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;column_name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;certain_value&#39;</span><span class="p">]</span>
<span class="c1"># not equal</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;column_name&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;certain_value&#39;</span><span class="p">]</span>
<span class="c1"># substring</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;column_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;partial_string_match&#39;</span><span class="p">)]</span>
<span class="c1"># drop rows where column_name equals any of the list values</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="o">~</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;column_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="s1">&#39;of&#39;</span><span class="p">,</span> <span class="s1">&#39;values&#39;</span><span class="p">])]</span>
</code></pre></div></td></tr></table></div>
<h3 id="python-docs_7_important_libraries-change-data-types">Change Data Types</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;path/to/file.csv&#39;</span><span class="p">)</span> <span class="c1"># sample data</span>

<span class="n">df</span><span class="p">[</span><span class="s1">&#39;str_num_values&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;str_num_values&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;str_num_values&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;str_num_values&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;str_num_values&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;str_num_values&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

<span class="c1"># dates</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;date_str_values&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;date_str_values&#39;</span><span class="p">])</span>  <span class="c1"># gives datetime format</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;date_str_values&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;date_str_values&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">date</span>  <span class="c1"># gives just date, no time</span>
</code></pre></div></td></tr></table></div>
<p>Helpful functions:</p>
<p><a href="https://pandas.pydata.org/docs/reference/api/pandas.merge.html">Merge (like SQL join)</a>
<a href="https://pandas.pydata.org/docs/reference/api/pandas.melt.html">Melt (convert columns to rows)</a></p>
<h2 id="python-docs_7_important_libraries-sqlalchemy">SQLAlchemy</h2>
<p>SQLAlchemy is a robust database management utility library. There are two main components; Core and ORM.
Core is more base level, closer to the database API, while ORM aims to abstract some of the complexity
of managing connections with sessions. Generally Core is better for pure database operations while the 
ORM is geared toward web applications.</p>
<p>Has full compatibility with Postgres, MySQL, SQLite, SQL Server, and Oracle.</p>
<p>Connection strings look like this:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">db_str</span> <span class="o">=</span> <span class="s1">&#39;dialect+driver://username:password@host:port/database&#39;</span>

<span class="n">postgres</span> <span class="o">=</span> <span class="s2">&quot;postgresql+psycopg2://scott:tiger@localhost/public&quot;</span>

<span class="n">sql_server</span> <span class="o">=</span> <span class="s1">&#39;mssql+pyodbc://host/database?trusted_connection=yes&amp;driver=ODBC+Driver+18+for+SQL+Server&amp;TrustServerCertificate=yes&#39;</span>
</code></pre></div></td></tr></table></div>
<p>Modeling Tables</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span><span class="n">create_engine</span><span class="p">,</span> <span class="n">Table</span><span class="p">,</span> <span class="n">MetaData</span><span class="p">,</span> <span class="n">Column</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> 
                        <span class="n">Integer</span><span class="p">,</span> <span class="n">Double</span><span class="p">,</span> <span class="n">Date</span><span class="p">,</span> <span class="n">DateTime</span><span class="p">,</span> <span class="n">Boolean</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;postgresql+psycopg2://scott:tiger@localhost/public&#39;</span><span class="p">)</span>  <span class="c1"># engines are what connects to the db</span>

<span class="n">meta</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>  <span class="c1"># create a metadata object to attach tables to</span>

<span class="c1"># model out the table</span>
<span class="n">table1</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s1">&#39;table_name&#39;</span><span class="p">,</span>
               <span class="n">meta</span><span class="p">,</span>
               <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
               <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;column1&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
               <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;column2&#39;</span><span class="p">,</span> <span class="n">Double</span><span class="p">),</span>
               <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;column3&#39;</span><span class="p">,</span> <span class="n">Boolean</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
               <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;column4&#39;</span><span class="p">,</span> <span class="n">Date</span><span class="p">),</span>
               <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;created_date&#39;</span><span class="p">,</span> <span class="n">DateTime</span><span class="p">,</span>
                        <span class="n">server_default</span><span class="o">=</span><span class="n">func</span><span class="o">.</span><span class="n">now</span><span class="p">()),</span>
               <span class="n">schema</span><span class="o">=</span><span class="s1">&#39;public&#39;</span>
               <span class="p">)</span>

<span class="n">meta</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>  <span class="c1"># create all the tables that are connected to the metadata object, in the database</span>
</code></pre></div></td></tr></table></div>
<p>Once you have your model and engine ready, you can connect and start running operations:</p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_engine</span><span class="p">,</span> <span class="n">text</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;connection_string_to_db&#39;</span><span class="p">)</span>

<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">query</span> <span class="o">=</span> <span class="s1">&#39;SELECT * FROM table_name&#39;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="n">query</span><span class="p">))</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
This will return a list of Row objects which contain the values in tuples (even if you only selected one column).
To pull these out of the nested tuples, you can use list comprehension.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">result</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<p>Note that to run a raw SQL query we had to put it into a text() function. This function will sanitize the query to 
make sure there is no malicious injection happening. Sometimes it is difficult to transform data values in python
into a raw SQL query. SQLAlchemy has objects that can perform the same database functions, but in a more pythonic way.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">select</span><span class="p">,</span> <span class="n">insert</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">delete</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
<span class="n">data_dict</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s1">&#39;records&#39;</span><span class="p">)</span>  <span class="c1"># transform pandas dataframe into a dictionary of values</span>

<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>                              <span class="c1"># connect to database</span>
    <span class="n">insert_stmt</span> <span class="o">=</span> <span class="n">insert</span><span class="p">(</span><span class="n">table_object</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">data_dict</span><span class="p">)</span>    <span class="c1"># create the insert statement</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">insert_stmt</span><span class="p">)</span>                               <span class="c1"># execute the statement</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>                                           <span class="c1"># commit the changes</span>

    <span class="n">value</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">table_object</span><span class="p">))</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">table_object</span><span class="p">))</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>

    <span class="n">update_stmt</span> <span class="o">=</span> <span class="n">update</span><span class="p">(</span><span class="n">user_table</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">user_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;user #5&quot;</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">update_stmt</span><span class="p">)</span>

    <span class="n">delete_stmt</span> <span class="o">=</span> <span class="n">delete</span><span class="p">(</span><span class="n">user_table</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">user_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">delete_stmt</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<h2 id="python-docs_7_important_libraries-sqlite">SQLite</h2>
<p>SQLite is an embeddable OLTP database. In other words, it is a database that can be run in memory or from a file.
It is the most common database in the world being used in web apps, phone apps, IoT devices, and more.</p>
<p><a href="https://www.sqlite.org/docs.html">SQLite Docs</a></p>
<h2 id="python-docs_7_important_libraries-duckdb">DuckDB</h2>
<p>DuckDB is similar to SQLite, but is an OLAP database. It is incredibly fast and effective and processing large amounts
of data in memory. It can connect to other databases and perform direct queries on it, even being able to 
write queries on multiple separate databases 
<a href="https://duckdb.org/2024/01/26/multi-database-support-in-duckdb.html#mix-and-match">Mix and Match</a>.</p>
<p><a href="https://duckdb.org/docs/">DuckDB Docs</a></p>
<h2 id="python-docs_7_important_libraries-pyspark">Pyspark</h2>
<p>Spark is a distributed data handling library written in Java. It has a python API that allows users to
use Spark with Pyspark. In some ways it is very similar to pandas, but it can directly read and write to
Delta Lake tables, and it spreads the data handling tasks across multiple machines (distributed).</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">current_records</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;SELECT COALESCE(MAX(created_date), &#39;2000-01-01&#39;) FROM lh_gold_01.fact_cms_star_rating&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<h2 id="python-docs_7_important_libraries-dotenv">dotenv</h2>
<p>dotenv is a lightweight package that allows you to load environment variables into memory from a file. </p>
<p><code>pip install python-dotenv</code></p>
<p>Create a <code>.env</code> file in your project like:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>ENV_VAR_NAME=&#39;ENV_VAR_VALUE&#39;
API_KEY_01=&#39;2JHDKFJH3KF&#39;
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dotenv</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_dotenv</span>

<span class="n">load_dotenv</span><span class="p">()</span>

<span class="n">env_var</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;ENV_VAR_NAME&#39;</span><span class="p">)</span>
<span class="n">api_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;API_KEY_01&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h2 id="python-docs_7_important_libraries-requests">Requests</h2>
<p>Requests is a user-friendly way to make HTTP calls. Very good for API's.</p>
<p><code>pip install requests</code></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://data.cms.gov/provider-data/api/1/metastore/schemas/dataset/items/4pq5-n9py?show-reference-ids=false&#39;</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Send post requests with auth details and payload.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">io</span><span class="w"> </span><span class="kn">import</span> <span class="n">BytesIO</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> 
                        <span class="n">auth</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="s1">&#39;password_here&#39;</span><span class="p">},</span>
                        <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;payload_json&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">}},</span>
                        <span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="n">BytesIO</span><span class="p">()})</span>
</code></pre></div></td></tr></table></div>
<h2 id="python-docs_7_important_libraries-airflow">Airflow</h2>
<p>Airflow is an orchestration tool to run and monitor jobs. It allows you to program it in a way that it can
have dependencies. For example, only run one script after another has run successfully.</p>
<p><a href="https://airflow.apache.org/docs/apache-airflow/stable/index.html">Airflow Docs</a></p>
<h2 id="python-docs_7_important_libraries-flask">Flask</h2>
<p>Flask is a popular web app framework. It is very lightweight and has many "plugin" type packages that are built to 
be pieced together to achieve all desired features.</p>
<p>Web workers rule of thumb:</p>
<ul>
<li>Sync workers: ~50 - 100 concurrent users per worker.</li>
<li>Async workers: ~500 - 1000+ concurrent users per worker.</li>
</ul>
<p>Running a flask server:</p>
<ul>
<li>Standard run Flask: <code>flask --app &lt;.py file&gt; run</code> like <code>flask --app app run</code></li>
<li>Run Flask on different port: <code>flask --app app run --port 8080</code></li>
<li>Run Flask and expose to network: <code>flask --app web_app/app run --host 0.0.0.0 --port 8080</code></li>
<li>Run Flask in prod with gunicorn: <code>gunicorn -w 4 -b 0.0.0.0:8080 web_app.app:app</code></li>
</ul>
<h3 id="python-docs_7_important_libraries-self-hosting">Self Hosting</h3>
<p>Make sure to activate your python interpreter!</p>
<p>If you want to host your own flask app, gunicorn is a WSGI pure python server used for production.
You'll need to <code>pip install gunicorn</code> and then run the commands.</p>
<p>Running locally:</p>
<p><code>gunicorn -w 4 'module_name:app_name'</code></p>
<p><code>-w</code> is the number of workers, default is 1.</p>
<p>If you want to be able to access the site on the network, you need to bind to 0.0.0.0:</p>
<p><code>gunicorn -w 4 -b 0.0.0.0:8000 'app:app''</code></p>
<p><code>0.0.0.0</code> binds the app to all available network interfaces, making it accessible on your network.
This is a special ip address that tells your application to listen on all available network interfaces
of the machine, instead of just localhost. </p>
<p>To make this accessible from the internet, you need to configure your router to forward traffic that 
goes to your chosen port (8000 in this case) to the machine that is running the app. This is done
with port forwarding in your router admin settings. Visually it might look like 
<code>public_ip:8000 -&gt; server_local_ip:8000</code>. BTW this is called port forwarding.</p>
<p>You may need to update firewall config on the server to allow external connections 
on port 8000 (linux <code>sudo ufw allow 8000</code>). </p>
<p>If your ISP changes your public IP, you make need to use a dynamic DNS (DDNS) service like No-IP or DynDNS.</p>
<p>Security Warning: exposing your app to the internet comes with security risks. To mitigate:</p>
<ol>
<li>Use HTTPS: Serve your app behind a reverse proxy like nginx with an SSL certificate.</li>
<li>Restrict Access: Limit access to specific IPs or use authentication to secure your app.</li>
<li>Monitor Logs: Monitor your server logs for unusual activity.</li>
</ol>
<p>Stopping the app:</p>
<p>Use <code>pgrep -fl gunicorn</code> to show a list of gunicorn processes with their PIDs.</p>
<p>kill by bid: <code>kill &lt;pid&gt;</code> (kill by process ID)</p>
<p>OR</p>
<p>kill all gunicorn: <code>pkill gunicorn</code> (kill by process name)</p>
<p>For a more stable production environment, a process manager is better.</p>
<p>Create a systemd service file.</p>
<p>Then you can enable/disable/start/stop the app as a service.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>sudo systemctl enable gunicorn  # auto start on boot
sudo systemctl start gunicorn  # prevent auto start on boot
sudo systemctl status gunicorn
sudo systemctl stop gunicorn
sudo systemctl restart &lt;service-name&gt;
</code></pre></div></td></tr></table></div>
<p>When you make changes to a service file, you need to reload the service:</p>
<p><code>sudo systemctl daemon-reload</code></p>
<p><a href="https://flask.palletsprojects.com/en/stable/">Flask Docs</a></p>
<h2 id="python-docs_7_important_libraries-fastapi">FastAPI</h2>
<p>FastAPI is one of the most performant web frameworks available for python.</p>
<h2 id="python-docs_7_important_libraries-pyinstaller">Pyinstaller</h2>
<p>Pyinstaller is a great way to create executable files. This makes your python program run
without needing python on the host machine. Great for sharing a python program with others
who do not have python on their computer.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># install</span>
pip<span class="w"> </span>install<span class="w"> </span>pyinstaller

<span class="c1"># create executable in one file.</span>
pyinstaller<span class="w"> </span>--onefile<span class="w"> </span>script_name.py

<span class="c1"># there are several flags that can be used</span>
pyinstaller<span class="w"> </span>--onefile<span class="w"> </span>--noconsole<span class="w"> </span>--icon<span class="o">=</span>your_icon.ico<span class="w"> </span>--add-data<span class="w"> </span><span class="s2">&quot;config.json;.&quot;</span><span class="w"> </span>script_name.py
</code></pre></div></td></tr></table></div>
<p>Pyinstaller will capture other .py files if you have more than one and they are imported.</p>
<h2 id="python-docs_7_important_libraries-other-interesting-libraries">Other Interesting Libraries</h2>
<h3 id="python-docs_7_important_libraries-locust">Locust</h3>
<p>Locust is a load testing framework that can send millions of requests.</p>
<p><a href="https://locust.io/">Locust Docs</a></p>
<h3 id="python-docs_7_important_libraries-reportlab">Reportlab</h3>
<p>Creating PDF's can be difficult or require external software like LaTeX or wkhtmltopdf.</p>
<p>If you don't want to have these dependencies, reportlab is a pure python library to create PDFs.</p>
<p><code>pip install reportlab</code></p>
<p>ReportLab includes a low-level API for generating PDF documents directly from Python, 
and a higher-level template languagesimilar to HTML and the template systems used in 
web developmentcalled RML. Generally, the second option is usually more convenient 
for those who must make exhaustive use of the capabilities of the library when 
generating documents. For the rest of the cases, the low-level API that we will 
describe in this article will suffice. However, you can find the official 
documentation here <a href="https://docs.reportlab.com/">https://docs.reportlab.com/</a>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">reportlab.pdfgen</span><span class="w"> </span><span class="kn">import</span> <span class="n">canvas</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">Canvas</span><span class="p">(</span><span class="s2">&quot;hello-world.pdf&quot;</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># import the canvas object</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">reportlab.pdfgen</span><span class="w"> </span><span class="kn">import</span> <span class="n">canvas</span>

<span class="c1"># create a Canvas object with a filename</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">Canvas</span><span class="p">(</span><span class="s2">&quot;rl-hello_again.pdf&quot;</span><span class="p">,</span> <span class="n">pagesize</span><span class="o">=</span><span class="p">(</span><span class="mf">595.27</span><span class="p">,</span> <span class="mf">841.89</span><span class="p">))</span>  <span class="c1"># A4 pagesize</span>
<span class="c1"># draw a string at x=100, y=800 points</span>
<span class="c1"># point ~ standard desktop publishing (72 DPI)</span>
<span class="c1"># coordinate system:</span>
<span class="c1">#   y</span>
<span class="c1">#   |</span>
<span class="c1">#   |   page</span>
<span class="c1">#   |</span>
<span class="c1">#   |</span>
<span class="c1">#   0-------x</span>
<span class="n">c</span><span class="o">.</span><span class="n">drawString</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">780</span><span class="p">,</span> <span class="s2">&quot;Hello Again&quot;</span><span class="p">)</span>
<span class="c1"># finish page</span>
<span class="n">c</span><span class="o">.</span><span class="n">showPage</span><span class="p">()</span>
<span class="c1"># construct and save file to .pdf</span>
<span class="n">c</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>Use standard page sizes like letter, A4, and more.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">reportlab.lib.pagesizes</span><span class="w"> </span><span class="kn">import</span> <span class="n">letter</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">Canvas</span><span class="p">(</span><span class="s2">&quot;hello-world.pdf&quot;</span><span class="p">,</span> <span class="n">pagesize</span><span class="o">=</span><span class="n">letter</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Make shapes in PDF.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">reportlab.lib.pagesizes</span><span class="w"> </span><span class="kn">import</span> <span class="n">A4</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">reportlab.pdfgen</span><span class="w"> </span><span class="kn">import</span> <span class="n">canvas</span>

<span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">A4</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">Canvas</span><span class="p">(</span><span class="s2">&quot;shapes.pdf&quot;</span><span class="p">,</span> <span class="n">pagesize</span><span class="o">=</span><span class="n">A4</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">drawString</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">h</span> <span class="o">-</span> <span class="mi">50</span><span class="p">,</span> <span class="s2">&quot;Line&quot;</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">120</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">h</span> <span class="o">-</span> <span class="mi">45</span>
<span class="n">c</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">100</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">drawString</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">h</span> <span class="o">-</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">&quot;Rectangle&quot;</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">h</span> <span class="o">-</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">drawString</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">h</span> <span class="o">-</span> <span class="mi">170</span><span class="p">,</span> <span class="s2">&quot;Circle&quot;</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="mi">170</span><span class="p">,</span> <span class="n">h</span> <span class="o">-</span> <span class="mi">165</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">drawString</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">h</span> <span class="o">-</span> <span class="mi">240</span><span class="p">,</span> <span class="s2">&quot;Ellipse&quot;</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">ellipse</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="mi">170</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">100</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="mi">220</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">showPage</span><span class="p">()</span>
<span class="n">c</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>You can make tables from a pandas dataframe</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">reportlab.lib.pagesizes</span><span class="w"> </span><span class="kn">import</span> <span class="n">letter</span><span class="p">,</span> <span class="n">landscape</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">reportlab.platypus</span><span class="w"> </span><span class="kn">import</span> <span class="n">SimpleDocTemplate</span><span class="p">,</span> <span class="n">Table</span><span class="p">,</span> <span class="n">TableStyle</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">reportlab.lib</span><span class="w"> </span><span class="kn">import</span> <span class="n">colors</span>

<span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;landscape_table_fit.pdf&quot;</span>
<span class="n">doc</span> <span class="o">=</span> <span class="n">SimpleDocTemplate</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">pagesize</span><span class="o">=</span><span class="n">landscape</span><span class="p">(</span><span class="n">letter</span><span class="p">))</span>

<span class="c1"># Example DataFrame</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">&quot;Column 1&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">],</span>
    <span class="s2">&quot;Column 2&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
    <span class="s2">&quot;Column 3&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">4.5</span><span class="p">,</span> <span class="mf">5.5</span><span class="p">,</span> <span class="mf">6.5</span><span class="p">],</span>
    <span class="s2">&quot;Column 4&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Long Text Example&quot;</span><span class="p">,</span> <span class="s2">&quot;Another Example&quot;</span><span class="p">,</span> <span class="s2">&quot;More Text&quot;</span><span class="p">],</span>
    <span class="s2">&quot;Column 5&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">]</span>
<span class="p">})</span>

<span class="c1"># Convert DataFrame to list of lists</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()]</span> <span class="o">+</span> <span class="n">df</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># Calculate dynamic column widths to fit the page</span>
<span class="n">page_width</span> <span class="o">=</span> <span class="n">landscape</span><span class="p">(</span><span class="n">letter</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">available_width</span> <span class="o">=</span> <span class="n">page_width</span> <span class="o">-</span> <span class="mi">40</span>  <span class="c1"># Subtract margins</span>
<span class="n">num_columns</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<span class="n">col_width</span> <span class="o">=</span> <span class="n">available_width</span> <span class="o">/</span> <span class="n">num_columns</span>

<span class="c1"># Create a table with fixed column widths</span>
<span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">colWidths</span><span class="o">=</span><span class="p">[</span><span class="n">col_width</span><span class="p">]</span> <span class="o">*</span> <span class="n">num_columns</span><span class="p">)</span>
<span class="n">table</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">TableStyle</span><span class="p">([</span>
    <span class="p">(</span><span class="s1">&#39;BACKGROUND&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">colors</span><span class="o">.</span><span class="n">lightgrey</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;TEXTCOLOR&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">colors</span><span class="o">.</span><span class="n">black</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;ALIGN&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;CENTER&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;FONTNAME&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="s1">&#39;Helvetica-Bold&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;BOTTOMPADDING&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">12</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;GRID&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">colors</span><span class="o">.</span><span class="n">grey</span><span class="p">),</span>
<span class="p">]))</span>

<span class="c1"># Add the table to the elements list</span>
<span class="n">elements</span> <span class="o">=</span> <span class="p">[</span><span class="n">table</span><span class="p">]</span>

<span class="c1"># Build the document</span>
<span class="n">doc</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;PDF saved as </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div></section><section class="print-page" id="python-docs_9_std_lib" heading-number="2.2.3"><h1 id="python-docs_9_std_lib-notes-on-standard-library">Notes on Standard Library</h1>
<h2 id="python-docs_9_std_lib-io-package">IO package</h2>
<p><a href="https://docs.python.org/3/library/io.html">https://docs.python.org/3/library/io.html</a></p>
<p>The io module provides Pythons main facilities for dealing with various types of I/O. 
There are three main types of I/O: text I/O, binary I/O and raw I/O. 
These are generic categories, and various backing stores can be used for each of them. 
A concrete object belonging to any of these categories is called a file object. 
Other common terms are stream and file-like object.</p>
<p>Independent of its category, each concrete stream object will also have various 
capabilities: it can be read-only, write-only, or read-write. It can also allow 
arbitrary random access (seeking forwards or backwards to any location), or 
only sequential access (for example in the case of a socket or pipe).</p>
<h3 id="python-docs_9_std_lib-text-io">Text I/O</h3>
<p>Text I/O expects and produces str objects. This means that whenever the backing store 
is natively made of bytes (such as in the case of a file), encoding and decoding of 
data is made transparently as well as optional translation of platform-specific newline characters.</p>
<p>The easiest way to create a text stream is with open(), optionally specifying an encoding:</p>
<p><code>f = open("myfile.txt", "r", encoding="utf-8")</code></p>
<p>In-memory text streams are also available as StringIO objects:</p>
<p><code>f = io.StringIO("some initial text data")</code></p>
<p>StringIO is useful when you need to read or write data to a string buffer as 
if it were a file, rather than creating an actual file on disk. It can be 
used to create strings that mimic file objects, allowing you to read and 
write data to them in the same way you would with a file.</p>
<p><img alt="bytesio.png" src="../images/bytesio.png" /></p>
<h3 id="python-docs_9_std_lib-binary-io">Binary I/O</h3>
<p>Binary I/O (also called buffered I/O) expects bytes-like objects and produces bytes objects. 
No encoding, decoding, or newline translation is performed. This category of streams can 
be used for all kinds of non-text data, and also when manual control over 
the handling of text data is desired.</p>
<p>The easiest way to create a binary stream is with open() with 'b' in the mode string:</p>
<p><code>f = open("myfile.jpg", "rb")</code></p>
<p>In-memory binary streams are also available as BytesIO objects:</p>
<p><code>f = io.BytesIO(b"some initial binary data: \x00\x01")</code></p>
<h2 id="python-docs_9_std_lib-smtp-sending-emails">SMTP - Sending Emails</h2>
<p>You can send emails directly through python using the simple mail transmission protocol.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">smtplib</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">email.message</span><span class="w"> </span><span class="kn">import</span> <span class="n">EmailMessage</span>

<span class="n">msg</span> <span class="o">=</span> <span class="n">EmailMessage</span><span class="p">()</span>
<span class="n">msg</span><span class="p">[</span><span class="s1">&#39;From&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;email@address.com&#39;</span>
<span class="n">msg</span><span class="p">[</span><span class="s1">&#39;To&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;recipient@address.com&#39;</span>
<span class="n">msg</span><span class="p">[</span><span class="s1">&#39;Subject&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;This is an Email&#39;</span>

<span class="n">msg</span><span class="o">.</span><span class="n">set_content</span><span class="p">(</span><span class="s1">&#39;Body of email here.&#39;</span><span class="p">)</span>

<span class="n">mailserver</span> <span class="o">=</span> <span class="n">smtplib</span><span class="o">.</span><span class="n">SMTP</span><span class="p">(</span><span class="s1">&#39;smtp.office365.com&#39;</span><span class="p">,</span> <span class="mi">587</span><span class="p">)</span>  <span class="c1"># connect to email service</span>
<span class="n">mailserver</span><span class="o">.</span><span class="n">starttls</span><span class="p">()</span>  <span class="c1"># starts TLS (security protocol that encrypts data sent over the internet</span>
<span class="n">mailserver</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">msg</span><span class="p">[</span><span class="s1">&#39;From&#39;</span><span class="p">],</span> <span class="s1">&#39;password&#39;</span><span class="p">)</span>  <span class="c1"># login to the email service account</span>
<span class="n">mailserver</span><span class="o">.</span><span class="n">sendmail</span><span class="p">(</span><span class="n">msg</span><span class="p">[</span><span class="s1">&#39;From&#39;</span><span class="p">],</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;To&#39;</span><span class="p">],</span> <span class="n">msg</span><span class="o">.</span><span class="n">as_string</span><span class="p">())</span>  <span class="c1"># send the email</span>
<span class="n">mailserver</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>Mail with attachment</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">smtplib</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">email.message</span><span class="w"> </span><span class="kn">import</span> <span class="n">EmailMessage</span>

<span class="n">msg</span> <span class="o">=</span> <span class="n">EmailMessage</span><span class="p">()</span>
<span class="n">msg</span><span class="p">[</span><span class="s1">&#39;From&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;email@address.com&#39;</span>
<span class="n">msg</span><span class="p">[</span><span class="s1">&#39;To&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;recipient@address.com&#39;</span>
<span class="n">msg</span><span class="p">[</span><span class="s1">&#39;Subject&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;This is an Email&#39;</span>

<span class="n">msg</span><span class="o">.</span><span class="n">set_content</span><span class="p">(</span><span class="s1">&#39;Body of email here.&#39;</span><span class="p">)</span>

<span class="n">file</span> <span class="o">=</span> <span class="s1">&#39;path/to/file.txt&#39;</span>
<span class="n">extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">file_data</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">msg</span><span class="o">.</span><span class="n">add_attachment</span><span class="p">(</span><span class="n">file_data</span><span class="p">,</span> <span class="n">maintype</span><span class="o">=</span><span class="s1">&#39;application&#39;</span><span class="p">,</span> <span class="n">subtype</span><span class="o">=</span><span class="n">extension</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file</span><span class="p">))</span>

<span class="n">mailserver</span> <span class="o">=</span> <span class="n">smtplib</span><span class="o">.</span><span class="n">SMTP</span><span class="p">(</span><span class="s1">&#39;smtp.office365.com&#39;</span><span class="p">,</span> <span class="mi">587</span><span class="p">)</span>  <span class="c1"># connect to email service</span>
<span class="n">mailserver</span><span class="o">.</span><span class="n">starttls</span><span class="p">()</span>  <span class="c1"># starts TLS (security protocol that encrypts data sent over the internet</span>
<span class="n">mailserver</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">msg</span><span class="p">[</span><span class="s1">&#39;From&#39;</span><span class="p">],</span> <span class="s1">&#39;password&#39;</span><span class="p">)</span>  <span class="c1"># login to the email service account</span>
<span class="n">mailserver</span><span class="o">.</span><span class="n">sendmail</span><span class="p">(</span><span class="n">msg</span><span class="p">[</span><span class="s1">&#39;From&#39;</span><span class="p">],</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;To&#39;</span><span class="p">],</span> <span class="n">msg</span><span class="o">.</span><span class="n">as_string</span><span class="p">())</span>  <span class="c1"># send the email</span>
<span class="n">mailserver</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>You can also send nicely formatted HTML emails with MIME</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">smtplib</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">email.mime.multipart</span><span class="w"> </span><span class="kn">import</span> <span class="n">MIMEMultipart</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">email.mime.text</span><span class="w"> </span><span class="kn">import</span> <span class="n">MIMEText</span>

<span class="n">msg</span> <span class="o">=</span> <span class="n">MIMEMultipart</span><span class="p">(</span><span class="s1">&#39;mixed&#39;</span><span class="p">)</span>
<span class="n">msg</span><span class="p">[</span><span class="s1">&#39;From&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;email@address.com&#39;</span>
<span class="n">msg</span><span class="p">[</span><span class="s1">&#39;To&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;recipient@address.com&#39;</span>
<span class="n">msg</span><span class="p">[</span><span class="s1">&#39;Subject&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Subject Here&#39;</span>

<span class="n">html_body</span> <span class="o">=</span> <span class="n">MIMEMultipart</span><span class="p">(</span><span class="s1">&#39;alternative&#39;</span><span class="p">)</span>

<span class="n">html_body_text</span> <span class="o">=</span> <span class="n">MIMEText</span><span class="p">(</span><span class="s1">&#39;&lt;html&gt;&lt;div&gt;HTML Content here&lt;/div&gt;&lt;/html&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;html&#39;</span><span class="p">)</span>
<span class="n">html_body</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">html_body_text</span><span class="p">)</span>

<span class="c1"># Attach the multipart/alternative part to the multipart/mixed message</span>
<span class="n">msg</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">html_body</span><span class="p">)</span>

<span class="c1"># Remaining code for sending the email</span>
<span class="n">mailserver</span> <span class="o">=</span> <span class="n">smtplib</span><span class="o">.</span><span class="n">SMTP</span><span class="p">(</span><span class="s1">&#39;smtp.office365.com&#39;</span><span class="p">,</span> <span class="mi">587</span><span class="p">)</span>
<span class="n">mailserver</span><span class="o">.</span><span class="n">starttls</span><span class="p">()</span>
<span class="n">mailserver</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">msg</span><span class="p">[</span><span class="s1">&#39;From&#39;</span><span class="p">],</span> <span class="s1">&#39;password here&#39;</span><span class="p">)</span>
<span class="n">mailserver</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="n">mailserver</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<h2 id="python-docs_9_std_lib-python-http-server">Python HTTP Server</h2>
<p>Python has an HTTP server built into the standard library.</p>
<p>Serving static files: <code>python -m http.server 8008</code> this will look for an index.html
file to start serving, and can be accessed on <code>localhost:8008</code>.</p>
<h2 id="python-docs_9_std_lib-python-on-ios-and-android">Python on iOS and Android</h2>
<p>This info comes from this article <a href="https://medium.com/@pouyahallaj/python-for-ios-a-new-era-with-python-3-13-cb19460f5c75">Medium Article</a></p>
<p>Python 3.13 has brought official support for iOS and Android as a platform. 
On iOS, since Apple restricts being able to install system resources or run binaries, 
developers are forced to run python in embedded mode. In other words, writing native iOS
applications and embedding a python interpreter using <code>libPython</code>. This bundles the python
interpreter and your code into a bundle that gets uploaded to the App store.</p>
<p>Here is the offical docs <a href="https://docs.python.org/3/using/ios.html">https://docs.python.org/3/using/ios.html</a></p></section><section class="print-page" id="python-testing" heading-number="2.2.4"><h1 id="python-testing-testing">Testing</h1>
<p>Testing is a powerful way to catch any errors in your code, with code. Instead of 
trying to run your code and catch errors, testing libraries can help catch things
faster.</p>
<h2 id="python-testing-pytest">pytest</h2>
<p><code>pytest</code> is a 3rd party library, built on the standard library <code>unittest</code>.</p>
<h3 id="python-testing-install">Install</h3>
<p><code>pip install pytest</code> or <code>uv add pytest</code></p>
<h3 id="python-testing-quickstart">Quickstart</h3>
<p>In your project create a folder called <code>test</code>. Add a test module for each 
module you want to test. Make sure to include the word "test" before
or after the name, like below.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code>- project
  - src
    - adapters
    - app
      - my_module.py
      - utils
      - tests
        - test_my_module.py
  - pyproject.toml
</code></pre></div></td></tr></table></div>
<p>Inside the module you can add functions or classes/methods that do the testing.
Here is a simple example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># my_module.py</span>

<span class="k">def</span><span class="w"> </span><span class="nf">add_numbers</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># test_my_module.py</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">my_module</span><span class="w"> </span><span class="kn">import</span> <span class="n">add_numbers</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_add_numbers</span><span class="p">():</span>
    <span class="k">assert</span> <span class="n">add_numbers</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span>
</code></pre></div></td></tr></table></div>
<p>Once your tests are built, run <code>pytest</code>. Pytest will search recursively for:</p>
<ul>
<li>All modules named <code>test_*.py</code> or <code>*_test.py</code> and then inside they look for...</li>
<li>functions that start with <code>test_</code></li>
<li>Classes with Test (that don't have an <strong>init</strong>)</li>
<li>Methods inside those classes that start with <code>test_</code></li>
</ul>
<p>Then run those tests.</p>
<h3 id="python-testing-strategy">Strategy</h3>
<p>It's best practice to write tests and run as you go. If you add new logic, create a test for it.
Otherwise you'll accumulate too much technical debt and it will be a big job to 
write tests for everything. Higher chance of missing something. </p>
<h3 id="python-testing-commands">Commands</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># run all tests</span>
pytest

<span class="c1"># run single test file</span>
pytest<span class="w"> </span>tests/test_my_module.py

<span class="c1"># run single test function</span>
pytests<span class="w"> </span>tests/test_my_module.py::test_add_numbers
</code></pre></div></td></tr></table></div></section></section>
                    <section class='print-page md-section' id='section-2-3' heading-number='2.3'>
                        <h1>Execution and Deployment<a class='headerlink' href='#section-2-3' title='Permanent link'></a>
                        </h1>
                    <section class="print-page" id="python-docs_4_building_large_projects" heading-number="2.3.1"><h1 id="python-docs_4_building_large_projects-building-large-projects">Building Large Projects</h1>
<h2 id="python-docs_4_building_large_projects-general">General</h2>
<p>Large python projects can be extremely powerful, 
but they must be organized a certain way to work properly.</p>
<p>A project should always start with a root folder and other 
folders and files will be housed inside the root folder.</p>
<p>There are special <code>.py</code> files that python will use to do
different things such as <code>__init__.py</code> and <code>__main__.py</code>.</p>
<h2 id="python-docs_4_building_large_projects-vocabulary">Vocabulary</h2>
<ul>
<li><strong>Module:</strong> .py file</li>
<li><strong>Package:</strong> a folder with <code>__init__.py</code> file in it. This will have code that can be imported.</li>
<li><strong>Library:</strong> One or more packages grouped together and distributed via PyPI. Built to
be reusable blocks of code.</li>
</ul>
<h2 id="python-docs_4_building_large_projects-the-classic-structure-double-name">The Classic Structure (Double Name)</h2>
<p>The classic method to package a project is with the double name method.
This uses a root folder to hold all the metadata, README, LICENSE, pyproject, etc. and then 
a subfolder that has the project code. Below is an example:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code>pandas/               # repo root
 pyproject.toml / setup.py / setup.cfg
 README.md
 LICENSE
 pandas/            # actual Python package (import name = pandas)
   __init__.py
   core/
   io/
   util/
   ...
 doc/               # documentation
 tests/             # test suite
 ...
</code></pre></div></td></tr></table></div></p>
<p>This lets us run things like:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>python<span class="w"> </span>-m<span class="w"> </span>pandas

python<span class="w"> </span>-m<span class="w"> </span>pandas.core
</code></pre></div></td></tr></table></div></p>
<p>This setup gives the least amount of friction, is well established, and 
gives good organization. The downside is that it can cause mask import mistakes
where the script runs in dev but not in prod once you pip install it.</p>
<p>You can avoid these issues by doing <code>pip install -e .</code> which installs your package
in edit mode. Edit mode means you can make changes to the installed package
and it will hot reload. </p>
<h3 id="python-docs_4_building_large_projects-the-workflow">The Workflow</h3>
<ol>
<li>Build your project. </li>
<li>Install your project <code>pip install -e .</code></li>
<li>In <code>pyproject.toml</code> add:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">[project.scripts]</span>
<span class="n">package_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;module:callable&quot;</span>
<span class="c1"># this creates a command line command. Replace with a command and path to what gets executed.</span>
</code></pre></div></td></tr></table></div></li>
<li>Call like <code>package_name</code> if you want a terminal command.</li>
</ol>
<h2 id="python-docs_4_building_large_projects-a-more-modern-system">A More Modern System</h2>
<h3 id="python-docs_4_building_large_projects-goals-of-a-good-structure">Goals of a good structure</h3>
<ul>
<li><strong>Separation of concerns:</strong> isolate domain logic, I/O, and interfaces.</li>
<li><strong>Testability &amp; maintainability:</strong> easy to unit test and refactor.</li>
<li><strong>Distributable:</strong> buildable wheel, clean dependency metadata.</li>
<li><strong>Usability:</strong> clear public API, stable CLI, sensible configuration.</li>
</ul>
<h3 id="python-docs_4_building_large_projects-canonical-layout-src-structure">Canonical layout (src/ structure)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code>your-project/
 pyproject.toml
 README.md
 LICENSE
 .gitignore
 src/
   your_package/
      __init__.py
      __main__.py           # optional: `python -m your_package`
      cli/                  # CLI commands
        __init__.py
      core/                 # domain logic (pure, testable)
        models.py
        services.py
        rules.py
      adapters/             # I/O boundaries (DB, HTTP, FS, APIs)
        db.py
        http.py
        storage.py
      app/                  # application orchestration/wiring
        config.py
        logging.py
        container.py       # dependency wiring/injection
      utils/                # cross-cutting helpers
         time.py
 tests/
   conftest.py
   unit/
   integration/
 examples/                    # optional usage demos / notebooks
</code></pre></div></td></tr></table></div>
<p>Why <code>src/</code>? It prevents tests from accidentally importing 
your <strong>working directory</strong> instead of the installed package, 
catching packaging/import mistakes early.</p>
<h3 id="python-docs_4_building_large_projects-pyprojecttoml-modern-packaging">pyproject.toml (modern packaging)</h3>
<p>Use PEP 621 metadata; pick a backend (e.g., Hatchling, Setuptools).</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">[build-system]</span>
<span class="n">requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;hatchling&gt;=1.25&quot;</span><span class="p">]</span>
<span class="n">build-backend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;hatchling.build&quot;</span>

<span class="k">[project]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;your-project&quot;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.1.0&quot;</span>
<span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Does X&quot;</span>
<span class="n">readme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;README.md&quot;</span>
<span class="n">requires-python</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&gt;=3.10&quot;</span>
<span class="n">license</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;LICENSE&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="n">authors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;You&quot;</span><span class="w"> </span><span class="p">}]</span>
<span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="s2">&quot;requests&gt;=2.32&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">[project.optional-dependencies]</span>
<span class="n">dev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;pytest&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;mypy&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ruff&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;black&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;pytest-cov&quot;</span><span class="p">]</span>

<span class="k">[project.scripts]</span><span class="w">                 </span><span class="c1"># creates console commands on install</span>
<span class="n">your-cli</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;your_package.cli:main&quot;</span>

<span class="k">[tool.hatch.build.targets.wheel]</span>
<span class="n">packages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;src/your_package&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<ul>
<li><strong>[project.scripts]</strong> wires a <strong>console script</strong> (entry point). It points to a callable (e.g., <code>def main(): ...</code>).</li>
<li>Prefer <strong>runtime deps</strong> under <code>[project.dependencies]</code> and dev tools under an optional extra (e.g., <code>pip install .[dev]</code>).</li>
</ul>
<h3 id="python-docs_4_building_large_projects-public-api-design">Public API design</h3>
<ul>
<li>Use <code>__init__.py</code> to <strong>re-export</strong> the small, stable surface you commit to:</li>
</ul>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># src/your_package/__init__.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.core.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Thing</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.core.services</span><span class="w"> </span><span class="kn">import</span> <span class="n">Service</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Thing&quot;</span><span class="p">,</span> <span class="s2">&quot;Service&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
* Keep internal modules private-ish (dont re-export them) so refactors dont break users.</p>
<h3 id="python-docs_4_building_large_projects-layers-that-scale">Layers that scale</h3>
<ul>
<li><strong>core/</strong>: pure business rules, no network/filesystem. Most unit tests live here.</li>
<li><strong>adapters/</strong>: concrete I/O implementations (Postgres, S3, HTTP, etc.).</li>
<li><strong>app/</strong> (or <strong>service/</strong>): composition, config, logging, dependency injection, runtime wiring.</li>
<li><strong>cli/</strong>: thin commands that call into <strong>app/</strong> (dont bury logic in click/argparse handlers).</li>
</ul>
<p>This ports &amp; adapters (hexagonal) approach keeps logic decoupled from I/O so you can swap adapters (e.g., SQLite  Postgres) or test with fakes.</p>
<h3 id="python-docs_4_building_large_projects-configuration-secrets">Configuration &amp; secrets</h3>
<ul>
<li>Read config <strong>from environment</strong> first, with optional <code>.env</code> during development.</li>
<li>Centralize in <code>app/config.py</code>:</li>
</ul>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">:</span>
    <span class="n">db_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;APP_DB_URL&quot;</span><span class="p">,</span> <span class="s2">&quot;sqlite:///local.db&quot;</span><span class="p">)</span>
    <span class="n">log_level</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;APP_LOG_LEVEL&quot;</span><span class="p">,</span> <span class="s2">&quot;INFO&quot;</span><span class="p">)</span>

<span class="n">settings</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
* Avoid global state; pass <code>settings</code> into your app wiring or use a small container.</p>
<h3 id="python-docs_4_building_large_projects-logging">Logging</h3>
<ul>
<li>Configure once in <code>app/logging.py</code> and call it from your CLI entry:</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span><span class="o">,</span><span class="w"> </span><span class="nn">sys</span>

<span class="k">def</span><span class="w"> </span><span class="nf">setup</span><span class="p">(</span><span class="n">level</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;INFO&quot;</span><span class="p">):</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
        <span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%(asctime)s</span><span class="s2"> </span><span class="si">%(levelname)s</span><span class="s2"> </span><span class="si">%(name)s</span><span class="s2">: </span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">stream</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="python-docs_4_building_large_projects-testing-strategy">Testing strategy</h3>
<ul>
<li><strong>pytest</strong> with <code>tests/unit</code> for pure logic and <code>tests/integration</code> for external systems.</li>
<li>Use fakes or fixtures for adapters; avoid hitting the network in unit tests.</li>
<li>Keep test imports identical to users: <code>from your_package import Service</code>.</li>
</ul>
<h3 id="python-docs_4_building_large_projects-data-and-resources">Data and resources</h3>
<ul>
<li>Keep runtime data in the package only if truly needed; prefer external files or embedded resources loaded via <code>importlib.resources</code> rather than relative paths.</li>
<li>For large assets, ship them separately or fetch at runtime.</li>
</ul>
<h3 id="python-docs_4_building_large_projects-cli-vs-library">CLI vs library</h3>
<ul>
<li>Treat the <strong>package as a library</strong> first; keep the CLI thin. That makes automation and testing easier and lets others use your code programmatically.</li>
</ul>
<h3 id="python-docs_4_building_large_projects-common-pitfalls-to-avoid">Common pitfalls to avoid</h3>
<ul>
<li><strong>Logic in scripts</strong>: move code out of <code>if __name__ == "__main__":</code> into functions/classes.</li>
<li><strong>Tight coupling to I/O</strong>: keep core pure; push side effects to adapters.</li>
<li><strong>Leaky imports</strong>: dont rely on import side effects; be explicit.</li>
<li><strong>Messy init</strong>: avoid heavy work at import time; initialize in <code>main()</code> / app wiring.</li>
</ul>
<h2 id="python-docs_4_building_large_projects-minimal-example-for-a-cli">Minimal example for a CLI</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># src/your_package/cli.py</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">argparse</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.app.logging</span><span class="w"> </span><span class="kn">import</span> <span class="n">setup</span> <span class="k">as</span> <span class="n">setup_logging</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.app.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.core.services</span><span class="w"> </span><span class="kn">import</span> <span class="n">Service</span>

<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--log-level&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">log_level</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

    <span class="n">setup_logging</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">log_level</span><span class="p">)</span>
    <span class="n">Service</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div></td></tr></table></div></section><section class="print-page" id="python-deployment" heading-number="2.3.2"><h1 id="python-deployment-deploying-python-programs">Deploying Python Programs</h1>
<p>Deployment of a python program depends on what type of program you are deploying. Desktop apps, web apps, ETL scripts,
API's, internal tools, etc. all have different requirements.</p>
<h2 id="python-deployment-deployment-types">Deployment Types</h2>
<p>There are 3 main forms:</p>
<ol>
<li>Standard script/venv.</li>
<li>Docker container.</li>
<li>Executable file.</li>
</ol>
<hr />
<h3 id="python-deployment-local-script-cron-job"> Local Script / Cron Job</h3>
<p>Best for <strong>simple scripts</strong> (ETL, backups, notifications, etc.)</p>
<ul>
<li><strong>Deploy</strong>: copy code to server (via <code>git clone</code>, <code>scp</code>, or syncing)</li>
<li><strong>Env</strong>: use a virtual environment (<code>uv venv</code>, <code>python -m venv</code>, or <code>conda</code>)</li>
<li><strong>Run</strong>: directly with <code>python script.py</code> or via cron/systemd</li>
</ul>
<p> Example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/my_project<span class="w">                       </span><span class="c1"># create folder</span>
uv<span class="w"> </span>venv<span class="w">                               </span><span class="c1"># create the venv</span>
<span class="nb">source</span><span class="w"> </span>.venv/bin/activate<span class="w">             </span><span class="c1"># activate the venv</span>
uv<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt<span class="w">    </span><span class="c1"># install dependencies</span>

<span class="c1"># run the script like</span>
python<span class="w"> </span>my_job.py
<span class="c1"># or </span>
python<span class="w"> </span>-m<span class="w"> </span>my_job
</code></pre></div></td></tr></table></div>
<p>From here you can setup to run with a cronjob or another program. </p>
<p>Cronjob:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>crontab<span class="w"> </span>-e

<span class="c1"># save this in the crontab file that opens</span>
<span class="m">0</span>/20<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span><span class="nb">source</span><span class="w"> </span>/Users/tyleranderson/PyCharmProjects/project/backup_tmp_dir.sh<span class="w"> </span>
</code></pre></div></td></tr></table></div></p>
<p>or Airflow:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">subprocess</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">datetime</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">airflow.decorators</span><span class="w"> </span><span class="kn">import</span> <span class="n">dag</span><span class="p">,</span> <span class="n">task</span>

<span class="nd">@dag</span><span class="p">(</span><span class="n">default_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="s2">&quot;airflow&quot;</span><span class="p">},</span>
     <span class="n">schedule_interval</span><span class="o">=</span><span class="s2">&quot;*/10 * * * *&quot;</span><span class="p">,</span>
     <span class="n">dagrun_timeout</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
     <span class="n">max_active_runs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
     <span class="n">max_active_tasks</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
     <span class="n">start_date</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2025</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
     <span class="n">catchup</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">run_job</span><span class="p">():</span>
    <span class="nd">@task</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">job_1</span><span class="p">():</span>
        <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s2">&quot;bash&quot;</span><span class="p">,</span> <span class="s2">&quot;-c&quot;</span><span class="p">,</span> <span class="s2">&quot;source /path/to/file&quot;</span><span class="p">],</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="nd">@task</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">job_2</span><span class="p">():</span>
        <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s2">&quot;bash&quot;</span><span class="p">,</span> <span class="s2">&quot;-c&quot;</span><span class="p">,</span> <span class="s2">&quot;source /path/to/another_file&quot;</span><span class="p">],</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">job_1</span> <span class="o">&gt;&gt;</span> <span class="n">job_2</span>


<span class="n">run_job</span><span class="p">()</span>
</code></pre></div></td></tr></table></div></p>
<ul>
<li>Pros: simple, fast.</li>
<li>Cons: less portable, harder to reproduce if env drifts.</li>
</ul>
<hr />
<h3 id="python-deployment-docker-container"> Docker Container</h3>
<p>Best for services you want <strong>consistent across dev/prod</strong>. Much more robust.</p>
<ul>
<li>Write a Dockerfile:</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">FROM</span><span class="w"> </span><span class="s">python:3.12-slim</span>
<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/app</span>
<span class="k">COPY</span><span class="w"> </span>requirements.txt<span class="w"> </span>.
<span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
<span class="k">COPY</span><span class="w"> </span>..<span class="w"> </span>.
<span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;python&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;my_job.py&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<ul>
<li><strong>Deploy</strong>: <code>docker build -t my_job .</code> then <code>docker run my_job</code></li>
<li><strong>Schedule</strong>: cron on the host, or Kubernetes Job</li>
</ul>
<p>Pros: consistent, portable.
Cons: more setup overhead than bare venv.</p>
<h3 id="python-deployment-executable-file">Executable File</h3>
<p>You can also use pyinstaller (or other libraries that freeze your python code) to create an
executable file. This would be a good idea for a desktop app or something that a user chooses
to run on their own. </p>
<p>Pro: no need for user to have python installed on their computer, easy to distribute.</p>
<h2 id="python-deployment-docker-python-and-multiple-execution-points">Docker, Python, and Multiple Execution Points</h2>
<p>In most modern setups, if you have a Python package that contains multiple ETL jobs, 
the <strong>common pattern is to containerize the entire package</strong> and then deploy that image wherever you run jobs.</p>
<p>The differences are in <strong>how you execute the individual jobs</strong> inside that container and how you <strong>manage orchestration</strong>.</p>
<hr />
<h3 id="python-deployment-typical-pattern"><strong>Typical Pattern</strong></h3>
<ol>
<li>
<p><strong>Single container image</strong></p>
<ul>
<li>You build one Docker image for your Python package (with all dependencies baked in).</li>
<li>This image is versioned and pushed to a container registry (e.g., AWS ECR, GCP Artifact Registry, Docker Hub).</li>
<li>Keeps dependencies consistent across jobs.</li>
</ul>
</li>
<li>
<p><strong>Multiple entry points / commands</strong></p>
<ul>
<li>Each ETL job is exposed via a CLI entry point in your <code>pyproject.toml</code> or <code>setup.py</code></li>
</ul>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">[project.scripts]</span>
<span class="n">etl_job_a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;my_package.jobs.job_a:main&quot;</span>
<span class="n">etl_job_b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;my_package.jobs.job_b:main&quot;</span>
</code></pre></div></td></tr></table></div>
* At runtime, the orchestrator decides which command to run:</p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>my-etl-image:1.0<span class="w"> </span>etl_job_a
</code></pre></div></td></tr></table></div>
* This avoids rebuilding multiple images for each job.</p>
</li>
<li>
<p><strong>Orchestrator triggers containers</strong></p>
<ul>
<li><strong>Airflow</strong>, <strong>Prefect</strong>, <strong>Dagster</strong>, or Kubernetes <strong>CronJobs</strong> call the container with the appropriate arguments or entry point.</li>
<li>Example in Airflows <code>DockerOperator</code>:</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">DockerOperator</span><span class="p">(</span>
    <span class="n">task_id</span><span class="o">=</span><span class="s2">&quot;run_etl_job_a&quot;</span><span class="p">,</span>
    <span class="n">image</span><span class="o">=</span><span class="s2">&quot;my-etl-image:1.0&quot;</span><span class="p">,</span>
    <span class="n">command</span><span class="o">=</span><span class="s2">&quot;etl_job_a&quot;</span><span class="p">,</span>
    <span class="o">...</span>
<span class="p">)</span>
</code></pre></div></td></tr></table></div>
</li>
</ol>
<hr />
<h3 id="python-deployment-why-this-approach-works-well"><strong>Why This Approach Works Well</strong></h3>
<ul>
<li><strong>Reusability</strong>  One image can run all jobs, avoiding duplication.</li>
<li><strong>Consistency</strong>  All jobs share the same dependency versions and base environment.</li>
<li><strong>Smaller CI/CD surface</strong>  You only need to build and push one image per release.</li>
<li><strong>Version control</strong>  The image tag maps directly to your package release.</li>
</ul>
<hr />
<p> <strong>Rule of thumb:</strong>
If all ETL jobs share most dependencies and code, <strong>use one container image</strong> with multiple entry points.
If jobs have very different stacks or run in completely different runtime environments, <strong>split them into separate images</strong>.</p></section><section class="print-page" id="python-docs_6_publishing_project" heading-number="2.3.3"><h1 id="python-docs_6_publishing_project-publishing-a-project">Publishing a Project</h1>
<p>You can create your own python library and publish it to PyPI. First you'll need to create an account and download
your API keys. Once you have those established, you can create your project and then:</p>
<p>Super summary:</p>
<ol>
<li>Create the pyproject.toml file and fill out the fields </li>
<li>Build the project with <code>uv build</code></li>
<li>Publish the project to PyPI with <code>uv publish</code></li>
</ol>
<h2 id="python-docs_6_publishing_project-with-uv">With UV</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">[project]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;wws-api&quot;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.1.0&quot;</span>
<span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Simplifies the process for calling the Workday Web Services API asyncronously.&quot;</span>
<span class="n">readme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;README.md&quot;</span>
<span class="n">requires-python</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&gt;=3.11&quot;</span>
<span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">   </span><span class="s2">&quot;aiohttp&gt;=3.12.15&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="s2">&quot;lxml&gt;=6.0.0&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="s2">&quot;pyarrow&gt;=21.0.0&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="s2">&quot;xmltodict&gt;=0.14.2&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">[build-system]</span>
<span class="n">requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;uv_build&gt;=0.8.7,&lt;0.9.0&quot;</span><span class="p">]</span>
<span class="n">build-backend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;uv_build&quot;</span>

<span class="k">[tool.uv.build-backend]</span>
<span class="c1"># module name is the normalized project name (dash -&gt; underscore)</span>
<span class="n">module-name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;wws_api&quot;</span><span class="w">  </span><span class="c1"># folder to reference if src is not there</span>
<span class="c1"># module root &quot;&quot; = repo root (i.e., not using src/)</span>
<span class="n">module-root</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&quot;</span>

<span class="k">[project.scripts]</span>
<span class="c1"># optional: cli commands such as</span>
<span class="n">wws_api</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;wws_api.cli:main&#39;</span><span class="w"> </span><span class="c1"># folder.directory:function</span>

<span class="k">[[tool.uv.index]]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;testpypi&quot;</span>
<span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;https://test.pypi.org/simple/&quot;</span>
<span class="n">publish-url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;https://test.pypi.org/legacy/&quot;</span>
<span class="n">explicit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</code></pre></div></td></tr></table></div>
<p>Build wheel file with uv build system:
<code>uv build</code></p>
<p>Publish project to test PyPI
<code>uv publish --index testpypi --token &lt;api token&gt;</code></p>
<p>Publish project to production PyPI
<code>uv publish --token &lt;api token&gt;</code></p>
<p>Bump your project version automatically:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>uv<span class="w"> </span>version<span class="w"> </span>--bump<span class="w"> </span>major
uv<span class="w"> </span>version<span class="w"> </span>--bump<span class="w"> </span>minor
uv<span class="w"> </span>version<span class="w"> </span>--bump<span class="w"> </span>patch
</code></pre></div></td></tr></table></div></p>
<p>Script to do the full build:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>rm<span class="w"> </span>-rf<span class="w"> </span>dist/
uv<span class="w"> </span>version<span class="w"> </span>--bump<span class="w"> </span>minor
uv<span class="w"> </span>build
uv<span class="w"> </span>publish<span class="w"> </span>--token
</code></pre></div></td></tr></table></div></p>
<h2 id="python-docs_6_publishing_project-without-uv">Without UV</h2>
<p>More detailed steps:</p>
<ol>
<li>Make sure all of your files are created inside a folder structure</li>
<li>Create pyproject.toml
   <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">[build-system]</span><span class="w"> </span>
<span class="n">requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;setuptools&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;wheel&quot;</span><span class="p">]</span><span class="w"> </span>
<span class="n">build-backend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;setuptools.build_meta&quot;</span>

<span class="k">[project]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;example_package_YOUR_USERNAME_HERE&quot;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.0.1&quot;</span>
<span class="n">authors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="p">{</span><span class="w"> </span><span class="n">name</span><span class="p">=</span><span class="s2">&quot;Example Author&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="p">=</span><span class="s2">&quot;author@example.com&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="p">]</span>
<span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;A small example package&quot;</span>
<span class="n">readme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;README.md&quot;</span>
<span class="n">requires-python</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&gt;=3.8&quot;</span>
<span class="n">classifiers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="s2">&quot;Programming Language :: Python :: 3&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;License :: OSI Approved :: MIT License&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;Operating System :: OS Independent&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">[project.urls]</span>
<span class="n">Homepage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;https://github.com/pypa/sampleproject&quot;</span>
<span class="n">Issues</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;https://github.com/pypa/sampleproject/issues&quot;</span>
</code></pre></div></td></tr></table></div></li>
<li>Make sure all relevant build libs are installed:
   <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>pip install --upgrade build
pip install twine
</code></pre></div></td></tr></table></div></li>
<li>Run the build - <code>python -m build</code></li>
<li>Send to PyPI test - <code>twine upload --repository testpypi dist/*</code></li>
<li>Send to PyPI - <code>twine upload dist/*</code></li>
</ol>
<p>Make sure your build dependencies are not stored in your project dependencies.</p>
<p>Another TOML file might look like this:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">[build-system]</span>
<span class="n">requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;setuptools&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;wheel&quot;</span><span class="p">]</span>
<span class="n">build-backend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;setuptools.build_meta&quot;</span>

<span class="k">[project]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;py_simple_sharepoint&quot;</span><span class="w">  </span><span class="c1"># actual name that will get used for pip install.</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.1.1&quot;</span><span class="w">  </span><span class="c1"># anytime you submit an update to PyPI, you must change the version.</span>
<span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;A SharePoint file management tool for python programs.&quot;</span>
<span class="n">readme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;README.md&quot;</span>
<span class="n">requires-python</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&gt;=3.10&quot;</span>
<span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w">  </span><span class="c1"># package dependencies, does install when pip installed</span>
<span class="w">    </span><span class="s2">&quot;office365-rest-python-client&gt;=2.6.2&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">[project.optional-dependencies]</span><span class="w">  </span><span class="c1"># build dependencies (does not install when pip installed)</span>
<span class="n">dev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;build&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;twine&quot;</span>
<span class="p">]</span>
</code></pre></div></td></tr></table></div>
<p>https://packaging.python.org/en/latest/tutorials/packaging-projects/#creating-the-package-files</p>
<p>There are also new tools coming out such as poetry and uv. 
The community has started to heavily embrace <a href="https://astral.sh/blog/uv">UV</a> due to its speed and tooling.</p></section></section>
                    <section class='print-page md-section' id='section-2-4' heading-number='2.4'>
                        <h1>Other Tools<a class='headerlink' href='#section-2-4' title='Permanent link'></a>
                        </h1>
                    <section class="print-page" id="python-python_uv" heading-number="2.4.1"><h1 id="python-python_uv-uv-modern-python-packagingbuildpublisher">UV - Modern Python Packaging/Build/Publisher</h1>
<p>https://docs.astral.sh/uv/</p>
<p>uv is the future of python package management.</p>
<h2 id="python-python_uv-commands">Commands</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># start a new uv project in current dir</span>
uv<span class="w"> </span>init

<span class="c1"># setup your python venv to match your pyproject.toml file</span>
uv<span class="w"> </span>sync

<span class="c1"># install package and add it to pyproject.toml</span>
uv<span class="w"> </span>add<span class="w"> </span>requests

<span class="c1"># install package and add it to dev dependencies of pyproject.toml file</span>
uv<span class="w"> </span>add<span class="w"> </span>--dev<span class="w"> </span>requests<span class="w"> </span>
</code></pre></div></td></tr></table></div></section><section class="print-page" id="python-docs_8_documentation" heading-number="2.4.2"><h1 id="python-docs_8_documentation-documentation-tools">Documentation Tools</h1>
<h2 id="python-docs_8_documentation-sphinx">Sphinx</h2>
<h2 id="python-docs_8_documentation-mermaid">Mermaid</h2>
<h2 id="python-docs_8_documentation-mkdocs">MKDocs</h2>
<h1 id="python-docs_8_documentation-_1"></h1></section></section></section>
                    <section class='print-page md-section' id='section-3' heading-number='3'>
                        <h1>Git & GitHub<a class='headerlink' href='#section-3' title='Permanent link'></a>
                        </h1>
                    <section class="print-page" id="git-basics" heading-number="3.1"><h1 id="git-basics-git-basics">Git Basics</h1>
<p>Git is a code repository and version control system. It's great for tracking
changes to a code base (or any other text based files).</p>
<p>There are many tools that can help with basic git functions. The power really
comes from using it in the terminal.</p>
<h2 id="git-basics-common-commands">Common Commands</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># start a git project in working directory.</span>
git<span class="w"> </span>init

<span class="c1"># add a file to git.</span>
git<span class="w"> </span>add<span class="w"> </span>main.py

<span class="c1"># add all files in the directory to git.</span>
git<span class="w"> </span>add<span class="w"> </span>.

<span class="c1"># commit your changes.</span>
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Write a message here&quot;</span>

<span class="c1"># send your commited git changes to your active remote.</span>
git<span class="w"> </span>push

<span class="c1"># retrieve commited changes from remote that are not in your local repo.</span>
git<span class="w"> </span>pull

<span class="c1"># remove all uncommited changes (USE WITH CAUTION, NO RECOVERY OPTIONS)</span>
git<span class="w"> </span>reset<span class="w"> </span>--hard
</code></pre></div></td></tr></table></div>
<p>The location of the git files is a directory in the root directory of your project.
Its usually <code>.git</code>. This is a <strong>directory not a file</strong>. Remotes will have similar
naming like python_quickstart.git. </p>
<h2 id="git-basics-head">HEAD</h2>
<p>HEAD in git is a pointer to which branch and commit you are on. 
Typically, it is on the most recent commit of the selected branch.</p>
<h2 id="git-basics-navigate-old-commits">Navigate Old Commits</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>git<span class="w"> </span>checkout<span class="w"> </span>&lt;commit<span class="w"> </span>hash&gt;
git<span class="w"> </span>checkout<span class="w"> </span>HEAD~1<span class="w">     </span><span class="c1"># 1 commit before current HEAD</span>
git<span class="w"> </span>checkout<span class="w"> </span>HEAD~3<span class="w">     </span><span class="c1"># 3 commits before current HEAD</span>
</code></pre></div></td></tr></table></div>
<p>This puts you in a detached HEAD state which means any changes you make wont
be tracked on any branch, they will just float. </p>
<p>To safely work on an old commit:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>git<span class="w"> </span>checkout<span class="w"> </span>abc1234<span class="w">        </span><span class="c1"># Go to the commit</span>
git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>fix/legacy-bug<span class="w">   </span><span class="c1"># Create a branch from it</span>
</code></pre></div></td></tr></table></div></p>
<p>What if you want to rollback a commit?</p>
<p>If you haven't pushed to remote:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># undo commit but keep code changes.</span>
git<span class="w"> </span>reset<span class="w"> </span>--soft<span class="w"> </span>HEAD~1

<span class="c1"># completely remove the commit and rollback files to what the last commit was.</span>
git<span class="w"> </span>reset<span class="w"> </span>--hard<span class="w"> </span>HEAD~1<span class="w"> </span><span class="c1"># USE WITH CAUTION</span>
</code></pre></div></td></tr></table></div></p>
<p>To get back to head just checkout the branch:
<code>git checkout main</code></p></section><section class="print-page" id="git-remotes" heading-number="3.2"><h1 id="git-remotes-git-remotes">Git Remotes</h1>
<p>A "remote" in the git environment is another location to 
store a copy of your git project. It is great for backing up projects
and sharing code/collaboration.</p>
<p>GitHub is the most common remote but there are many other options.</p>
<h2 id="git-remotes-using-remotes">Using Remotes</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># To see all remotes that are in a project</span>
git<span class="w"> </span>remote<span class="w"> </span>-v

<span class="c1"># to push commited updates to remote</span>
git<span class="w"> </span>push
</code></pre></div></td></tr></table></div>
<p>You can setup multiple remotes on one git project.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code>git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>&lt;name<span class="w"> </span>of<span class="w"> </span>remote&gt;<span class="w"> </span>&lt;server<span class="w"> </span>uri&gt;

<span class="c1"># for example:</span>
git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>origin<span class="w"> </span>https://github.com/ty-anderson/python_quickstart.git
git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>backup<span class="w"> </span>ssh://user@yourserver:/srv/git/myproject.git

<span class="c1"># when pushing be explicit to which remote</span>
git<span class="w"> </span>push<span class="w"> </span>&lt;remote<span class="w"> </span>name&gt;<span class="w"> </span>&lt;branch&gt;
git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>main
git<span class="w"> </span>push<span class="w"> </span>backup<span class="w"> </span>master
</code></pre></div></td></tr></table></div>
<h2 id="git-remotes-self-hosted-git-server">Self Hosted Git Server</h2>
<p>If you want to store your git projects on your own server, its pretty simple.</p>
<p>Steps:</p>
<p>On your server:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>mkdir<span class="w"> </span>-p<span class="w"> </span>/srv/git/myproject.git
<span class="nb">cd</span><span class="w"> </span>/srv/git/myproject.git
git<span class="w"> </span>init<span class="w"> </span>--bare
</code></pre></div></td></tr></table></div></p>
<p>On your local machine:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>origin<span class="w"> </span>ssh://user@yourserver:/srv/git/myproject.git
git<span class="w"> </span>push<span class="w"> </span>-u<span class="w"> </span>origin<span class="w"> </span>main
<span class="c1"># origin is name of remote, change to whatever you want. </span>
<span class="c1"># main is name of branch, change to whatever branch you want to commit.</span>
<span class="c1"># the -u sets this remote as the active one for tracking. </span>
</code></pre></div></td></tr></table></div></p></section><section class="print-page" id="git-branches" heading-number="3.3"><h1 id="git-branches-branches">Branches</h1>
<p>A branch in git is a way to create different versions of your code and keep them
separated.</p>
<h2 id="git-branches-checkout">Checkout</h2>
<p>Checkout is for switching branches: <code>git checkout main</code></p>
<p>Checkout is also how you can create new branches:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>new_branch
<span class="c1"># this is shorthand for</span>
git<span class="w"> </span>branch<span class="w"> </span>new_branch
git<span class="w"> </span>checkout<span class="w"> </span>new_branch
</code></pre></div></td></tr></table></div></p>
<p>You can use checkout to do a lot more:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># pull a file from another branch</span>
git<span class="w"> </span>checkout<span class="w"> </span>main<span class="w"> </span>--<span class="w"> </span>README.md
</code></pre></div></td></tr></table></div></p>
<p>Below are some examples of some reasons to create a branch.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># create a new branch for a feature</span>
git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>feature/login-form

<span class="c1"># create a branch for a bug fix</span>
git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>fix/issue-123-crash

<span class="c1"># create a branch for experiments</span>
git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>experiment/redesign

<span class="c1"># separate production from development</span>
git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>production
git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>development
</code></pre></div></td></tr></table></div>
<h2 id="git-branches-example-workflow">Example Workflow</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># make new branch</span>
git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>test_branch

<span class="c1"># make change to file</span>

<span class="c1"># commit the change.</span>
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;update message&quot;</span>

<span class="c1"># (optional) push to remote</span>
git<span class="w"> </span>push
<span class="c1"># or</span>
git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>test_branch

<span class="c1"># switch back to main so we can merge the new branch</span>
git<span class="w"> </span>checkout<span class="w"> </span>main

<span class="c1"># make sure main is up-to-date</span>
git<span class="w"> </span>pull

<span class="c1"># merge the branch into main</span>
git<span class="w"> </span>merge<span class="w"> </span>test_branch

<span class="c1"># you can also delete the branch afterward if you do not expect to use it</span>
git<span class="w"> </span>branch<span class="w"> </span>-d<span class="w"> </span>test_branch

<span class="c1"># if it wasn&#39;t merged and you still want to delete</span>
git<span class="w"> </span>branch<span class="w"> </span>-D<span class="w"> </span>test_branch

<span class="c1"># (optional) clean up the remote</span>
git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>--delete<span class="w"> </span>test_branch
</code></pre></div></td></tr></table></div>
<p>Note: when you push to remote, you are only pushing the active branch.
If you want to push all from local to remote: <code>git push --all origin</code> BE CAREFUL WITH THIS.</p></section></section>
                    <section class='print-page md-section' id='section-4' heading-number='4'>
                        <h1>Docker<a class='headerlink' href='#section-4' title='Permanent link'></a>
                        </h1>
                    <section class="print-page" id="docker-intro" heading-number="4.1"><h1 id="docker-intro-intro-to-docker">Intro to Docker</h1>
<h2 id="docker-intro-general">General</h2>
<p>Docker creates and runs containers - software bundled to run on a minimal isolated linux OS on the host system.
Containers are great because they are typically very easy to install and even easier to uninstall.
Allows for reproducing environments, avoiding the "it runs on my machine" problem.
They can enhance security by isolating the host system from the system running the software.</p>
<h2 id="docker-intro-why-should-i-care-about-docker">Why should I care about Docker?</h2>
<ul>
<li>It is the modern way of running production programs.</li>
<li>Docker is what runs cloud services. For example, if we spin up a resource in Azure, it's probably running on Docker.</li>
<li>Fixes the issue of "it runs on my machine" for development (reproducible environment).</li>
<li>Containers are isolated from the host machine, which makes it more secure.</li>
</ul>
<p><strong>Docker is great for both development and production.</strong></p>
<h2 id="docker-intro-what-is-docker">What is Docker?</h2>
<p>Docker is a utility that hosts other programs in their own containers.</p>
<p>Think of a container like an ultra-light weight version of a virtual machine.</p>
<p>The difference between a VM and a container:
- VM's require allocating a chunk of a computer's hardware resources to its own kernel and OS.
- A container can share the kernel and user space.</p>
<p>Terms:</p>
<ul>
<li>Image: A copy of the software that is ready to run on docker.</li>
<li>Container: An instance of an image, specific to the image that has been setup to run. More simply,
  a container is an image running on your machine. Can be turned on or off, etc.</li>
</ul></section><section class="print-page" id="docker-basics" heading-number="4.2"><h1 id="docker-basics-common-commands">Common Commands</h1>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># When you find an image you want to use do</span>
docker<span class="w"> </span>pull<span class="w"> </span>&lt;image_name&gt;

<span class="c1"># To see images downloaded use</span>
docker<span class="w"> </span>images

<span class="c1"># see running containers</span>
docker<span class="w"> </span>ps

<span class="c1"># see all containers</span>
docker<span class="w"> </span>ps<span class="w"> </span>-a

<span class="c1"># run a new container.</span>
docker<span class="w"> </span>run<span class="w"> </span>image-name<span class="w"> </span>-d
<span class="c1"># -d means run in detached mode so when the terminal is closed, the container continues to run</span>

<span class="c1"># run existing container </span>
docker<span class="w"> </span>start<span class="w"> </span>container-name

<span class="c1"># stop docker container</span>
docker<span class="w"> </span>stop<span class="w"> </span>image-name

<span class="c1"># remove an image by name and tag</span>
docker<span class="w"> </span>rmi<span class="w"> </span>postgres:latest

<span class="c1"># remove a container by ID or name</span>
docker<span class="w"> </span>rm<span class="w"> </span>123456789abc
docker<span class="w"> </span>rm<span class="w"> </span>container_01

<span class="c1"># Docker containers are their own sort of OS. You can SSH into it.</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>&lt;container-name-or-id&gt;<span class="w"> </span>/bin/sh
<span class="c1"># /bin/sh is the terminal experience (shell in this case) you could do /bin/bash</span>

<span class="c1"># access container logs</span>
docker<span class="w"> </span>logs<span class="w"> </span>&lt;container<span class="w"> </span>name<span class="w"> </span>or<span class="w"> </span>id&gt;

<span class="c1"># continuously showing log output</span>
docker<span class="w"> </span>logs<span class="w"> </span>-f<span class="w"> </span>&lt;container-name-or-id&gt;
</code></pre></div></td></tr></table></div>
<h2 id="docker-basics-run-a-container-examples">Run a Container Examples</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># simplest docker image run</span>
docker<span class="w"> </span>run<span class="w"> </span>hello-world

<span class="c1"># run alpine linux (tiny image). sh lets you explore inside the container</span>
docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>alpine<span class="w"> </span>sh

<span class="c1"># Some containers need other info to run, which can be passed after the command</span>
<span class="c1"># --name is what the container will be named</span>
<span class="c1"># -p is for port mapping host computer port to image port (first is host, second is container)</span>
<span class="c1"># -e is for adding environment variables</span>
docker<span class="w"> </span>run<span class="w"> </span>--name<span class="w"> </span>postgres_db<span class="w"> </span>-e<span class="w"> </span><span class="nv">POSTGRES_PASSWORD</span><span class="o">=</span>postgres<span class="w"> </span>-p<span class="w"> </span><span class="m">5432</span>:5432<span class="w"> </span>-d<span class="w"> </span>postgres
</code></pre></div></td></tr></table></div>
<h2 id="docker-basics-connecting-resources-to-host">Connecting Resources to Host</h2>
<h3 id="docker-basics-docker-ports">Docker Ports</h3>
<p>Accessing endpoints from the host machine is typically done through ports. You can map the 
host machine port to the port that is being used in the docker container.</p>
<p><code>docker run -p 5432:5432 -d &lt;image_name&gt;</code></p>
<h3 id="docker-basics-docker-volumes">Docker Volumes</h3>
<p>Files and Docker
If you need to use files for anything involving docker, you need to configure volumes.</p>
<p>Volumes are a mapping of the docker container file system to the host file system.</p>
<p><code>-v /home/svr/immich:/usr/src/app/upload</code></p>
<p>Just like port mapping, the first is host and second is container.</p>
<h2 id="docker-basics-list-of-flags">List of Flags</h2>
<p>These are the ones youll use 90% of the time:</p>
<ul>
<li><code>-d</code>  Run in <strong>detached mode</strong> (in the background).</li>
<li><code>-it</code>  Interactive + TTY (keeps a terminal open).</li>
<li><code>--name &lt;name&gt;</code>  Give your container a name.</li>
<li><code>-p &lt;host:container&gt;</code>  Publish ports (e.g., <code>-p 8080:80</code>).</li>
<li><code>-e &lt;KEY=VALUE&gt;</code>  Set environment variables.</li>
<li><code>-v &lt;host:container&gt;</code>  Mount a volume (bind mount or Docker volume).</li>
<li><code>--rm</code>  Automatically remove the container when it exits.</li>
<li><code>--network &lt;network&gt;</code>  Connect to a specific network.</li>
<li><code>--restart &lt;policy&gt;</code>  Restart policy (<code>no</code>, <code>always</code>, <code>on-failure</code>, <code>unless-stopped</code>).</li>
<li><code>--cpus</code>, <code>--memory</code>  Limit CPU/memory usage.</li>
<li><code>--entrypoint &lt;command&gt;</code>  Override the default entrypoint.</li>
<li><code>--workdir &lt;dir&gt;</code>  Set working directory inside the container.</li>
<li><code>--user &lt;uid:gid&gt;</code>  Run as a different user.</li>
</ul>
<hr /></section><section class="print-page" id="docker-docker_compose" heading-number="4.3"><h1 id="docker-docker_compose-docker-compose">Docker Compose</h1>
<p>Docker compose is a handy way to run docker with configuration files.
This is nice when you have more complex containers to run, and its a difficult to type all the config
every time you want to run it.</p>
<p><em>Important step:</em> Make sure you have the latest version (currently V2).</p>
<p>Docker compose V1 was built on python, V2 is built in Go. If you run <code>which docker compose</code>
and it shows the path <code>/usr/bin/docker-compose</code> then you still have V1. Remove it
with <code>sudo rm /usr/bin/docker-compose</code>.</p>
<p>Create a <code>docker-compose.yaml</code> file. Here's an example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">services</span><span class="p">:</span><span class="w"> </span><span class="c1"># Defines the containers (services)</span>
<span class="w">  </span><span class="nt">app</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_flask_app:latest</span><span class="w">  </span><span class="c1"># Use an existing image</span>
<span class="w">    </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">..</span><span class="w">  </span><span class="c1"># Or build from Dockerfile in the current directory</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;5000:5000&quot;</span><span class="w">  </span><span class="c1"># Map host port 5000 to container port 5000</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./app:/app</span><span class="w">  </span><span class="c1"># Mount local folder to container folder</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FLASK_ENV=development</span><span class="w">  </span><span class="c1"># Set environment variables</span>
<span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">db</span><span class="w">  </span><span class="c1"># Wait for &quot;db&quot; service before starting</span>

<span class="w">  </span><span class="nt">db</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres:15</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">always</span><span class="w">  </span><span class="c1"># Restart if it crashes</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">POSTGRES_USER</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user</span>
<span class="w">      </span><span class="nt">POSTGRES_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">password</span>
<span class="w">      </span><span class="nt">POSTGRES_DB</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mydatabase</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pg_data:/var/lib/postgresql/data</span><span class="w">  </span><span class="c1"># Persistent storage for DB</span>

<span class="nt">volumes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">pg_data</span><span class="p">:</span><span class="w">  </span><span class="c1"># Named volume for PostgreSQL data</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># </span>
<span class="c1">#  DOCKER COMPOSE COMMAND REFERENCE</span>
<span class="c1"># </span>

<span class="c1">#  Run container (detached mode)</span>
docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d

<span class="c1">#  Stop and remove container(s)</span>
docker<span class="w"> </span>compose<span class="w"> </span>down

<span class="c1">#  Upgrade container(s)</span>
docker<span class="w"> </span>compose<span class="w"> </span>down
docker<span class="w"> </span>compose<span class="w"> </span>pull
docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d

<span class="c1">#  Restart container(s)</span>
docker<span class="w"> </span>compose<span class="w"> </span>restart

<span class="c1">#  Chain commands</span>
docker<span class="w"> </span>compose<span class="w"> </span>down<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d

<span class="c1"># </span>
<span class="c1">#  OTHER USEFUL COMMANDS</span>
<span class="c1"># </span>

<span class="c1"># View logs (follow mode)</span>
docker<span class="w"> </span>compose<span class="w"> </span>logs<span class="w"> </span>-f

<span class="c1"># View running containers</span>
docker<span class="w"> </span>compose<span class="w"> </span>ps

<span class="c1"># Rebuild image(s) from Dockerfile</span>
docker<span class="w"> </span>compose<span class="w"> </span>build

<span class="c1"># Rebuild and restart</span>
docker<span class="w"> </span>compose<span class="w"> </span>build<span class="w"> </span>--no-cache<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d

<span class="c1"># Stop containers but keep volumes/networks</span>
docker<span class="w"> </span>compose<span class="w"> </span>stop

<span class="c1"># Start containers again after stopping</span>
docker<span class="w"> </span>compose<span class="w"> </span>start

<span class="c1"># Remove unused images and volumes</span>
docker<span class="w"> </span>system<span class="w"> </span>prune<span class="w"> </span>-a<span class="w"> </span>--volumes
</code></pre></div></td></tr></table></div></section><section class="print-page" id="docker-docker_images" heading-number="4.4"><h1 id="docker-docker_images-build-a-docker-image">Build a Docker Image</h1>
<p>A <strong>Dockerfile</strong> is how to build an image. The contents might look something like this:</p>
<h2 id="docker-docker_images-build-dockerfile">Build Dockerfile</h2>
<p>Simple python app:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">FROM</span><span class="w"> </span><span class="s">python:3.12-slim</span>
<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/app</span>
<span class="k">COPY</span><span class="w"> </span>requirements.txt<span class="w"> </span>.
<span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
<span class="k">COPY</span><span class="w"> </span>.<span class="w"> </span>.
<span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;python&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;app.py&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div></p>
<p>Flask app (more complex):
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c"># Use a lightweight Python image</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">python:3.12-slim</span>

<span class="c"># Set the working directory inside the container</span>
<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/app</span>

<span class="c"># Copy app files to the container</span>
<span class="k">COPY</span><span class="w"> </span>.<span class="w"> </span>/app

<span class="c"># Install dependencies</span>
<span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--no-cache-dir<span class="w"> </span>-r<span class="w"> </span>requirements.txt

<span class="c"># Set environment variables</span>
<span class="k">ENV</span><span class="w"> </span><span class="nv">FLASK_ENV</span><span class="o">=</span>production
<span class="k">ENV</span><span class="w"> </span><span class="nv">PYTHONUNBUFFERED</span><span class="o">=</span><span class="m">1</span>

<span class="c"># Expose the port (optional if using Docker Compose)</span>
<span class="k">EXPOSE</span><span class="w"> </span><span class="s">8090</span>

<span class="c"># Run Gunicorn when the container starts</span>
<span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;gunicorn&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-w&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;4&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;0.0.0.0:8090&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;web_app.app:app&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div></p>
<h2 id="docker-docker_images-build-image">Build Image</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># build the image</span>
docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>my-image-name:tag<span class="w"> </span>.<span class="w">  </span><span class="c1"># &lt;- don&#39;t forget that period</span>

<span class="c1"># example 1</span>
docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>my-flask-app:latest<span class="w"> </span>.

<span class="c1"># example 2</span>
docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>my-flask-app:v1.0<span class="w"> </span>.

<span class="c1"># building on a Mac but will run on linux, specify to run on amd64.</span>
docker<span class="w"> </span>build<span class="w"> </span>--platform<span class="w"> </span>linux/amd64<span class="w"> </span>-t<span class="w"> </span>yt_download:latest<span class="w"> </span>.

<span class="c1"># once the image has been created:</span>
<span class="c1"># save image to a tar file for sharing/copying</span>
docker<span class="w"> </span>save<span class="w"> </span>-o<span class="w"> </span>/Users/tyleranderson/Downloads/yt_downloads_250226.tar<span class="w"> </span>yt_download:latest

<span class="c1"># load the file as an image</span>
docker<span class="w"> </span>load<span class="w"> </span>-i<span class="w"> </span>/srv/flask_yt_download/yt_downloads_250226.tar<span class="sb">`</span>
</code></pre></div></td></tr></table></div>
<h2 id="docker-docker_images-docker-compose-build-on-run">Docker Compose Build on Run</h2>
<p>When you use docker compose with an image, you have two options:</p>
<ol>
<li>Build the image on run.</li>
<li>Run from an existing image.</li>
</ol>
<p>Build image as part of docker compose start up.
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">flask_app</span><span class="p">:</span>
<span class="w">    </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.</span><span class="w">  </span><span class="c1"># This tells Compose to use the Dockerfile in the current directory</span>
<span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flask_gunicorn</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;8090:8090&quot;</span>
</code></pre></div></td></tr></table></div></p>
<p>Run when image already exists.
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">flask_app</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_flask_app</span><span class="w">  </span><span class="c1"># Use the existing built image</span>
<span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flask_gunicorn</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;8090:8090&quot;</span>
</code></pre></div></td></tr></table></div></p>
<h2 id="docker-docker_images-automating-build-and-deploy">Automating Build and Deploy</h2>
<p>There are many steps when it comes to building and deploying. They can all be automated in one script.
Here's an example:</p>
<p>Dockerfile
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c"># Use a lightweight Python image</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">python:3.12-slim</span>

<span class="c"># Set the working directory inside the container</span>
<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/app</span>

<span class="c"># Install system dependencies, including ffmpeg</span>
<span class="k">RUN</span><span class="w"> </span>apt-get<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>--no-install-recommends<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>ffmpeg<span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt-get<span class="w"> </span>clean<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/var/lib/apt/lists/*

<span class="k">RUN</span><span class="w"> </span>apt<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>curl

<span class="c"># Copy app files to the container</span>
<span class="k">COPY</span><span class="w"> </span>.<span class="w"> </span>/app

<span class="c"># Install dependencies</span>
<span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--no-cache-dir<span class="w"> </span>-r<span class="w"> </span>requirements.txt

<span class="c"># Set environment variables</span>
<span class="k">ENV</span><span class="w"> </span><span class="nv">FLASK_ENV</span><span class="o">=</span>production
<span class="k">ENV</span><span class="w"> </span><span class="nv">PYTHONUNBUFFERED</span><span class="o">=</span><span class="m">1</span>

<span class="c"># Expose the port (optional if using Docker Compose)</span>
<span class="k">EXPOSE</span><span class="w"> </span><span class="s">8090</span>

<span class="c"># Run Gunicorn when the container starts</span>
<span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;gunicorn&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-w&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;4&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;0.0.0.0:8090&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;app:app&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div></p>
<p>Deployment script
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="ch">#!/usr/bin/env bash</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Remove existing image to make a new one.&quot;</span>
docker<span class="w"> </span>rmi<span class="w"> </span>yt_download:latest

rm<span class="w"> </span>data.db<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;No db to remove, moving on&quot;</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Build image for Linux server.&quot;</span>
docker<span class="w"> </span>build<span class="w"> </span>--platform<span class="w"> </span>linux/amd64<span class="w"> </span>-t<span class="w"> </span>yt_download:latest<span class="w"> </span>.<span class="w">  </span><span class="c1"># uses Dockerfile to build</span>
docker<span class="w"> </span>save<span class="w"> </span>-o<span class="w"> </span>yt_download_image.tar<span class="w"> </span>yt_download:latest

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Transfer file to server.&quot;</span>
rsync<span class="w"> </span>-v<span class="w"> </span>--rsync-path<span class="o">=</span><span class="s2">&quot;sudo rsync&quot;</span><span class="w"> </span>yt_download_image.tar<span class="w"> </span>tyler@anderson.home:/srv/flask_yt_download

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Remove local copy of Docker image and docker image file.&quot;</span>
docker<span class="w"> </span>rmi<span class="w"> </span>yt_download:latest
rm<span class="w"> </span>yt_download_image.tar

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Log into server and spin up image.&quot;</span>
ssh<span class="w"> </span>tyler@anderson.home<span class="w"> </span><span class="s">&lt;&lt; &#39;EOF&#39;</span>
<span class="s">cd /srv/flask_yt_download || { echo &quot;Directory not found&quot;; exit 1; }</span>

<span class="s"># create database file</span>
<span class="s">sudo touch data.db</span>

<span class="s"># Spin down container if running</span>
<span class="s">sudo docker compose down || echo &quot;No container running&quot;</span>

<span class="s"># Remove old Docker image</span>
<span class="s">sudo docker rmi yt_download || echo &quot;Image not found&quot;</span>

<span class="s"># Load new image</span>
<span class="s">sudo docker load -i yt_download_image.tar</span>

<span class="s"># Remove the transferred image file</span>
<span class="s">sudo rm yt_download_image.tar</span>

<span class="s"># Restart the container</span>
<span class="s">sudo docker compose up -d</span>
<span class="s">EOF</span>
</code></pre></div></td></tr></table></div></p>
<h2 id="docker-docker_images-add-uv-to-image">Add uv to image</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c"># build a wheel file inside a docker image</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">python:3.13</span>
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>ghcr.io/astral-sh/uv:latest<span class="w"> </span>/uv<span class="w"> </span>/bin/uv
</code></pre></div></td></tr></table></div>
<h2 id="docker-docker_images-multi-stage-build">Multi-Stage build</h2>
<p>You can build an image in stages. 
It creates separate images during the build. 
The last one that runs becomes the actual image.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c"># Build stage</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">python:3.13</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="s">builder</span>
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>ghcr.io/astral-sh/uv:latest<span class="w"> </span>/uv<span class="w"> </span>/bin/uv
<span class="k">COPY</span><span class="w"> </span>.<span class="w"> </span>/src
<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/src</span>
<span class="k">RUN</span><span class="w"> </span>uv<span class="w"> </span>build

<span class="c"># Runtime stage</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">python:3.13-slim</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="s">runtime</span>
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>ghcr.io/astral-sh/uv:latest<span class="w"> </span>/uv<span class="w"> </span>/bin/uv
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>builder<span class="w"> </span>/src/dist/*.whl<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>rm<span class="w"> </span>/tmp/*.whl

<span class="k">RUN</span><span class="w"> </span>uv<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--system<span class="w"> </span>/tmp/*.whl<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>rm<span class="w"> </span>/tmp/*.whl

<span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;invoice_start&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;--sharepoint&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div></section></section>
                    <section class='print-page md-section' id='section-5' heading-number='5'>
                        <h1>Self Hosting<a class='headerlink' href='#section-5' title='Permanent link'></a>
                        </h1>
                    <section class="print-page" id="self_host-storage_vs_compute" heading-number="5.1"><h1 id="self_host-storage_vs_compute-general-architecture-storage-vs-compute">General Architecture - Storage vs Compute</h1>
<p>TLDR: Separate storage into a dedicated NAS and then use another server
for running programs on docker. Pull from and save to the NAS. A NAS should
not be used for compute processes.</p>
<hr />
<h2 id="self_host-storage_vs_compute-the-core-idea-separate-compute-from-storage"> The Core Idea: <strong>Separate Compute from Storage</strong></h2>
<blockquote>
<p> <strong>Compute = running apps, containers, AI detection, transcoding, etc.</strong>
 <strong>Storage = reliable, redundant data layer (your NAS).</strong></p>
</blockquote>
<p>When you keep these roles separate:</p>
<ul>
<li>Each system can specialize in what it does best.</li>
<li>You reduce the risk of data loss or performance issues.</li>
<li>Its far easier to scale or troubleshoot later.</li>
</ul>
<hr />
<h2 id="self_host-storage_vs_compute-why-its-best-to-keep-nas-dedicated"> Why Its Best to Keep NAS Dedicated</h2>
<h3 id="self_host-storage_vs_compute-1-nas-file-systems-zfs-btrfs-etc-are-tuned-for-data-integrity-not-app-workloads"> 1. <strong>NAS file systems (ZFS, Btrfs, etc.) are tuned for data integrity, not app workloads</strong></h3>
<p>They protect your data through:</p>
<ul>
<li>checksums</li>
<li>scrubbing</li>
<li>snapshots</li>
<li>RAID/parity</li>
</ul>
<p>Running constant compute (e.g., Frigate writing video, or Immich generating thumbnails) can interfere with these optimizations and make rebuilds or snapshots slower.</p>
<hr />
<h3 id="self_host-storage_vs_compute-2-cpu-and-memory-resources-get-shared"> 2. <strong>CPU and memory resources get shared</strong></h3>
<p>NAS tasks like ZFS compression, parity calculations, and indexing already use a fair bit of CPU/RAM.
If you also run:</p>
<ul>
<li>Frigate (AI inference + decoding)</li>
<li>Immich (image processing + face recognition)</li>
<li>or Jellyfin (video transcoding)</li>
</ul>
<p>then your NASs primary job  protecting and serving data  might get delayed or throttled.</p>
<hr />
<h3 id="self_host-storage_vs_compute-3-stability-and-safety"> 3. <strong>Stability and safety</strong></h3>
<p>If one container crashes, hangs, or fills the filesystem, it can:</p>
<ul>
<li>Interrupt the NASs storage pools</li>
<li>Corrupt running writes</li>
<li>Even cause pool degradation if disks get overloaded</li>
</ul>
<p>Keeping your NAS clean isolates your data from application risk.</p>
<hr />
<h2 id="self_host-storage_vs_compute-the-professional-model-and-the-smart-home-lab-model"> The Professional Model (and the Smart Home-Lab Model)</h2>
<table>
<thead>
<tr>
<th>Layer</th>
<th>Purpose</th>
<th>Examples</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Compute Layer</strong></td>
<td>Run containers, AI, video processing</td>
<td>Frigate, Immich, Home Assistant, Plex</td>
</tr>
<tr>
<td><strong>Storage Layer (NAS)</strong></td>
<td>Serve and protect data</td>
<td>TrueNAS, Unraid, Synology, ZFS pool</td>
</tr>
<tr>
<td><strong>Network Layer</strong></td>
<td>Link them via fast Ethernet</td>
<td>1 Gb or 2.5 Gb+ LAN, NFS or SMB shares</td>
</tr>
</tbody>
</table>
<p>Theyre connected by the network  the NAS exports shared folders, and the compute node mounts them.</p>
<hr />
<h3 id="self_host-storage_vs_compute-typical-setup-example"> Typical Setup Example</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code>        
          Cameras / Clients 
        
                 
            
             Frigate     Compute (Docker, GPU)
             Immich  
             Plex    
            
                   (NFS/SMB)
        
              NAS           Storage (ZFS/RAID, backups)
          TrueNAS / RAID 
        
</code></pre></div></td></tr></table></div>
<hr />
<h2 id="self_host-storage_vs_compute-when-you-can-combine-them"> When You <em>Can</em> Combine Them</h2>
<p>Its perfectly fine to run extra apps <em>on your NAS</em> if:</p>
<ul>
<li>Its powerful (e.g., Xeon/i7 CPU, 32 GB+ RAM)</li>
<li>Youre okay with minor slowdowns</li>
<li>The apps arent CPU-intensive (e.g., photo viewer, simple sync service)</li>
</ul>
<p>For example:</p>
<ul>
<li>Synology users often run Docker containers on the NAS directly (for convenience).</li>
<li>Unraid and TrueNAS SCALE support running VMs or containers safely alongside storage  but it still shares the same hardware, so performance depends on your use case.</li>
</ul>
<hr />
<h2 id="self_host-storage_vs_compute-in-short"> In short</h2>
<blockquote>
<p>For <strong>maximum reliability and scalability</strong>, yes  its best to have:</p>
<ul>
<li> <strong>One machine dedicated to compute</strong> (Frigate, Immich, Plex, etc.)</li>
<li> <strong>One machine dedicated to storage</strong> (your NAS)</li>
</ul>
</blockquote>
<p>This mirrors how <strong>enterprise datacenters</strong> and <strong>well-designed homelabs</strong> are built  storage servers feed compute servers.</p>
<hr />
<p>Would you like me to show what a <strong>recommended 2-node home setup</strong> looks like (with network speeds, mount types, and backup flow)? Its a great visual for planning how to physically wire and configure it.</p></section><section class="print-page" id="ai-docs_105_local_llm" heading-number="5.2"><h1 id="ai-docs_105_local_llm-ollama">Ollama</h1>
<p>Ollama is an open-source LLM runtime environment.</p>
<h2 id="ai-docs_105_local_llm-run-with-docker-compose">Run with Docker Compose</h2>
<p>Here is a docker compose that runs it all. 
Save this to a file called <code>docker-compose.yaml</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ollama</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ollama/ollama:latest</span>
<span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ollama</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;11434:11434&quot;</span><span class="w">   </span><span class="c1"># Ollama API exposed</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ollama_data:/root/.ollama</span><span class="w">  </span><span class="c1"># Persist models</span>

<span class="w">  </span><span class="nt">open-webui</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ghcr.io/open-webui/open-webui:main</span>
<span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">open-webui</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;3000:8080&quot;</span><span class="w">   </span><span class="c1"># WebUI runs here</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">OLLAMA_API_BASE_URL=http://ollama:11434</span>
<span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ollama</span>

<span class="nt">volumes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ollama_data</span><span class="p">:</span>
</code></pre></div></td></tr></table></div>
<p>Run the docker compose file with <code>docker compose up -d</code>.</p>
<h2 id="ai-docs_105_local_llm-access-via-webui">Access via WebUI</h2>
<p>You can go to <a href="https://localhost:3000">https://localhost:3000</a> to use the web ui.</p>
<h2 id="ai-docs_105_local_llm-api-call">API Call</h2>
<h3 id="ai-docs_105_local_llm-raw-api-call">Raw API Call</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="err">### Generate text with llama3</span>
<span class="err">POST http://localhost:11434/api/generate</span>
<span class="err">Content-Type: application/json</span>

<span class="err">{</span>
<span class="err">  &quot;model&quot;: &quot;llama3&quot;,</span>
<span class="err">  &quot;prompt&quot;: &quot;Write a haiku about data pipelines&quot;</span>
<span class="err">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="ai-docs_105_local_llm-python-api-call">Python API Call</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>


<span class="k">def</span><span class="w"> </span><span class="nf">ask_ai</span><span class="p">(</span><span class="n">prompt</span><span class="p">):</span>
<span class="w">   </span><span class="sd">&quot;&quot;&quot;Ask local AI model a question and get a streaming response.&quot;&quot;&quot;</span>
   <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;http://localhost:11434/api/generate&quot;</span>
   <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
       <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;llama3&quot;</span><span class="p">,</span>
       <span class="s2">&quot;prompt&quot;</span><span class="p">:</span> <span class="n">prompt</span>
   <span class="p">}</span>
   <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">}</span>
   <span class="k">return</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">ask_ai</span><span class="p">(</span><span class="s2">&quot;What is the number pi?&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">iter_lines</span><span class="p">():</span>
   <span class="k">if</span> <span class="n">line</span><span class="p">:</span>
       <span class="n">decoded_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>
       <span class="nb">print</span><span class="p">(</span><span class="n">decoded_json</span><span class="p">[</span><span class="s1">&#39;response&#39;</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h2 id="ai-docs_105_local_llm-download-other-models">Download Other Models</h2>
<p>Available models can be found here:
https://registry.ollama.ai/search</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="err">POST http://localhost:11434/api/pull</span>
<span class="err">Content-Type: application/json</span>

<span class="err">{</span>
<span class="err">  &quot;name&quot;: &quot;mistral&quot;</span>
<span class="err">}</span>
</code></pre></div></td></tr></table></div>
<p>or download a model with the docker command: 
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># download mistral model</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>ollama<span class="w"> </span>ollama<span class="w"> </span>pull<span class="w"> </span>mistral

<span class="c1"># download llama3 model</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>ollama<span class="w"> </span>ollama<span class="w"> </span>pull<span class="w"> </span>llama3
</code></pre></div></td></tr></table></div></p>
<p>For more info on the REST API definition: https://github.com/ollama/ollama/blob/main/docs/api.md</p></section><section class="print-page" id="self_host-samba" heading-number="5.3"><h1 id="self_host-samba-shared-file-server">Shared File Server</h1>
<p>Samba is an open source file server. You can host a network drive
to share files across different computers.</p>
<p>You can dictate account creations, read/write access. You can create
multiple shared folders and assign access to each. This means you
could have a share one for people to maybe download photos from
but keep a private one for your own files you don't want to share.</p>
<p><strong>Warning:</strong> There are several different versions of samba, some are older 
and have bugs. The version below is current as of 2025-10-24.</p>
<p>Here is a good config. It does the following:</p>
<ul>
<li>Uses .env file for user creds.</li>
<li>Mounts several different directories for managing public/private access.</li>
<li>Allows a guest to view files without any creds.</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">samba</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ghcr.io/servercontainers/samba:latest</span>
<span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">samba</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>

<span class="w">    </span><span class="c1"># --- SMB port ---</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;445:445&quot;</span><span class="w">            </span><span class="c1"># SMB direct (modern clients only)</span>

<span class="w">    </span><span class="c1"># --- Host folders mapped into container ---</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/srv/plex_media:/mount/media</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/srv/samba_file_share/shared_private:/mount/shared_private</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/srv/samba_file_share/shared_public:/mount/shared_public</span>

<span class="w">    </span><span class="c1"># --- User and share definitions ---</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># --- Create the admin account ---</span>
<span class="w">      </span><span class="nt">ACCOUNT_tyler</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${ADMIN_PASS}&quot;</span><span class="w">     </span><span class="c1"># user=tyler, password from .env or defaults to &#39;changeme&#39;</span>
<span class="w">      </span><span class="nt">UID_tyler</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000</span><span class="w">                              </span><span class="c1"># match your host user ID if you like</span>

<span class="w">      </span><span class="c1"># --- MEDIA share (authenticated only) ---</span>
<span class="w">      </span><span class="nt">SAMBA_VOLUME_CONFIG_Media</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">        </span><span class="no">[Media];</span>
<span class="w">        </span><span class="no">path = /mount/media;</span>
<span class="w">        </span><span class="no">read only = no;</span>
<span class="w">        </span><span class="no">browsable = yes;</span>
<span class="w">        </span><span class="no">guest ok = no;</span>
<span class="w">        </span><span class="no">valid users = tyler;</span>
<span class="w">        </span><span class="no">create mask = 0666;</span>
<span class="w">        </span><span class="no">directory mask = 0777</span>

<span class="w">      </span><span class="c1"># --- PRIVATE share (authenticated only) ---</span>
<span class="w">      </span><span class="nt">SAMBA_VOLUME_CONFIG_Private</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">        </span><span class="no">[Private];</span>
<span class="w">        </span><span class="no">path = /mount/shared_private;</span>
<span class="w">        </span><span class="no">read only = no;</span>
<span class="w">        </span><span class="no">browsable = yes;</span>
<span class="w">        </span><span class="no">guest ok = no;</span>
<span class="w">        </span><span class="no">valid users = tyler;</span>
<span class="w">        </span><span class="no">create mask = 0666;</span>
<span class="w">        </span><span class="no">directory mask = 0777</span>

<span class="w">      </span><span class="c1"># --- PUBLIC share (guest access allowed) ---</span>
<span class="w">      </span><span class="nt">SAMBA_VOLUME_CONFIG_Public</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">        </span><span class="no">[Public];</span>
<span class="w">        </span><span class="no">path = /mount/shared_public;</span>
<span class="w">        </span><span class="no">read only = no;</span>
<span class="w">        </span><span class="no">browsable = yes;</span>
<span class="w">        </span><span class="no">guest ok = yes;</span>
<span class="w">        </span><span class="no">public = yes;</span>
<span class="w">        </span><span class="no">available = yes;</span>
<span class="w">        </span><span class="no">create mask = 0666;</span>
<span class="w">        </span><span class="no">directory mask = 0777</span>

<span class="w">    </span><span class="c1"># Optional logging/diagnostics</span>
<span class="w">    </span><span class="nt">logging</span><span class="p">:</span>
<span class="w">      </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;json-file&quot;</span>
<span class="w">      </span><span class="nt">options</span><span class="p">:</span>
<span class="w">        </span><span class="nt">max-size</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10m&quot;</span>
<span class="w">        </span><span class="nt">max-file</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
</code></pre></div></td></tr></table></div>
<h2 id="self_host-samba-connect-other-computers">Connect Other Computers</h2>
<p>There are two methods of connecting to a samba shared drive.</p>
<ol>
<li>Session based (temporary logged).</li>
<li>Auto mount (stays logged in).</li>
</ol>
<p>To connect your other computers to the shared drive.</p>
<h3 id="self_host-samba-mac">Mac</h3>
<p><strong>Temporary login:</strong></p>
<ul>
<li>In Finder, select Go from the drop down menu.</li>
<li>Select "Connect to a Server".</li>
<li>Enter the SMB path like <code>smb://&lt;server-ip&gt;/Media</code> or <code>smb://&lt;server-ip&gt;/Private</code></li>
<li>Click "Connect".</li>
<li>Enter credentials.</li>
</ul>
<p><strong>Full auto-mount login:</strong></p>
<p>If you prefer the graphical route:</p>
<ul>
<li>Mount the shares once manually in Finder ( + K  connect)</li>
<li>Open System Settings  Users &amp; Groups  Login Items</li>
<li>Under Open at Login, click +</li>
<li>Select your mounted share(s)</li>
</ul>
<p>Theyll automatically connect when you log in.</p>
<h3 id="self_host-samba-windows">Windows</h3>
<ul>
<li>Open File Explorer</li>
<li>Right-click <strong>This PC</strong>  <strong>Map network drive</strong></li>
<li>Assign a drive letter. Choose a letter (for example <code>M:</code> for Media, <code>P:</code> for Private).</li>
<li>Enter the network path For example:</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>\\192.168.1.50\Media
</code></pre></div></td></tr></table></div>
<p>or</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>\\192.168.1.50\Private
</code></pre></div></td></tr></table></div>
<ul>
<li>Authentication</li>
<li>For the <strong>Media</strong> share: check Connect using different credentials and log in as <strong>guest</strong> (no password).</li>
<li>For the <strong>Private</strong> share: log in as <code>tyler</code> with your Samba password.</li>
<li>Check <strong>Reconnect at sign-in</strong>  Windows will mount these every time you log in.</li>
</ul></section><section class="print-page" id="self_host-syncthing" heading-number="5.4"><h1 id="self_host-syncthing-syncthing">Syncthing</h1>
<p>syncthing - Realtime file sync between your devices. 
Creates its own files on each device and syncs changes between all devices. 
It is direct peer-to-peer file sync, meaning there is no server hosting 
the files and copying between devices. </p>
<p>Whats the difference between samba and syncthing?</p>
<p><strong>TLDR:</strong> Samba keeps a central place for files, and you need internet access. 
Syncthing stores copies of the files on each device and you can use them offline.</p>
<h3 id="self_host-syncthing-samba-or-smb-file-sharing"> <strong>Samba (or SMB file sharing)</strong></h3>
<ul>
<li>Acts like a <strong>network drive</strong> or shared folder.</li>
<li>Files <strong>live in one place</strong> (usually on your server).</li>
<li>Other devices access them over the network.</li>
<li>When you open or edit a file, its being read/written <strong>directly on the server</strong>.</li>
<li>If youre <strong>offline</strong> or disconnected from the network, you cant access the files.</li>
<li>Great for: centralized storage, multi-user access, shared drives.</li>
</ul>
<p> <em>Analogy:</em> Like a shared filing cabinet  everyone opens the same drawer to get files.</p>
<hr />
<h3 id="self_host-syncthing-syncthing_1"> <strong>Syncthing</strong></h3>
<ul>
<li>Each device has its <strong>own local copy</strong> of the files.</li>
<li>Changes on one device automatically <strong>sync</strong> to all others.</li>
<li>You can work <strong>offline</strong>  edits will sync once devices reconnect.</li>
<li>Works over local network or internet, with encryption.</li>
<li>Great for: personal sync, backups, or distributed teams that need offline access.</li>
</ul>
<p> <em>Analogy:</em> Everyone has a copy of the same binder  when someone updates a page, everyone elses binder updates too.</p>
<hr />
<h3 id="self_host-syncthing-summary-comparison"> Summary comparison</h3>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Samba</th>
<th>Syncthing</th>
</tr>
</thead>
<tbody>
<tr>
<td>File location</td>
<td>Central server</td>
<td>Each device has a copy</td>
</tr>
<tr>
<td>Offline access</td>
<td> No</td>
<td> Yes</td>
</tr>
<tr>
<td>Sync direction</td>
<td>None (live access only)</td>
<td>Two-way sync</td>
</tr>
<tr>
<td>Network needed</td>
<td>Local (LAN)</td>
<td>LAN or Internet (peer-to-peer)</td>
</tr>
<tr>
<td>Use case</td>
<td>Shared drive</td>
<td>File replication / personal sync</td>
</tr>
<tr>
<td>Security</td>
<td>LAN authentication</td>
<td>End-to-end encryption</td>
</tr>
<tr>
<td>Storage usage</td>
<td>One copy on server</td>
<td>Multiple copies across devices</td>
</tr>
</tbody>
</table>
<hr />
<ul>
<li><strong>Samba</strong> = one shared live copy (best for collaboration on a central server).</li>
<li><strong>Syncthing</strong> = synced local copies (best for redundancy and offline access).</li>
</ul>
<p>To use:</p>
<p>Install on each device you want to use it with: https://syncthing.net/</p></section><section class="print-page" id="self_host-video_streaming" heading-number="5.5"><h1 id="self_host-video_streaming-video-streaming-service">Video Streaming Service</h1>
<h2 id="self_host-video_streaming-jellyfin">Jellyfin</h2>
<p>Docker compose file:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">jellyfin</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jellyfin/jellyfin</span>
<span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jellyfin</span>
<span class="w">    </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000:1000&quot;</span>
<span class="w">    </span><span class="nt">network_mode</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;host&#39;</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/srv/jellyfin/config:/config</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/srv/jellyfin/cache:/cache</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bind</span>
<span class="w">        </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/srv/plex_media</span>
<span class="w">        </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/plex_media</span>
<span class="w">        </span><span class="nt">read_only</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;unless-stopped&#39;</span>
<span class="w">    </span><span class="c1"># Optional - alternative address used for autodiscovery</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">JELLYFIN_PublishedServerUrl=https://jelly.healthfin.solutions</span>
</code></pre></div></td></tr></table></div></p>
<p>Some notes: Jellyfin requires a valid domain to be used if you want to cast to Chromecast. 
This is because Chromecast's require a valid certificate to stream from. To avoid this
you would have to install your self signed certificate onto your casting device.</p>
<p>Steps:</p>
<ol>
<li>Host jellyfin</li>
<li>Setup Caddy to be a reverse proxy from your domain to the jellyfin IP.</li>
<li>Caddy will automatically issue a valid certificate for this allowing you to stream.</li>
</ol>
<h2 id="self_host-video_streaming-plex">Plex</h2>
<p>Docker compose file:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">plex</span><span class="p">:</span>
<span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">plex</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">linuxserver/plex</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PUID=1000</span><span class="w">           </span><span class="c1"># Replace with your user ID</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PGID=1000</span><span class="w">           </span><span class="c1"># Replace with your group ID</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VERSION=docker</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PLEX_CLAIM=claim-fzdegAmx-S6iP68ysfp2</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/srv/plex_media:/media</span><span class="w">    </span><span class="c1"># Your media files</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/srv/plex/config:/config</span><span class="w">   </span><span class="c1"># Plex configuration files</span>
<span class="w">    </span><span class="nt">network_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">host</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>
</code></pre></div></td></tr></table></div>
<p>Plex does a lot of the certificate management stuff for you. You can connect
your server to the Plex system to stream, but its not quite a true self hosted
solution. After you setup your plex server you must go to Plex.com and sign up
then add your server to your account under their domain. You still end up
relying on their system. It does come with a lot of other free content through
Plex which is a benefit.</p>
<h2 id="self_host-video_streaming-notes">Notes</h2>
<p>Note that both of these require some kind of external internet to work. If you
want to truely isolated setup that will work if the internet as a whole
goes down, you will need streaming devices on your TV that can install the Jellyfin
client app. </p>
<p>These include:</p>
<ul>
<li>NVIDIA Shield TV (best all-around).</li>
<li>Cheap Android TV box (Amlogic, etc.) sideloaded with Jellyfin app.</li>
<li>Intel NUC, Raspberry Pi, or old mini PC hooked up via HDMI and running Linux + Jellyfin Desktop/Browser.</li>
</ul></section><section class="print-page" id="self_host-frigate" heading-number="5.6"><h1 id="self_host-frigate-frigate">Frigate</h1>
<p>Open source video security feed.</p>
<p>There are several ways to handle streams. Different protocols exist to 
handle this.</p>
<ul>
<li>RTSP - Realtime streaming protocol</li>
<li>RTMP - not as common</li>
<li>HTTP/MJPEG - video over HTTP, slower.</li>
</ul>
<p>If a camera can expose a URI to connect to, then Frigate can probably connect.
It uses ffmpeg under the hood. Here's an example of how you can try to see if
a camera is working over a stream:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># ffplay is a ffmpeg module</span>
ffplay<span class="w"> </span>rtsp://user:password@CAMERA_IP:554/stream_path

<span class="c1"># basic view stream over http if no auth required</span>
ffplay<span class="w"> </span>http://192.168.1.205:8081/video

<span class="c1"># connect with username and password</span>
ffplay<span class="w"> </span>http://admin:admin@192.168.1.205:8081/video

<span class="c1"># use rtsp</span>
ffplay<span class="w"> </span>rtsp://user:password@192.168.1.50:554/stream1
</code></pre></div></td></tr></table></div>
<h2 id="self_host-frigate-docker-compose-setup">Docker Compose Setup</h2>
<p>Lets setup Frigate.</p>
<p>Create the directory:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>mkdir<span class="w"> </span>/srv/frigate
mkdir<span class="w"> </span>/srv/frigate/config
touch<span class="w"> </span>/srv/frigate/config/config.yaml
touch<span class="w"> </span>/srv/frigate/docker-compose.yaml
</code></pre></div></td></tr></table></div>
<p>Docker Compose file:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">frigate</span><span class="p">:</span>
<span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">frigate</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ghcr.io/blakeblackshear/frigate:stable</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>
<span class="w">    </span><span class="nt">privileged</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">shm_size</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;64mb&quot;</span><span class="w">  </span><span class="c1"># needed for ffmpeg buffer</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;5000:5000&quot;</span><span class="w">    </span><span class="c1"># Web UI</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;1935:1935&quot;</span><span class="w">    </span><span class="c1"># RTMP streaming (optional)</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FRIGATE_RTSP_PASSWORD=KineWind88</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NVIDIA_VISIBLE_DEVICES=all</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/localtime:/etc/localtime:ro</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./config:/config</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./media:/media/frigate</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tmpfs</span>
<span class="w">        </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/tmp/cache</span>
<span class="w">        </span><span class="nt">tmpfs</span><span class="p">:</span>
<span class="w">          </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000000000</span>
<span class="w">    </span><span class="nt">runtime</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvidia</span><span class="w">  </span><span class="c1"># enable gpu acceleration with nvidia gpu</span>
</code></pre></div></td></tr></table></div></p>
<p>Once the docker compose is working, the config file is how you add 
cameras and adjust settings.</p>
<p>config.yaml
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">mqtt</span><span class="p">:</span>
<span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>

<span class="nt">cameras</span><span class="p">:</span>
<span class="w">  </span><span class="nt">iphone_camera</span><span class="p">:</span>
<span class="w">    </span><span class="nt">ffmpeg</span><span class="p">:</span>
<span class="w">      </span><span class="nt">hwaccel_args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">      </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://username:password@192.168.1.205:8081/video</span>
<span class="w">          </span><span class="nt">input_args</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-avoid_negative_ts make_zero -fflags nobuffer -flags low_delay -analyzeduration 1000000 -probesize 1000000 -rw_timeout 5000000 -use_wallclock_as_timestamps 1</span>
<span class="w">          </span><span class="nt">roles</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">detect</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">record</span>
<span class="w">    </span><span class="nt">detect</span><span class="p">:</span>
<span class="w">      </span><span class="nt">width</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1280</span>
<span class="w">      </span><span class="nt">height</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">720</span>
<span class="w">      </span><span class="nt">fps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>

<span class="w">    </span><span class="nt">record</span><span class="p">:</span>
<span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">retain</span><span class="p">:</span>
<span class="w">        </span><span class="nt">days</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">motion</span>
<span class="w">      </span><span class="nt">events</span><span class="p">:</span>
<span class="w">        </span><span class="nt">pre_capture</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span><span class="w">   </span><span class="c1"># seconds before motion</span>
<span class="w">        </span><span class="nt">post_capture</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span><span class="w">  </span><span class="c1"># seconds after motion</span>

<span class="w">    </span><span class="nt">snapshots</span><span class="p">:</span>
<span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">timestamp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">bounding_box</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">retain</span><span class="p">:</span>
<span class="w">        </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w">     </span><span class="c1"># keep snapshots for 2 days</span>
</code></pre></div></td></tr></table></div></p>
<p>This config is used for testing an http stream with an iphone running 
ip camera lite. The additional input args are used to turn off gpu 
accleration since its not supported by http protocol.</p>
<p>Here is a config that uses RTSP instead of HTTP. This is
preferred if the camera supports it.</p>
<p>config.yaml with RTSP:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">mqtt</span><span class="p">:</span>
<span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>

<span class="nt">cameras</span><span class="p">:</span>
<span class="w">  </span><span class="nt">iphone_camera</span><span class="p">:</span>
<span class="w">    </span><span class="nt">ffmpeg</span><span class="p">:</span>
<span class="w">      </span><span class="nt">hwaccel_args</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">preset-nvidia-h264</span>
<span class="w">      </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rtsp://admin:admin@192.168.1.205:8554/live</span>
<span class="w">          </span><span class="nt">input_args</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">preset-rtsp-restream</span>
<span class="w">          </span><span class="nt">roles</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">detect</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">record</span>

<span class="w">    </span><span class="nt">detect</span><span class="p">:</span>
<span class="w">      </span><span class="nt">width</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1280</span>
<span class="w">      </span><span class="nt">height</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">720</span>
<span class="w">      </span><span class="nt">fps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>

<span class="w">    </span><span class="nt">record</span><span class="p">:</span>
<span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">retain</span><span class="p">:</span>
<span class="w">        </span><span class="nt">days</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">motion</span>
<span class="w">      </span><span class="nt">events</span><span class="p">:</span>
<span class="w">        </span><span class="nt">pre_capture</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span><span class="w">   </span><span class="c1"># seconds before motion</span>
<span class="w">        </span><span class="nt">post_capture</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span><span class="w">  </span><span class="c1"># seconds after motion</span>

<span class="w">    </span><span class="nt">snapshots</span><span class="p">:</span>
<span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">timestamp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">bounding_box</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">retain</span><span class="p">:</span>
<span class="w">        </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w">     </span><span class="c1"># keep snapshots for 2 days</span>
</code></pre></div></td></tr></table></div></p></section><section class="print-page" id="self_host-web_server" heading-number="5.7"><h1 id="self_host-web_server-web-servers">Web Servers</h1>
<p>A web server is a server that serves data over the HTTP/HTTPS protocols.
Typically it is HTML, JSON, XML, or some other type of data. </p>
<h2 id="self_host-web_server-reverse-proxy">Reverse Proxy</h2>
<p>A reverse proxy is a process that will reroute network traffic that flows
through the HTTP/HTTPS protocols, to other machines, using IP addresses.
One example is if you setup a proxy server to take any networks requests
to the public ip address A, it will take those requests and push them to
the machine with local ip address B.</p>
<p>Think of it like a concierge for your website. You have a website welcome.com.
When someone goes to welcome.com, the public DNS will use that name to go to
the public IP you configured, and then when the traffic reaches your server,
your concierge takes them to the correct room (machine).</p>
<h2 id="self_host-web_server-caddy">Caddy</h2>
<p>Caddy is a very easy web server/reverse proxy. It handles certificate creation
automatically which is super helpful. It also can be used to distribute traffic
for load balancing, serve static web files, handle simple auth, and more.</p>
<p>The way you setup caddy is with docker compose:</p>
<h2 id="self_host-web_server-docker-compose">Docker Compose</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">caddy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">caddy:latest</span>
<span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">caddy</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;80:80&quot;</span><span class="w">        </span><span class="c1"># HTTP</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;443:443&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;8009:8009&quot;</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./Caddyfile:/etc/caddy/Caddyfile</span><span class="w">   </span><span class="c1"># Mount your Caddyfile</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./data:/data</span><span class="w">                       </span><span class="c1"># Lets Encrypt certificates</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./config:/config</span><span class="w">                   </span><span class="c1"># Caddy configuration</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/srv/web_apps:/srv/web_apps</span><span class="w">        </span><span class="c1"># custom directory I want caddy to have access to for static web pages</span>
<span class="w">    </span><span class="nt">dns</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.1.1.1</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8.8.8.8</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>
</code></pre></div></td></tr></table></div>
<h2 id="self_host-web_server-caddyfile">Caddyfile</h2>
<p>Once the server is running, the caddyfile is the base config for what you want it
to do. Create a file called <code>Caddyfile</code> and then update based on what you want.
Here are the offical docs: https://caddyserver.com/docs/caddyfile</p>
<p>Basic File:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code>localhost {
    respond &quot;Hello, world!&quot;
}

localhost:2016 {
    respond &quot;Goodbye, world!&quot;
}
</code></pre></div></td></tr></table></div></p>
<h2 id="self_host-web_server-certificates">Certificates</h2>
<p>Using certain names in your caddyfile have important caveats. For example, LetsEncrypt,
the certificate authority that Caddy uses will not issue certificates for localhost. 
They only do for public domains. Also your browser will show a "Not Trusted" message
when you try to go to it. </p>
<p>You can get a local cert program like mkcert and set that up.</p>
<p>Caddy has a self signed cert with TLS. You can use this like below:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>localhost {
    root * /srv/web_apps/dev_site
    file_server
    tls internal
}
</code></pre></div></td></tr></table></div>
<h2 id="self_host-web_server-authentication">Authentication</h2>
<p>You can add basic HTTP authentication to any of your routes. Use bcrypt
to generate a password hash like </p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># with caddy</span>
caddy<span class="w"> </span>hash-password<span class="w"> </span>--plaintext<span class="w"> </span><span class="s2">&quot;yourpassword&quot;</span>

<span class="c1"># docker</span>
sudo<span class="w"> </span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>caddy<span class="w"> </span>caddy<span class="w"> </span>hash-password<span class="w"> </span>--plaintext<span class="w"> </span><span class="s2">&quot;yourpassword&quot;</span>
</code></pre></div></td></tr></table></div>
<p>Then add your auth to your route in Caddyfile.
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code># add auth to entire site
yourdomain.com {
    basicauth {
        user password_hash
    }

    root * /srv/web_apps/site
    file_server
}

# add auth to specific route
example.com {
    handle /admin* {
        basicauth {
            user password_hash
        }
        root * /srv/web_apps/admin
        file_server
    }

    handle / {
        root * /srv/web_apps/public
        file_server
    }
}
</code></pre></div></td></tr></table></div></p>
<h2 id="self_host-web_server-full-file">Full File</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span></pre></div></td><td class="code"><div><pre><span></span><code>(basic_auth_users) {
    @protected {
        not path /public_notes*   # everything EXCEPT /public_notes*
    }

    basic_auth @protected  {
            user password_hash
        }
    }

home.server {
    tls internal

    handle / {
        root * /srv/web_apps/home
        file_server
    }

    handle /test* {
        respond &quot;Hello from test path&quot;
    }

    handle /notes* {
        root * /srv/web_apps
        file_server browse
    }

    handle {
        respond &quot; Unmatched path: {uri}&quot; 404
    }
}


healthfin.solutions {
    handle /public_notes* {
            root * /srv/web_apps
            file_server
        }

    import basic_auth_users

    handle / {
        root * /srv/web_apps/home
        file_server
    }

    handle /confetti {
        rewrite * /confetti.html
        root * /srv/web_apps/home
        file_server
    }

    handle /timeline {
        rewrite * /timeline.html
        root * /srv/web_apps/home
        file_server
    }

    handle /notes* {
            root * /srv/web_apps
            file_server
        }

    handle {
        respond &quot; Unmatched path: {uri}&quot; 404
    }
}


# billboard analytics
billboard.anderson {
    tls internal
    reverse_proxy 192.168.1.104:8000
}

billboard.healthfin.solutions {
    import basic_auth_users

    reverse_proxy 192.168.1.104:8000 {
        header_up Host {http.request.host}  # fixes the issue of static files in the website.
    }
}

# immich
pics.anderson {
    tls internal
    reverse_proxy 192.168.1.104:2283
}

pics.healthfin.solutions {
    import basic_auth_users

    reverse_proxy 192.168.1.104:2283 {
        header_up Host {http.request.host}  # fixes the issue of static files in the website.
    }
}

# LLM
ollama.anderson {
    tls internal
    reverse_proxy 192.168.1.104:3001
}

ai.healthfin.solutions {
    reverse_proxy 192.168.1.104:3001
}

yt.healthfin.solutions {
    import basic_auth_users
    reverse_proxy 192.168.1.104:8091
}

jelly.healthfin.solutions {
    reverse_proxy 192.168.1.104:8096
}

docs.anderson {
    tls internal
    root * /srv/web_apps/notes
    file_server
}

dns.anderson {
    import basic_auth_users
    tls internal
    reverse_proxy 192.168.1.104:3000
}

resources.anderson {
    import basic_auth_users
    tls internal
    reverse_proxy 192.168.1.104:19999
}

jdownloader.anderson {
    import basic_auth_users
    tls internal
    reverse_proxy 192.168.1.104:5800
}

torrent.anderson {
    import basic_auth_users
    tls internal
    reverse_proxy 192.168.1.104:8080
}
</code></pre></div></td></tr></table></div></section><section class="print-page" id="self_host-wireguard" heading-number="5.8"><h1 id="self_host-wireguard-wireguard">Wireguard</h1>
<p>Wireguard (wg) is an open source VPN software.</p>
<p>You'll need to update the docker compose file with your hosts public ip
and also create a bcrypt hashed password. You can do the password with
python like this:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>bcrypt
python3<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;import bcrypt; print(bcrypt.hashpw(b&#39;yourpassword&#39;, bcrypt.gensalt()).decode())&quot;</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">volumes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">etc_wireguard</span><span class="p">:</span>

<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">wg-easy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># Change Language:</span>
<span class="w">      </span><span class="c1"># (Supports: en, ua, ru, tr, no, pl, fr, de, ca, es, ko, vi, nl, is, pt, chs, cht, it, th, hi, ja, si)</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LANG=en</span>
<span class="w">      </span><span class="c1">#  Required:</span>
<span class="w">      </span><span class="c1"># Change this to your host&#39;s public address</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WG_HOST=&lt;host.public.ip.address&gt;</span>

<span class="w">      </span><span class="c1"># Optional:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PASSWORD_HASH=&lt;password_hash&gt;</span>
<span class="w">      </span><span class="c1"># - PORT=51821</span>
<span class="w">      </span><span class="c1"># - WG_PORT=51820</span>
<span class="w">      </span><span class="c1"># - WG_CONFIG_PORT=92820</span>
<span class="w">      </span><span class="c1"># - WG_DEFAULT_ADDRESS=10.8.0.x</span>
<span class="w">      </span><span class="c1"># - WG_DEFAULT_DNS=1.1.1.1</span>
<span class="w">      </span><span class="c1"># - WG_MTU=1420</span>
<span class="w">      </span><span class="c1"># - WG_ALLOWED_IPS=192.168.15.0/24, 10.0.1.0/24</span>
<span class="w">      </span><span class="c1"># - WG_PERSISTENT_KEEPALIVE=25</span>
<span class="w">      </span><span class="c1"># - WG_PRE_UP=echo &quot;Pre Up&quot; &gt; /etc/wireguard/pre-up.txt</span>
<span class="w">      </span><span class="c1"># - WG_POST_UP=echo &quot;Post Up&quot; &gt; /etc/wireguard/post-up.txt</span>
<span class="w">      </span><span class="c1"># - WG_PRE_DOWN=echo &quot;Pre Down&quot; &gt; /etc/wireguard/pre-down.txt</span>
<span class="w">      </span><span class="c1"># - WG_POST_DOWN=echo &quot;Post Down&quot; &gt; /etc/wireguard/post-down.txt</span>
<span class="w">      </span><span class="c1"># - UI_TRAFFIC_STATS=true</span>
<span class="w">      </span><span class="c1"># - UI_CHART_TYPE=0 # (0 Charts disabled, 1 # Line chart, 2 # Area chart, 3 # Bar chart)</span>
<span class="w">      </span><span class="c1"># - WG_ENABLE_ONE_TIME_LINKS=true</span>
<span class="w">      </span><span class="c1"># - UI_ENABLE_SORT_CLIENTS=true</span>
<span class="w">      </span><span class="c1"># - WG_ENABLE_EXPIRES_TIME=true</span>
<span class="w">      </span><span class="c1"># - ENABLE_PROMETHEUS_METRICS=false</span>
<span class="w">      </span><span class="c1"># - PROMETHEUS_METRICS_PASSWORD=$$2a$$12$$vkvKpeEAHD78gasyawIod.1leBMKg8sBwKW.pQyNsq78bXV3INf2G # (needs double $$, hash of &#39;prometheus_password&#39;; see &quot;How_to_generate_an_bcrypt_hash.md&quot; for generate the hash)</span>

<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ghcr.io/wg-easy/wg-easy</span>
<span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">wg-easy-compose</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">etc_wireguard:/etc/wireguard</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;51820:51820/udp&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;51821:51821/tcp&quot;</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>
<span class="w">    </span><span class="nt">cap_add</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NET_ADMIN</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SYS_MODULE</span>
<span class="w">      </span><span class="c1"># - NET_RAW #  Uncomment if using Podman</span>
<span class="w">    </span><span class="nt">sysctls</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">net.ipv4.ip_forward=1</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">net.ipv4.conf.all.src_valid_mark=1</span>
</code></pre></div></td></tr></table></div>
<p>Once the container is running you'll need to setup other machines to
have access. </p>
<ol>
<li>Go to the UI: http://<your-server-ip>:51821</li>
<li>Add Client. Name it something descriptive. wg-easy automatically:</li>
<li>Creates a new private/public key pair for that client</li>
<li>Assigns a VPN IP address</li>
<li>Generates a .conf file and a QR code</li>
<li>Connect Devices</li>
</ol>
<h3 id="self_host-wireguard-desktop-laptop"> <strong>Desktop / Laptop</strong></h3>
<ol>
<li>
<p>Install <strong>WireGuard</strong>:</p>
<ul>
<li>macOS  App Store (WireGuard)</li>
<li>Windows  <a href="https://www.wireguard.com/install/">wireguard.com/install</a></li>
<li>Linux  <code>sudo apt install wireguard</code></li>
</ul>
</li>
<li>
<p>In wg-easy, click <strong>Download config</strong> for your client.
   Itll be a file like <code>tyler-laptop.conf</code>.</p>
</li>
<li>
<p>Open the WireGuard app  Import Tunnel  select that file.</p>
</li>
<li>
<p>Toggle <strong>Activate</strong> to connect.</p>
</li>
</ol>
<hr />
<h3 id="self_host-wireguard-mobile-iphone-android"> <strong>Mobile (iPhone / Android)</strong></h3>
<ol>
<li>Install the official <strong>WireGuard app</strong>.</li>
<li>On the wg-easy dashboard, click <strong>Show QR code</strong> next to the client.</li>
<li>In the WireGuard app  Add Tunnel  Scan from QR Code.</li>
<li>Scan it, save, and toggle <strong>Activate</strong> to connect.</li>
</ol>
<p>Thats it  your phone now routes through your home network via VPN!</p>
<hr />
<h2 id="self_host-wireguard-4-test-the-connection"> 4. Test the Connection</h2>
<p>Once connected:</p>
<ul>
<li>Visit <a href="https://ipinfo.io">https://ipinfo.io</a>  it should show <strong>your homes public IP</strong>, not your phone/laptops local network IP.</li>
<li>If you can reach internal devices like <code>192.168.x.x</code>, that means local routing is working too.</li>
</ul>
<hr />
<h2 id="self_host-wireguard-5-optional-enable-port-forwarding"> 5. (Optional) Enable Port Forwarding</h2>
<p>If you want to access wg-easy <strong>from outside your LAN</strong>:</p>
<ul>
<li>Forward <strong>UDP port 51820</strong> on your router  your servers LAN IP.</li>
<li>
<p>(Optionally) Forward <strong>TCP 51821</strong> if you want to reach the dashboard remotely.</p>
<ul>
<li>Though best practice: leave 51821 closed and use a VPN client only.</li>
</ul>
</li>
</ul>
<hr />
<h2 id="self_host-wireguard-6-add-more-clients-later"> 6. Add More Clients Later</h2>
<p>Each client is isolated, so you can add as many as you want:</p>
<ul>
<li>Add client  scan QR or download config  done.
  wg-easy handles all the routing automatically.</li>
</ul>
<hr /></section><section class="print-page" id="git-remotes" heading-number="5.9"><h1 id="git-remotes-git-remotes">Git Remotes</h1>
<p>A "remote" in the git environment is another location to 
store a copy of your git project. It is great for backing up projects
and sharing code/collaboration.</p>
<p>GitHub is the most common remote but there are many other options.</p>
<h2 id="git-remotes-using-remotes">Using Remotes</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># To see all remotes that are in a project</span>
git<span class="w"> </span>remote<span class="w"> </span>-v

<span class="c1"># to push commited updates to remote</span>
git<span class="w"> </span>push
</code></pre></div></td></tr></table></div>
<p>You can setup multiple remotes on one git project.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code>git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>&lt;name<span class="w"> </span>of<span class="w"> </span>remote&gt;<span class="w"> </span>&lt;server<span class="w"> </span>uri&gt;

<span class="c1"># for example:</span>
git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>origin<span class="w"> </span>https://github.com/ty-anderson/python_quickstart.git
git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>backup<span class="w"> </span>ssh://user@yourserver:/srv/git/myproject.git

<span class="c1"># when pushing be explicit to which remote</span>
git<span class="w"> </span>push<span class="w"> </span>&lt;remote<span class="w"> </span>name&gt;<span class="w"> </span>&lt;branch&gt;
git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>main
git<span class="w"> </span>push<span class="w"> </span>backup<span class="w"> </span>master
</code></pre></div></td></tr></table></div>
<h2 id="git-remotes-self-hosted-git-server">Self Hosted Git Server</h2>
<p>If you want to store your git projects on your own server, its pretty simple.</p>
<p>Steps:</p>
<p>On your server:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>mkdir<span class="w"> </span>-p<span class="w"> </span>/srv/git/myproject.git
<span class="nb">cd</span><span class="w"> </span>/srv/git/myproject.git
git<span class="w"> </span>init<span class="w"> </span>--bare
</code></pre></div></td></tr></table></div></p>
<p>On your local machine:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>origin<span class="w"> </span>ssh://user@yourserver:/srv/git/myproject.git
git<span class="w"> </span>push<span class="w"> </span>-u<span class="w"> </span>origin<span class="w"> </span>main
<span class="c1"># origin is name of remote, change to whatever you want. </span>
<span class="c1"># main is name of branch, change to whatever branch you want to commit.</span>
<span class="c1"># the -u sets this remote as the active one for tracking. </span>
</code></pre></div></td></tr></table></div></p></section><section class="print-page" id="self_host-nas" heading-number="5.10"><h1 id="self_host-nas-nas-network-attached-storage">NAS (Network Attached Storage)</h1>
<p>A NAS system is a dedicated server that is used ONLY for network storage.
It runs a NAS operating system such as TrueNAS, Unraid, or Linux with 
<code>mdadm</code> or <code>zfs</code> and has a motherboard that can support multiple hard drives. </p>
<p>A NAS system should only be used for storage, not running any apps or processes.</p></section></section>
                    <section class='print-page md-section' id='section-6' heading-number='6'>
                        <h1>Networking<a class='headerlink' href='#section-6' title='Permanent link'></a>
                        </h1>
                    <section class="print-page" id="networking-docs_100_networking" heading-number="6.1"><h1 id="networking-docs_100_networking-networking">Networking</h1>
<p>A network has many different things going on.</p>
<p>In networking, devices sit behind routers. Routers have a public IP address that
is used in accessing the internet, or a wide area network (WAN). The router also 
manages local ip address for all devices through DHCP. </p>
<h2 id="networking-docs_100_networking-dhcp">DHCP</h2>
<p>DHCP - Dynamic Host Configuration Protocol</p>
<p>DHCP is a server responsible for assigning local ip addresses to devices on the network. 
It can also have local domain names assigned, frequently setup as <code>home.local</code> or <code>local</code>.</p>
<p>You can use DHCP to reserve certain ip addresses for certain devices.
You can also assign names that point to a certain device. This way you can refer to 
the device on the network by an easy to remember name instead of the ip address.
For example 192.168.1.104 -&gt; homeserver.</p>
<p>When a device joins a network, it sends a "DHCP discover" message. 
A DHCP server responds to the message and assigns an IP address and other configuration information. 
DHCP also assigns new IP addresses when devices move to new locations. </p>
<h2 id="networking-docs_100_networking-dns">DNS</h2>
<p>DNS - Domain Name System</p>
<p>This translates IP addresses into domain names. Think of a phonebook for the internet. Instead
of names to phone numbers it points domain names to ip addresses. There are public DNS servers
that route the public domains on the internet. </p>
<h3 id="networking-docs_100_networking-local-dns">Local DNS</h3>
<p>There are also DNS servers that are run on a router or a local machine. This establishes
mappings from names to ip address only on your local network. This makes it so you can setup
a device with, say ip <code>192.168.1.104</code> to name <code>mydevice.home</code>. Keep in mind that your 
router might have a suffix that attaches to these names, such as <code>.home</code></p>
<h2 id="networking-docs_100_networking-ipv4-vs-ipv6">IPv4 vs IPv6</h2>
<h3 id="networking-docs_100_networking-ipv4">IPv4</h3>
<p>consists of devices having a 32-bit address that looks like 192.168.1.100.
It consists of public and private addresses, where the public addresses are
accessible over the internet and private addresses are only accessible over 
a local network. This means for data to get passed from one device over the internet
to another device, the protocol Network Area Translation (NAT) is used. NAT
will convert every packet of your private ip to the public which costs compute.</p>
<h3 id="networking-docs_100_networking-ipv6">IPv6</h3>
<ul>
<li>128-bit addresses, virtually infinite possible addresses.</li>
<li>Device addresses are globally routable (not hidden behind a public IP).</li>
<li>Because devices are globally routable, it eliminates the need for NAT 
as devices can connect end-to-end. Allowing for better connection
speeds for video, audio, peer-to-peer, gaming, etc.</li>
<li>Devices can auto-configure with Stateless Address Autoconfiguration (SLAAC), no
need for DHCP.</li>
<li>Firewalls are more relevant with IPv6 due to addresses being globally routable.</li>
</ul>
<p><code>ip -6 addr show</code></p>
<p>Local address: <code>fe80::</code></p>
<ul>
<li>Scope: Local network segment (cannot be routed on the internet).</li>
<li>Usage: Used for internal network functions like router discovery and neighbor discovery.</li>
<li>Common for: Internal device communication.</li>
</ul>
<p>Global address: Usually starts with <code>2xxx::</code> or <code>3xxx::</code></p>
<ul>
<li>Scope: Globally routable on the internet.</li>
<li>Usage: For internet-facing applications or public communication.</li>
<li>This is often the correct address for external access.</li>
</ul>
<p>Address types:</p>
<ul>
<li>scope global  for internet or external routing.</li>
<li>scope link  for local network only.</li>
</ul>
<p>SSH: ssh user@[fe80::1a2b:3c4d:5e6f%eth0]</p>
<h2 id="networking-docs_100_networking-commands">Commands</h2>
<p><code>netstat</code> - </p></section><section class="print-page" id="networking-docs_100_servers" heading-number="6.2"><h1 id="networking-docs_100_servers-servers">Servers</h1>
<h1 id="networking-docs_100_servers-web-server">Web Server</h1>
<p>Known for serving over HTTP/HTTPS protocol. Typically websites, API's, web services, anything using HTTP(S).</p>
<h2 id="networking-docs_100_servers-proxy-server">Proxy Server</h2>
<p>Redirects web traffic. A sort of "middleman" server that is responsible for directing requests. 
For example, Nginx or Caddy can be hosted on a server. The proxy server program, once configured, 
will push requests to other servers. Good for load balancing, obscuring other servers IP address.
Specifically this reroutes web traffic like HTTP(S).</p>
<h2 id="networking-docs_100_servers-file-server">File Server</h2>
<p>A file server is a server that is like a central hub to hold files. </p>
<p>Some common options:
- Samba https://hub.docker.com/r/dperson/samba for your typical file explorer-like experience.
- SFTP.
- Files over HTTPS aka cloud API's like Google Drive.</p></section><section class="print-page" id="networking-docs_101_caddy" heading-number="6.3"><h1 id="networking-docs_101_caddy-caddy">Caddy</h1>
<p>Official site: https://caddyserver.com/</p>
<p>docker compose:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">caddy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">caddy:latest</span>
<span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">caddy</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;80:80&quot;</span><span class="w">        </span><span class="c1"># HTTP</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;443:443&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;8009:8009&quot;</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./Caddyfile:/etc/caddy/Caddyfile</span><span class="w">   </span><span class="c1"># Mount your Caddyfile</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./data:/data</span><span class="w">                       </span><span class="c1"># Lets Encrypt certificates</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./config:/config</span><span class="w">                   </span><span class="c1"># Caddy configuration</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/srv/web_apps/notes:/srv/web_apps/notes</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>
</code></pre></div></td></tr></table></div></p>
<p>Don't forget to open the port(s) in the firewall.</p>
<h2 id="networking-docs_101_caddy-reverse-proxy">Reverse-Proxy</h2>
<p>Reverse Proxy - software that routes traffic from one endpoint to another, or multiple others.</p>
<p>Caddy is very simple and it comes with built in certificate management through Lets Encrypt. </p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">&lt;requested-domain&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">reverse_proxy</span><span class="w"> </span><span class="s">&lt;ip</span><span class="w"> </span><span class="s">and</span><span class="w"> </span><span class="s">port</span><span class="w"> </span><span class="s">service</span><span class="w"> </span><span class="s">is</span><span class="w"> </span><span class="s">routed</span><span class="w"> </span><span class="s">to&gt;</span>
<span class="err">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="networking-docs_101_caddy-examples-using-caddy">Examples using Caddy:</h3>
<p>Very simple config. This says using the host machine ip address, using the protocol on port 80 (http)
respond with "Hello from Caddy".</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">:80</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">respond</span><span class="w"> </span><span class="s">&quot;Hello</span><span class="w"> </span><span class="s">from</span><span class="w"> </span><span class="s">Caddy&quot;</span>
<span class="err">}</span>
</code></pre></div></td></tr></table></div>
<p>Internal and localhost certificates
If you configure sites with local or internal addresses, Caddy will serve them over HTTPS 
using a locally-trusted certificate authority with short-lived, auto-renewing certificates. 
It even offers to install your unique root into your local trust stores for you.
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">localhost</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">respond</span><span class="w"> </span><span class="s">&quot;Hello</span><span class="w"> </span><span class="s">from</span><span class="w"> </span><span class="s">HTTPS!&quot;</span>
<span class="err">}</span>

<span class="mi">192</span><span class="s">.168.1.10</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">respond</span><span class="w"> </span><span class="s">&quot;Also</span><span class="w"> </span><span class="s">HTTPS!&quot;</span>
<span class="err">}</span>

<span class="s">http://localhost</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">respond</span><span class="w"> </span><span class="s">&quot;Plain</span><span class="w"> </span><span class="s">HTTP&quot;</span>
<span class="err">}</span>
</code></pre></div></td></tr></table></div></p>
<p>When requests go to example.com, it will get routed
to this reverse proxy, which then pushes it to localhost:5000. Just be sure the DNS
records are updated to route the domain to this IP address.
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">example.com</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">reverse_proxy</span><span class="w"> </span><span class="n">localhost</span><span class="p">:</span><span class="mi">5000</span>
<span class="err">}</span>
</code></pre></div></td></tr></table></div></p>
<p>Here is Caddy as a reverse proxy doing load balancing, in a round-robin method.
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">example.com</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">reverse_proxy</span><span class="w"> </span><span class="n">backend1</span><span class="p">:</span><span class="mi">5000</span><span class="w"> </span><span class="n">backend2</span><span class="p">:</span><span class="mi">5000</span><span class="w"> </span><span class="n">backend3</span><span class="p">:</span><span class="mi">5000</span>
<span class="err">}</span>
</code></pre></div></td></tr></table></div></p>
<p>You can do path based proxying to serve different backends based on the url path. In this 
example <code>example.com/api</code> will go to one web server, while <code>example.com/static</code> goes to another.
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">example.com</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">reverse_proxy</span><span class="w"> </span><span class="s">/api</span><span class="w"> </span><span class="n">backend1</span><span class="p">:</span><span class="mi">5000</span>
<span class="w">    </span><span class="s">reverse_proxy</span><span class="w"> </span><span class="s">/static</span><span class="w"> </span><span class="n">backend2</span><span class="p">:</span><span class="mi">5001</span>
<span class="w">    </span><span class="s">reverse_proxy</span><span class="w"> </span><span class="s">/app</span><span class="w"> </span><span class="n">backend3</span><span class="p">:</span><span class="mi">5002</span>
<span class="err">}</span>
</code></pre></div></td></tr></table></div></p>
<p>You can setup to route subdomains as well. This will retrieve an SSL certificate for all domains added.
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">example.com</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">reverse_proxy</span><span class="w"> </span><span class="n">localhost</span><span class="p">:</span><span class="mi">3000</span>
<span class="err">}</span>

<span class="s">api.example.com</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">reverse_proxy</span><span class="w"> </span><span class="n">localhost</span><span class="p">:</span><span class="mi">4000</span>
<span class="err">}</span>
</code></pre></div></td></tr></table></div></p>
<p>You can also proxy to external services.
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">example.com</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">reverse_proxy</span><span class="w"> </span><span class="s">https:/api.example.com</span>
<span class="err">}</span>
</code></pre></div></td></tr></table></div></p>
<p>You can also configure domains to redirect to one domain. In this example all requests to 
www.example.com will be rerouted to example.com. 
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">example.com</span><span class="w"> </span><span class="s">www.example.com</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">reverse_proxy</span><span class="w"> </span><span class="n">localhost</span><span class="p">:</span><span class="mi">3000</span>
<span class="err">}</span>
</code></pre></div></td></tr></table></div></p>
<p>To run Caddy:</p>
<ul>
<li>Download to computer</li>
<li>Setup config file <code>Caddyfile</code> typically in <code>/etc/caddy/Caddyfile</code></li>
<li>Start the Caddy server <code>sudo systemctl start caddy</code></li>
</ul>
<p>To run in Docker:</p>
<ul>
<li>
<p>Create a docker-compose.yml file.
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">caddy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">caddy:latest</span>
<span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">caddy</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;80:80&quot;</span><span class="w">        </span><span class="c1"># HTTP</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;443:443&quot;</span><span class="w">      </span><span class="c1"># HTTPS</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./Caddyfile:/etc/caddy/Caddyfile</span><span class="w">   </span><span class="c1"># Mount your Caddyfile</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./data:/data</span><span class="w">                       </span><span class="c1"># Lets Encrypt certificates</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./config:/config</span><span class="w">                   </span><span class="c1"># Caddy configuration</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p>Create your Caddyfile (make sure to create it in the same location your volume is pointed to).
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">example.com</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">reverse_proxy</span><span class="w"> </span><span class="n">backend</span><span class="p">:</span><span class="mi">3000</span>
<span class="err">}</span>
</code></pre></div></td></tr></table></div></p>
</li>
<li>Run <code>docker compose up -d</code> to start the server.</li>
</ul>
<p>Additional considerations to run in Docker:</p>
<ul>
<li>If you run Caddy in a docker container, <code>localhost</code> will be that container, due to dockers own DNS.</li>
<li>If you run your web server that you're routing to in a docker container, you can use that container name
    in the caddy file config.</li>
</ul>
<p>You can also route ports directly.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">:8443</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">reverse_proxy</span><span class="w"> </span><span class="n">127.0.0.1</span><span class="p">:</span><span class="mi">8000</span>
<span class="err">}</span>
</code></pre></div></td></tr></table></div>
<h2 id="networking-docs_101_caddy-file-server">File Server</h2>
<p>Caddy has an option to serve static files over HTTP. This is not a file server like sFTP
because it serves over http or https.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">healthfin.solutions</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">root</span><span class="w"> </span><span class="s">*</span><span class="w"> </span><span class="s">/srv/website</span>
<span class="w">    </span><span class="s">file_server</span>
<span class="err">}</span>
</code></pre></div></td></tr></table></div>
<p>Serve different sites with different paths of the same domain.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">healthfin.solutions</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">handle_path</span><span class="w"> </span><span class="s">/notes*</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kn">root</span><span class="w"> </span><span class="s">*</span><span class="w"> </span><span class="s">/srv/web_apps/notes</span>
<span class="w">        </span><span class="s">file_server</span>
<span class="w">    </span><span class="err">}</span>

<span class="w">    </span><span class="s">reverse_proxy</span><span class="w"> </span><span class="n">homeserver.home</span><span class="p">:</span><span class="mi">8000</span>
<span class="err">}</span>

<span class="p">:</span><span class="mi">8009</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">root</span><span class="w"> </span><span class="s">*</span><span class="w"> </span><span class="s">/srv/web_apps/notes</span>
<span class="w">    </span><span class="s">file_server</span>
<span class="err">}</span>
</code></pre></div></td></tr></table></div>
<p>This config allows for access to the main server from the root domain, but 
also changes to the static site when you add the /notes path.</p>
<p>Don't forget you can setup a local DNS server on your machine and setup a 
local domain DNS rewrite.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">anderson.docs</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">tls</span><span class="w"> </span><span class="s">internal</span>
<span class="w">    </span><span class="s">root</span><span class="w"> </span><span class="s">*</span><span class="w"> </span><span class="s">/srv/web_apps/notes</span>
<span class="w">    </span><span class="s">file_server</span>
<span class="err">}</span>
</code></pre></div></td></tr></table></div></section><section class="print-page" id="networking-docs_102_dns_server" heading-number="6.4"><h1 id="networking-docs_102_dns_server-dns-server">DNS Server</h1>
<p>A DNS Server is a server that holds domain name records and point to the 
corresponding IP addresses. </p>
<h2 id="networking-docs_102_dns_server-adguard">Adguard</h2>
<p>You can setup your own local DNS server on your network. Frequently these
allow you to setup your own name resolutions on your network, but also block
certain sites from resolving, which can prevent ads.</p>
<h2 id="networking-docs_102_dns_server-concept-1">Concept 1</h2>
<p>You can setup your own DNS server on your network. Open source servers include
adguard, dnsmasq, and pihole. </p>
<div class="mermaid">
graph TD
    A[Router]
    B[Internet]
    C[Home Server]
    D[Computer 1]

    B <-..-> A
    C --Otherwise have your router use its default DNS--> A
    D --Resolve DNS Here First--> C
</div>

<h2 id="networking-docs_102_dns_server-options">Options</h2>
<p>You have two options when setting up your own DNS server</p>
<ol>
<li>Set up individual devices on your network to use self-hosted DNS server</li>
<li>Set up your router to point all devices to the self-hosted DNS server.</li>
</ol>
<h2 id="networking-docs_102_dns_server-setup-adguard">Setup Adguard</h2>
<p>Docker compose file:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">adguardhome</span><span class="p">:</span>
<span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">adguardhome</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">adguard/adguardhome</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;53:53/udp&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;53:53/tcp&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;3000:80/tcp&quot;</span><span class="w">   </span><span class="c1"># Web UI</span>
<span class="c1">#      - &quot;443:443/tcp&quot; # (Optional, for HTTPS UI)</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./workdir:/opt/adguardhome/work</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./confdir:/opt/adguardhome/conf</span>
</code></pre></div></td></tr></table></div>
<p><code>sudo docker compose up -d</code> - you now have a DNS server running.</p>
<p>To access the web UI you can go to <code>http://&lt;ip address&gt;:3000</code>.</p>
<p>To add a local domain, go to Filters&gt;DNS rewrites</p>
<p>If you want to do option 1:</p>
<p>Go to the device(s) you want to use your DNS server. Go to System Preferences -&gt;
Network -&gt; Wifi (or Ethernet) -&gt; DNS. From there add the IP address of your 
server running the DNS server.</p>
<p>If you want option 2:</p>
<p>Go into your router options. Find DNS settings (might be under DHCP Settings).</p>
<p>Add your custom server, its a good idea to add a fallback server in case yours
goes down. Google is 8.8.8.8 or cloudflare 1.1.1.1.</p></section></section>
                    <section class='print-page md-section' id='section-7' heading-number='7'>
                        <h1>Linux and Other OS<a class='headerlink' href='#section-7' title='Permanent link'></a>
                        </h1>
                    <section class="print-page" id="linux-docs_104_linux" heading-number="7.1"><h1 id="linux-docs_104_linux-linux">Linux</h1>
<h2 id="linux-docs_104_linux-execute-files">Execute files</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>./path/to/file
<span class="c1"># or</span>
<span class="nb">source</span><span class="w"> </span>/path/to/file
</code></pre></div></td></tr></table></div>
<ul>
<li><code>./bash_script.sh</code> executes the script as a standalone process. This method requires execute permissions.</li>
<li><code>source bash_script.sh</code> executes the script in the existing process (doesn't create standalone process). Allows
modifying environment variables in the current shell. Allows <code>cd</code> command to change directory.</li>
</ul>
<p>TLDR: default to using <code>source</code> to execute files.</p>
<h2 id="linux-docs_104_linux-file-permissions">File Permissions</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># view permissions</span>
ls<span class="w"> </span>-l<span class="w">  </span><span class="c1"># &lt;--view permissions of files in the directory.</span>
ls<span class="w"> </span>-ld<span class="w">  </span><span class="c1"># &lt;--view permissions of the directory itself.</span>

<span class="c1"># change permissions - full read write all access</span>
sudo<span class="w"> </span>chmod<span class="w"> </span>-R<span class="w"> </span><span class="m">777</span><span class="w"> </span>/path/to/folder
</code></pre></div></td></tr></table></div>
<p>View permissions:</p>
<p>You will see something like below:</p>
<p><code>drwxr-xr-x  2 root root 4096 Feb 12 12:34 /srv/web_apps</code></p>
<p>The first section is read, write, execute for owner, group, others. </p>
<table>
<thead>
<tr>
<th>Section</th>
<th>Meaning</th>
<th>Who it applies to</th>
</tr>
</thead>
<tbody>
<tr>
<td>d</td>
<td>Directory</td>
<td>-</td>
</tr>
<tr>
<td>rwx</td>
<td>read(r), write(w), execute(x)</td>
<td>Owner (root)</td>
</tr>
<tr>
<td>r-x</td>
<td>read(r), no write(-), execute(x)</td>
<td>Group (root)</td>
</tr>
<tr>
<td>r-x</td>
<td>read(r), no write(-), execute(x)</td>
<td>Others (everyone else)</td>
</tr>
</tbody>
</table>
<p>To see if you're root do: <code>whoami</code>. If the output is 'root' then you can write.
If your user is not root, check if your in the root group <code>groups</code>. If your
not in 'root' group, you cannot write.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># </span>
<span class="c1">#  PERMISSIONS &amp; OWNERSHIP REFERENCE</span>
<span class="c1"># </span>

<span class="c1">#  VIEW PERMISSIONS</span>
ls<span class="w"> </span>-l<span class="w">          </span><span class="c1"># list files with permissions</span>
ls<span class="w"> </span>-ld<span class="w"> </span>folder<span class="w">  </span><span class="c1"># view folder permissions only</span>
stat<span class="w"> </span>filename<span class="w">  </span><span class="c1"># detailed view (shows numeric + symbolic modes)</span>


<span class="c1"># </span>
<span class="c1">#  ALTER PERMISSIONS (CHMOD)</span>
<span class="c1"># </span>
<span class="c1"># chmod = change mode (permissions)</span>
<span class="c1"># Two methods: symbolic and numeric</span>

<span class="c1">#  SYMBOLIC MODE</span>
<span class="c1"># u = user (owner)</span>
<span class="c1"># g = group</span>
<span class="c1"># o = others</span>
<span class="c1"># a = all (u+g+o)</span>
<span class="c1"># + = add permission</span>
<span class="c1"># - = remove permission</span>
<span class="c1"># = = set exact permission</span>

<span class="c1">#  Common examples</span>
chmod<span class="w"> </span>u+rwx,g+r,o-r<span class="w"> </span>filename<span class="w">     </span><span class="c1"># give user full, group read, remove read for others</span>
chmod<span class="w"> </span>u+rwx<span class="w"> </span>filename<span class="w">             </span><span class="c1"># owner full permissions</span>
chmod<span class="w"> </span>g-w<span class="w"> </span>filename<span class="w">               </span><span class="c1"># remove write for group</span>
chmod<span class="w"> </span>o-r<span class="w"> </span>filename<span class="w">               </span><span class="c1"># remove read for others</span>
chmod<span class="w"> </span>+x<span class="w"> </span>filename<span class="w">                </span><span class="c1"># give everyone execute permission</span>
chmod<span class="w"> </span>a+r<span class="w"> </span>foldername<span class="w">             </span><span class="c1"># allow all users to read a folder</span>
chmod<span class="w"> </span>a-x<span class="w"> </span>script.sh<span class="w">              </span><span class="c1"># remove execute for everyone</span>


<span class="c1">#  NUMERIC (OCTAL) MODE</span>
<span class="c1"># Each permission type (r=4, w=2, x=1)</span>
<span class="c1"># Add them up for each role (user, group, others)</span>

<span class="c1"># Example table:</span>
<span class="c1"># r-- = 4, rw- = 6, rwx = 7, --- = 0</span>
<span class="c1"># Format: chmod [user][group][others] file</span>

chmod<span class="w"> </span><span class="m">777</span><span class="w"> </span>file<span class="w">    </span><span class="c1"># rwx for all</span>
chmod<span class="w"> </span><span class="m">755</span><span class="w"> </span>file<span class="w">    </span><span class="c1"># rwx for owner, r-x for group/others</span>
chmod<span class="w"> </span><span class="m">700</span><span class="w"> </span>file<span class="w">    </span><span class="c1"># rwx for owner only</span>
chmod<span class="w"> </span><span class="m">644</span><span class="w"> </span>file<span class="w">    </span><span class="c1"># rw for owner, r for group/others</span>
chmod<span class="w"> </span><span class="m">600</span><span class="w"> </span>file<span class="w">    </span><span class="c1"># rw for owner, no access for others</span>

<span class="c1">#  Directories often use 755</span>
chmod<span class="w"> </span><span class="m">755</span><span class="w"> </span>/srv/web_apps
<span class="c1"># Files typically use 644</span>
chmod<span class="w"> </span><span class="m">644</span><span class="w"> </span>index.html


<span class="c1"># </span>
<span class="c1">#  CHANGE OWNERSHIP (CHOWN)</span>
<span class="c1"># </span>
<span class="c1"># chown = change owner (and optionally group)</span>

<span class="c1">#  Change owner of a file</span>
sudo<span class="w"> </span>chown<span class="w"> </span>user<span class="w"> </span>file.txt

<span class="c1">#  Change owner and group</span>
sudo<span class="w"> </span>chown<span class="w"> </span>user:group<span class="w"> </span>file.txt

<span class="c1">#  Change owner recursively for directory and contents</span>
sudo<span class="w"> </span>chown<span class="w"> </span>-R<span class="w"> </span>user:group<span class="w"> </span>/srv/web_apps

<span class="c1">#  View ownership</span>
ls<span class="w"> </span>-l<span class="w"> </span>filename
<span class="c1"># Output: owner and group are shown in the middle columns</span>


<span class="c1"># </span>
<span class="c1">#  OTHER USEFUL COMMANDS</span>
<span class="c1"># </span>
<span class="c1"># Change only the group of a file</span>
sudo<span class="w"> </span>chgrp<span class="w"> </span>groupname<span class="w"> </span>file.txt

<span class="c1"># Add user to group (to give access)</span>
sudo<span class="w"> </span>usermod<span class="w"> </span>-aG<span class="w"> </span>groupname<span class="w"> </span>username

<span class="c1"># Check which groups a user belongs to</span>
groups<span class="w"> </span>username

<span class="c1"># Apply same permissions to all files in a directory</span>
chmod<span class="w"> </span>-R<span class="w"> </span><span class="m">644</span><span class="w"> </span>/srv/web_apps
<span class="c1"># Apply directory execute bit so users can enter directories</span>
find<span class="w"> </span>/srv/web_apps<span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span>-exec<span class="w"> </span>chmod<span class="w"> </span><span class="m">755</span><span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\;</span>

<span class="c1"># </span>
<span class="c1">#  TIPS</span>
<span class="c1"># </span>
<span class="c1">#  Always test permissions with &#39;ls -l&#39; after changes.</span>
<span class="c1">#  Directories need execute (x) permission to be accessible.</span>
<span class="c1">#  Use numeric mode for scripts or automation, symbolic for clarity.</span>
<span class="c1">#  For public web directories, 755 for folders and 644 for files is standard.</span>
</code></pre></div></td></tr></table></div>
<h2 id="linux-docs_104_linux-copy-directory">Copy Directory</h2>
<p>Two baked-in commands are <code>scp</code> or <code>rsync</code>.</p>
<p>Here's an example with scp: <code>scp -r ./site user@server:/srv/web_apps</code>.</p>
<p><strong>rsync is typically recommended over scp.</strong></p>
<p>Rsync usually comes on Linux and MacOS. </p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># </span>
<span class="c1">#  RSYNC COMMAND REFERENCE</span>
<span class="c1"># </span>

<span class="c1">#  Basic usage</span>
rsync<span class="w"> </span>-v<span class="w"> </span>/source/file/name.txt<span class="w"> </span>/dest/file

<span class="c1">#  Use literal string (preserve special characters)</span>
rsync<span class="w"> </span>-v<span class="w"> </span><span class="s1">&#39;/source/file/na$me.txt&#39;</span><span class="w"> </span>/dest/file

<span class="c1">#  Send multiple files</span>
rsync<span class="w"> </span>-v<span class="w"> </span>/source/file1.txt<span class="w"> </span>/source/file2.txt<span class="w"> </span><span class="s1">&#39;/dest&#39;</span>

<span class="c1">#  Send over SSH</span>
rsync<span class="w"> </span>-av<span class="w"> </span>/source/file/name.txt<span class="w"> </span>user@server:/dest/file

<span class="c1">#  Send over SSH with custom port</span>
rsync<span class="w"> </span>-avz<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;ssh -p 2222&quot;</span><span class="w"> </span>/source/file/name.txt<span class="w"> </span>user@server:/dest/file

<span class="c1">#  Send over SSH with sudo on remote</span>
rsync<span class="w"> </span>-v<span class="w"> </span>--rsync-path<span class="o">=</span><span class="s2">&quot;sudo rsync&quot;</span><span class="w"> </span>yt_download_image.tar<span class="w"> </span>user@server:/srv/flask_yt_download

<span class="c1">#  Send entire directory (keeps parent folder)</span>
rsync<span class="w"> </span>-avz<span class="w"> </span>/source/dir<span class="w"> </span>/dest/dir

<span class="c1">#  Send all files *inside* a directory (no parent folder)</span>
rsync<span class="w"> </span>-avz<span class="w"> </span>/source/dir/<span class="w"> </span>/dest/dir

<span class="c1">#  Full example with sudo and custom SSH port</span>
rsync<span class="w"> </span>-avz<span class="w"> </span>--rsync-path<span class="o">=</span><span class="s2">&quot;sudo rsync&quot;</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;ssh -p 2222&quot;</span><span class="w"> </span>/Users/tyleranderson/Bonus<span class="w"> </span>tyler@anderson.home:/home/tyler/backup

<span class="c1">#  Full example with sudo (default port)</span>
rsync<span class="w"> </span>-avz<span class="w"> </span>--rsync-path<span class="o">=</span><span class="s2">&quot;sudo rsync&quot;</span><span class="w"> </span>/Users/tyleranderson/Bonus<span class="w"> </span>tyler@anderson.home:/home/tyler/backup


<span class="c1"># </span>
<span class="c1">#  FLAGS</span>
<span class="c1"># </span>
<span class="c1"># -v            verbose mode</span>
<span class="c1"># -a            archive mode (preserves permissions, timestamps, symlinks)</span>
<span class="c1"># -z            compress files during transfer</span>
<span class="c1"># -e            specify remote shell (e.g., &quot;ssh -p 2222&quot;)</span>
<span class="c1"># --progress    show transfer progress</span>
<span class="c1"># --delete      delete files in destination that are not in source</span>
<span class="c1"># --exclude     exclude specific files or folders (e.g., --exclude=&#39;*.log&#39; --exclude=&#39;/cache/&#39;)</span>


<span class="c1"># </span>
<span class="c1">#  DIRECTORY COPY EXAMPLES</span>
<span class="c1"># </span>
<span class="c1"># Copy directory into another (keeps &#39;site&#39; folder)</span>
rsync<span class="w"> </span>-av<span class="w"> </span>./site<span class="w"> </span>user@server:/srv/web_apps/notes

<span class="c1"># Copy directory contents into another (no &#39;site&#39; folder)</span>
rsync<span class="w"> </span>-av<span class="w"> </span>./site/<span class="w"> </span>user@server:/srv/web_apps/notes/
<span class="c1"># Note: trailing / on source copies contents only; trailing / on destination does not matter.</span>
</code></pre></div></td></tr></table></div>
<h2 id="linux-docs_104_linux-tar-files">Tar Files</h2>
<p>A tar file (.tar) is an archive that bundles multiple files or directories
into one file (optionally compressed). Commonly used for backups or transfers
on Linux and Unix systems.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># </span>
<span class="c1">#  TAR FILE COMMAND REFERENCE</span>
<span class="c1"># </span>

<span class="c1">#  Create a tar file (no compression)</span>
tar<span class="w"> </span>-cvf<span class="w"> </span>archive.tar<span class="w"> </span>/path/to/files/

<span class="c1">#  Extract a tar file</span>
tar<span class="w"> </span>-xvf<span class="w"> </span>archive.tar

<span class="c1">#  Create a compressed tar file (.tar.gz)</span>
tar<span class="w"> </span>-czvf<span class="w"> </span>archive.tar.gz<span class="w"> </span>/path/to/files/

<span class="c1">#  Extract a compressed tar file</span>
tar<span class="w"> </span>-xzvf<span class="w"> </span>archive.tar.gz

<span class="c1">#  List files inside a tar file (without extracting)</span>
tar<span class="w"> </span>-tvf<span class="w"> </span>archive.tar

<span class="c1">#  Extract a specific file from a tar archive</span>
tar<span class="w"> </span>-xvf<span class="w"> </span>archive.tar<span class="w"> </span>file.txt


<span class="c1"># </span>
<span class="c1">#  FLAGS</span>
<span class="c1"># </span>
<span class="c1"># -c   create a new archive</span>
<span class="c1"># -v   verbose mode (show progress)</span>
<span class="c1"># -f   specify the archive filename</span>
<span class="c1"># -x   extract from an archive</span>
<span class="c1"># -z   compress/decompress using gzip</span>
</code></pre></div></td></tr></table></div>
<h2 id="linux-docs_104_linux-encryption">Encryption</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># </span>
<span class="c1">#  ENCRYPTION &amp; SECURE DELETION REFERENCE</span>
<span class="c1"># </span>

<span class="c1">#  ENCRYPTION (AGE)</span>
<span class="c1"># age is a modern, lightweight encryption tool for files.</span>
<span class="c1"># Its simpler and more secure than GPG, but with fewer features.</span>

<span class="c1">#  Encrypt a single file</span>
age<span class="w"> </span>-o<span class="w"> </span>secretfile.age<span class="w"> </span>-p<span class="w"> </span>secretfile.txt

<span class="c1">#  Encrypt a directory (use tar first)</span>
tar<span class="w"> </span>-czf<span class="w"> </span>myfolder.tar.gz<span class="w"> </span>myfolder/
age<span class="w"> </span>-o<span class="w"> </span>myfolder.tar.gz.age<span class="w"> </span>-p<span class="w"> </span>myfolder.tar.gz

<span class="c1">#  Install age</span>
<span class="c1"># macOS:</span>
brew<span class="w"> </span>install<span class="w"> </span>age

<span class="c1"># Ubuntu / Debian:</span>
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>age


<span class="c1"># </span>
<span class="c1">#  REMOVING SENSITIVE DATA</span>
<span class="c1"># </span>

<span class="c1">#  HARD DISK DRIVES (HDD)</span>
<span class="c1"># Use &#39;shred&#39; to securely delete files by overwriting with random data multiple times.</span>

<span class="c1">#  Securely delete a file</span>
shred<span class="w"> </span>-u<span class="w"> </span>secret.txt

<span class="c1">#  Overwrite file multiple times before deleting</span>
shred<span class="w"> </span>-n<span class="w"> </span><span class="m">10</span><span class="w"> </span>secret.txt

<span class="c1">#  FLAGS</span>
<span class="c1"># -u   truncate and delete file after shredding</span>
<span class="c1"># -n   number of overwrite passes (default is 3)</span>


<span class="c1"># </span>
<span class="c1">#  SOLID STATE DRIVES (SSD)</span>
<span class="c1"># </span>

<span class="c1">#  1. Use fstrim (best for clearing free space on SSD)</span>
<span class="c1"># Tells SSD to permanently erase deleted data</span>
sudo<span class="w"> </span>fstrim<span class="w"> </span>-v<span class="w"> </span>/

<span class="c1">#  2. Use srm or wipe (best for secure file deletion)</span>
<span class="c1"># Better than shred for SSDs (handles wear leveling properly)</span>

<span class="c1">#  Install secure delete tools</span>
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>secure-delete<span class="w">    </span><span class="c1"># Debian/Ubuntu</span>
brew<span class="w"> </span>install<span class="w"> </span>srm<span class="w">                  </span><span class="c1"># macOS</span>

<span class="c1">#  Securely delete a file</span>
srm<span class="w"> </span>-v<span class="w"> </span>my_secret_file.txt

<span class="c1">#  Securely delete a directory</span>
wipe<span class="w"> </span>-rf<span class="w"> </span>my_secret_folder/
</code></pre></div></td></tr></table></div></section><section class="print-page" id="linux-docs_103_ssh" heading-number="7.2"><h1 id="linux-docs_103_ssh-ssh">SSH</h1>
<p>To SSH into a server its <code>ssh username@ipaddress</code> or <code>ssh username@servername</code>.</p>
<p>SSH uses port 22.</p>
<p>Typically when you SSH into a system, it will ask for your password. Instead of
using a password everytime, you can create a ssh key. These keys are essentially 
a file that sits on both machines and grants access without needing a password.</p>
<p>To generate ssh keys:</p>
<ol>
<li>On local machine <code>ssh-keygen -t rsa -b 4096</code>. It will ask for a passphrase, but you can leave it empty.</li>
<li>Copy the ssh key to the server <code>ssh-copy-id user@server</code></li>
</ol>
<p>If it worked correctly, you should now be able to login without needing a password.</p>
<p>You can run commands through ssh, without logging in: <code>ssh user@server "sudo chown -R user:user /srv/web_apps"</code></p></section><section class="print-page" id="linux-docs_199_backups" heading-number="7.3"><h1 id="linux-docs_199_backups-backups">Backups</h1>
<p>Options: Backup files/folders OR full system backup.</p>
<p>Backup folders: daily <code>rsync</code> to a separate disk
Full system: weekly <code>dd</code> or <code>timeshift</code></p>
<p>Can setup with cron to run regularly.</p>
<h2 id="linux-docs_199_backups-philosophy">Philosophy</h2>
<p>Best practice for backing up files is called 3-2-1 backup strategy.</p>
<ul>
<li>3 copies of your data (original and two backups).</li>
<li>2 different storage types (external drive, NAS, cloud storage, etc).</li>
<li>1 off-site backup, a cloud backup or physical backup at a friends house.</li>
</ul>
<h2 id="linux-docs_199_backups-copy-directory">Copy Directory</h2>
<p>Two baked-in commands are <code>scp</code> or <code>rsync</code>.</p>
<p>Here's an example with scp: <code>scp -r ./site user@server:/srv/web_apps</code>.</p>
<p><strong>rsync is typically recommended over scp.</strong></p>
<p><code>rsync</code> usually comes on Linux and MacOS, it is lightweight, fast, can detect
changes in files to do an incremental backup. </p>
<p>Commands: </p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Basic save file to another folder</span>
rsync<span class="w"> </span>-v<span class="w"> </span>/source/file/name.txt<span class="w"> </span>/dest/file

<span class="c1"># Use literal string (preserve string for special characters)</span>
rsync<span class="w"> </span>-v<span class="w"> </span><span class="s1">&#39;/source/file/na$me.txt&#39;</span><span class="w"> </span>/dest/file

<span class="c1"># Send multiple files</span>
rsync<span class="w"> </span>-v<span class="w"> </span>/source/file1.txt<span class="w"> </span>/source/file2.txt<span class="w"> </span><span class="s1">&#39;/dest&#39;</span>

<span class="c1"># Send over SSH</span>
rsync<span class="w"> </span>-av<span class="w"> </span>/source/file/name.txt<span class="w"> </span>user@server:/dest/file

<span class="c1"># Send over SSH with custom port</span>
rsync<span class="w"> </span>-avz<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;ssh -p 2222&quot;</span><span class="w"> </span>/source/file/name.txt<span class="w"> </span>user@server:/dest/file

<span class="c1"># Send over SSH with sudo command</span>
rsync<span class="w"> </span>-v<span class="w"> </span>--rsync-path<span class="o">=</span><span class="s2">&quot;sudo rsync&quot;</span><span class="w"> </span>yt_download_image.tar<span class="w"> </span>user@server:/srv/flask_yt_download

<span class="c1"># Send over entire directory</span>
rsync<span class="w"> </span>-avz<span class="w"> </span>/source/dir<span class="w"> </span>/dest/dir

<span class="c1"># Send all files in directory. Trailing slash. </span>
<span class="c1"># Trailing slash only matters on source, it doesn&#39;t matter on dest</span>
rsync<span class="w"> </span>-avz<span class="w"> </span>/source/dir/<span class="w"> </span>/dest/dir

<span class="c1"># actual use</span>
rsync<span class="w"> </span>-avz<span class="w"> </span>--rsync-path<span class="o">=</span><span class="s2">&quot;sudo rsync&quot;</span><span class="w"> </span>/Users/tyleranderson/PycharmProjects<span class="w"> </span>tyler@anderson.home:/srv/backup_media

<span class="c1">#  RSYNC FLAGS</span>
<span class="c1"># -v  verbose mode</span>
<span class="c1"># -a  archive mode (preserves permissions/timestamps)</span>
<span class="c1"># -z  compress files</span>
<span class="c1"># -e  specify remote shell command</span>
<span class="c1"># -r  recursive (copy subdirectories)</span>
<span class="c1"># -h  human-readable file sizes</span>
<span class="c1"># --progress  show progress</span>
<span class="c1"># --delete    remove files in dest not in source</span>
<span class="c1"># --exclude   exclude files (e.g., --exclude=&#39;*.log&#39; --exclude=&#39;/cache/&#39;)</span>
</code></pre></div></td></tr></table></div>
<h2 id="linux-docs_199_backups-tar-files">Tar Files</h2>
<p>A tar file <code>.tar</code> is an archive file that stores multiple files and 
directories together in one file, without compression. Very common
in Linux and Unix based systems. Common for backups and transfers.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Create tar file (best to use relative path instead of absolute)</span>
sudo<span class="w"> </span>tar<span class="w"> </span>-cvf<span class="w"> </span>archive.tar<span class="w"> </span>path/to/files/

<span class="c1"># Extract tar file</span>
sudo<span class="w"> </span>tar<span class="w"> </span>-xvf<span class="w"> </span>archive.tar

<span class="c1"># Create compressed tar file</span>
tar<span class="w"> </span>-czvf<span class="w"> </span>archive.tar.gz<span class="w"> </span>/path/to/files/

<span class="c1"># Extract compressed tar file</span>
tar<span class="w"> </span>-xzvf<span class="w"> </span>archive.tar.gz

<span class="c1"># List files in tar file</span>
tar<span class="w"> </span>-tvf<span class="w"> </span>archive.tar

<span class="c1"># Extract specific file from tar file</span>
tar<span class="w"> </span>-xvf<span class="w"> </span>archive.tar<span class="w"> </span>file.txt

<span class="c1">#  TAR FLAGS</span>
<span class="c1"># -c  create new archive</span>
<span class="c1"># -v  verbose</span>
<span class="c1"># -f  specify archive filename</span>
<span class="c1"># -x  extract</span>
<span class="c1"># -z  gzip compression</span>
</code></pre></div></td></tr></table></div>
<h2 id="linux-docs_199_backups-encryption">Encryption</h2>
<p><code>age</code> is a lightweight focused encryption software for files. 
It uses modern cryptography making it more secure, but less featured 
than something like <code>gpg</code>. Age  lets you use passwords or key files.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># </span>
<span class="c1">#  ENCRYPTION (AGE)</span>
<span class="c1"># </span>

<span class="c1"># Install age</span>
brew<span class="w"> </span>install<span class="w"> </span>age<span class="w">           </span><span class="c1"># macOS</span>
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>age<span class="w">       </span><span class="c1"># Linux</span>

<span class="c1"># Option 1: Password Encryption (simple)</span>
age<span class="w"> </span>-o<span class="w"> </span>myfile.txt.age<span class="w"> </span>-p<span class="w"> </span>myfile.txt
age<span class="w"> </span>-d<span class="w"> </span>myfile.txt.age<span class="w"> </span>&gt;<span class="w"> </span>myfile.txt

<span class="c1"># Option 2: Public/Private Key Encryption (secure)</span>
age-keygen<span class="w"> </span>-o<span class="w"> </span>~/.age-key.txt<span class="w">     </span><span class="c1"># create key file</span>
age<span class="w"> </span>-r<span class="w"> </span>PUBLIC_KEY<span class="w"> </span>-o<span class="w"> </span>myfile.txt.age<span class="w"> </span>myfile.txt
age<span class="w"> </span>-d<span class="w"> </span>-i<span class="w"> </span>~/.age-key.txt<span class="w"> </span>myfile.txt.age<span class="w"> </span>&gt;<span class="w"> </span>myfile.txt

<span class="c1"># Encrypt using key file directly</span>
age<span class="w"> </span>-r<span class="w"> </span><span class="k">$(</span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">1</span><span class="w"> </span>~/.age-key.txt<span class="k">)</span><span class="w"> </span>-o<span class="w"> </span>myfile.txt.age<span class="w"> </span>myfile.txt
age<span class="w"> </span>-d<span class="w"> </span>-i<span class="w"> </span>~/.age-key.txt<span class="w"> </span>myfile.txt.age<span class="w"> </span>&gt;<span class="w"> </span>myfile.txt

<span class="c1"># Encrypt directory (tar + age)</span>
tar<span class="w"> </span>-czf<span class="w"> </span>myfolder.tar.gz<span class="w"> </span>myfolder/
age<span class="w"> </span>-o<span class="w"> </span>myfolder.tar.gz.age<span class="w"> </span>-p<span class="w"> </span>myfolder.tar.gz

<span class="c1"># One-liner: tar and encrypt simultaneously</span>
tar<span class="w"> </span>-czf<span class="w"> </span>-<span class="w"> </span>myfolder/<span class="w"> </span><span class="p">|</span><span class="w"> </span>age<span class="w"> </span>-o<span class="w"> </span>myfolder.tar.gz.age<span class="w"> </span>-p

<span class="c1"># Decrypt and extract in one step</span>
age<span class="w"> </span>-d<span class="w"> </span>myfolder.tar.gz.age<span class="w"> </span><span class="p">|</span><span class="w"> </span>tar<span class="w"> </span>-xz

<span class="c1"># Manual decrypt</span>
age<span class="w"> </span>-d<span class="w"> </span>myfolder.tar.gz.age<span class="w"> </span>&gt;<span class="w"> </span>myfolder.tar.gz
tar<span class="w"> </span>-xzf<span class="w"> </span>myfolder.tar.gz
shred<span class="w"> </span>-u<span class="w"> </span>myfolder.tar.gz

<span class="c1">#  AGE FLAGS</span>
<span class="c1"># -o &lt;output&gt;     specify output file</span>
<span class="c1"># -d              decrypt</span>
<span class="c1"># -p              use password mode</span>
<span class="c1"># -r &lt;pubkey&gt;     encrypt with public key</span>
<span class="c1"># -i &lt;identity&gt;   specify private key for decryption</span>
</code></pre></div></td></tr></table></div>
<p>Other notes:</p>
<ul>
<li>The key file contains both public and private keys.</li>
<li>Encryption uses only the public key. </li>
<li>Decryption uses both keys</li>
</ul>
<h2 id="linux-docs_199_backups-removing-sensitive-data">Removing Sensitive Data</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># </span>
<span class="c1">#  REMOVING SENSITIVE DATA</span>
<span class="c1"># </span>

<span class="c1">#  HDD: Use shred</span>
shred<span class="w"> </span>-u<span class="w"> </span>secret.txt
shred<span class="w"> </span>-n<span class="w"> </span><span class="m">10</span><span class="w"> </span>secret.txt

<span class="c1"># -u  delete file after shredding</span>
<span class="c1"># -n  overwrite N times (default 3)</span>

<span class="c1">#  Directories: Use wipe</span>
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>wipe
wipe<span class="w"> </span>-r<span class="w"> </span>/path/to/directory/
wipe<span class="w"> </span>-r<span class="w"> </span>/path/to/directory/*<span class="w">  </span><span class="c1"># keep directory but delete contents</span>

<span class="c1">#  SSD: Use fstrim or srm</span>
sudo<span class="w"> </span>fstrim<span class="w"> </span>-v<span class="w"> </span>/<span class="w">              </span><span class="c1"># clears free space on SSD</span>

<span class="c1"># Secure delete tools</span>
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>secure-delete<span class="w">  </span><span class="c1"># Ubuntu/Debian</span>
brew<span class="w"> </span>install<span class="w"> </span>srm<span class="w">                </span><span class="c1"># macOS</span>

srm<span class="w"> </span>-v<span class="w"> </span>my_secret_file.txt<span class="w">       </span><span class="c1"># securely delete a file</span>
wipe<span class="w"> </span>-rf<span class="w"> </span>my_secret_folder/<span class="w">      </span><span class="c1"># securely delete a folder</span>


<span class="c1"># </span>
<span class="c1">#  IN PRACTICE</span>
<span class="c1"># </span>
<span class="c1"># Recommended workflow:</span>

<span class="c1"># - rsync  for incremental local backups</span>
<span class="c1"># - rclone  for cloud backups</span>
<span class="c1"># - syncthing  for live sync between devices (peer-to-peer)</span>

<span class="c1">#  Good routine:</span>
<span class="c1"># 1. Daily rsync to local drive</span>
<span class="c1"># 2. Daily/weekly rclone to cloud</span>

<span class="c1">#  Example cron jobs</span>
<span class="m">0</span><span class="w"> </span><span class="m">2</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>rsync<span class="w"> </span>-rv<span class="w"> </span>--delete<span class="w"> </span>/srv/plex_media<span class="w"> </span>/mnt/usb/plex_media_backup
<span class="m">0</span><span class="w"> </span><span class="m">3</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>rclone<span class="w"> </span>sync<span class="w"> </span>/srv/<span class="w"> </span>gdrive:server-backup<span class="w"> </span>--log-file<span class="o">=</span>/var/log/rclone.log

<span class="c1"># Setup rclone</span>
rclone<span class="w"> </span>config
</code></pre></div></td></tr></table></div></section></section>
                    <section class='print-page md-section' id='section-8' heading-number='8'>
                        <h1>Video Processing<a class='headerlink' href='#section-8' title='Permanent link'></a>
                        </h1>
                    <section class="print-page" id="video%20processing-docs_200_ffmpeg" heading-number="8.1"><h1 id="video%20processing-docs_200_ffmpeg-ffmpeg">FFmpeg</h1>
<p>ffmpeg is a video editing command tool. </p>
<h2 id="video%20processing-docs_200_ffmpeg-how-a-video-works">How a Video Works</h2>
<ol>
<li>A video file consists of a container (like MP4, MKV) and encoded video/audio streams inside.</li>
<li>The codec is what encodes (compresses) the video/audio when saving it and decodes (decompresses) it when playing it.</li>
</ol>
<h2 id="video%20processing-docs_200_ffmpeg-converting-a-video-file-transcoding">Converting a Video File (Transcoding)</h2>
<p>If you want to convert a video file from one format to another (e.g., MKV to MP4 or H.264 to H.265), 
you use transcoding software (like HandBrake, FFmpeg, or VLC). The process involves:</p>
<ol>
<li>Decoding (using the current codec).</li>
<li>Re-encoding (using a new codec or settings).</li>
<li>Packaging the video/audio into a new container format.</li>
</ol>
<p>For example:</p>
<ul>
<li>MKV (H.264 + AAC)  MP4 (H.264 + AAC)  Just a container change (remuxing, no transcoding needed).</li>
<li>MP4 (H.264)  MP4 (H.265)  A full re-encoding is required.</li>
</ul>
<p>So while codecs are a part of the conversion process, they don't handle file conversion by themselvesyou need transcoding software for that.</p>
<ul>
<li>
<p>Codec - software that compresses or decompresses media files (audio or video). Determines the encoding. 
Important for compression, compatability, and streaming efficiency.</p>
</li>
<li>
<p>Video Codecs - These compress video data to reduce file size while maintaining visual quality.</p>
</li>
<li>
<p>H.264 (AVC)  Most common, widely supported, good balance of quality and size.</p>
</li>
<li>H.265 (HEVC)  More efficient than H.264 (better quality at smaller sizes), but requires more processing power.</li>
<li>VP9  Open-source alternative to H.265, widely used on YouTube.</li>
<li>AV1  Newer, even better compression than VP9 and H.265, but requires more CPU power to decode.</li>
<li>
<p>MPEG-2  Older, used in DVDs and some broadcast TV.</p>
</li>
<li>
<p>Audio Codecs - These compress audio data for storage and streaming.</p>
</li>
<li>
<p>AAC  Common in MP4 files, better quality than MP3 at the same bitrate.</p>
</li>
<li>MP3  Universal compatibility, but lower efficiency.</li>
<li>Opus  High efficiency, used in VoIP and streaming.</li>
<li>FLAC  Lossless, used for high-quality music storage.</li>
<li>Dolby Digital (AC-3) / DTS  Used in surround sound systems.</li>
</ul>
<h2 id="video%20processing-docs_200_ffmpeg-codec-vs-container-mkv-mp4">Codec vs. Container (MKV, MP4)</h2>
<ul>
<li>Container formats (like MKV, MP4, AVI, MOV) hold video, audio, and subtitle tracks.</li>
<li>Codecs determine how the actual video and audio inside the container are compressed and played.</li>
<li>Example: An MP4 file can contain H.264 video + AAC audio.</li>
</ul>
<p>So, when choosing a video format, you need to consider both the container (MKV, MP4, etc.) and the codec (H.264, H.265, etc.).</p></section><section class="print-page" id="video%20processing-docs_200_streaming" heading-number="8.2"><h1 id="video%20processing-docs_200_streaming-streaming">Streaming</h1>
<p>The <strong>"best" streaming protocol</strong> depends on the use case. Heres a breakdown of whats ideal for different scenarios:</p>
<h3 id="video%20processing-docs_200_streaming-best-streaming-protocols-by-use-case"><strong>Best Streaming Protocols by Use Case</strong></h3>
<p><strong>On-Demand Video Streaming (e.g., Netflix, YouTube)</strong></p>
<ul>
<li><strong>Best:</strong> <strong>DASH (MPEG-DASH) or HLS</strong></li>
<li><strong>Why?</strong> Adaptive bitrate streaming (ABR) ensures smooth playback across different devices and network conditions.</li>
<li><strong>Used By:</strong> Netflix, YouTube (DASH), Apple (HLS), Amazon Prime Video (DASH + HLS)</li>
</ul>
<p><strong>Live Streaming (e.g., Twitch, YouTube Live)</strong></p>
<ul>
<li><strong>Best:</strong> <strong>HLS (Low-Latency), DASH (LL-DASH), or WebRTC for real-time interactivity</strong></li>
<li><strong>Why?</strong> HLS and DASH offer scalability, while WebRTC provides ultra-low latency for live interaction.</li>
<li><strong>Used By:</strong> Twitch (RTMP for ingest, HLS for playback), YouTube Live (DASH + HLS)</li>
</ul>
<p><strong>Real-Time Communication (e.g., Zoom, Google Meet)</strong></p>
<ul>
<li><strong>Best:</strong> <strong>WebRTC</strong></li>
<li><strong>Why?</strong> Peer-to-peer, ultra-low latency, no need for external servers.</li>
<li><strong>Used By:</strong> Google Meet, Zoom, Microsoft Teams</li>
</ul>
<p><strong>Professional Broadcast / Contribution (e.g., TV Networks, Sports)</strong></p>
<ul>
<li><strong>Best:</strong> <strong>SRT or RTMP (for ingest)</strong></li>
<li><strong>Why?</strong> SRT provides reliable, high-quality, low-latency transmission, while RTMP is still widely supported for ingestion.</li>
<li><strong>Used By:</strong> ESPN, news networks, live sports broadcasting</li>
</ul>
<hr />
<h3 id="video%20processing-docs_200_streaming-what-does-netflix-use"><strong>What Does Netflix Use?</strong></h3>
<p>Netflix uses <strong>MPEG-DASH</strong> for most of its streaming, alongside <strong>HLS for Apple devices</strong>. Their stack includes:</p>
<ul>
<li><strong>DASH (MPEG-DASH)</strong>  Adaptive bitrate streaming for optimal playback across devices.</li>
<li><strong>HLS (HTTP Live Streaming)</strong>  For Apple devices, since Apple mandates HLS.</li>
<li><strong>CDN Optimization</strong>  Uses its own <strong>Open Connect CDN</strong> to reduce latency and improve video delivery.</li>
<li><strong>Per-Title Encoding</strong>  Dynamically adjusts compression based on the content to optimize quality vs. bandwidth.</li>
</ul>
<p>So HLS can be used to stream an mp4 file to another device?</p>
<p>Yes, <strong>HLS (HTTP Live Streaming)</strong> can be used to stream an <strong>MP4 file</strong> to another device, but it requires some processing first. </p>
<h3 id="video%20processing-docs_200_streaming-how-hls-streams-an-mp4-file"><strong>How HLS Streams an MP4 File</strong></h3>
<p><strong>Segment the MP4 File</strong>  </p>
<ul>
<li>HLS requires the video to be split into small chunks (typically <code>.ts</code> files, though newer versions support fragmented MP4 <code>.m4s</code>).</li>
<li>A tool like <strong>FFmpeg</strong> can do this.</li>
</ul>
<p><strong>Create an M3U8 Playlist</strong>  </p>
<ul>
<li>HLS uses a <code>.m3u8</code> file (a playlist) that lists the segmented video files.</li>
<li>The player downloads and plays the segments in order.</li>
</ul>
<p><strong>Host the Segments &amp; Playlist on a Server</strong>  </p>
<ul>
<li>You need an <strong>HTTP server (e.g., Nginx, Apache, or a cloud service like S3)</strong> to serve the files.</li>
</ul>
<p><strong>Play the Stream on Another Device</strong>  </p>
<ul>
<li>Open the <code>.m3u8</code> URL in a compatible player (e.g., <strong>Safari, VLC, ExoPlayer, or hls.js in a browser</strong>).</li>
</ul>
<hr />
<h3 id="video%20processing-docs_200_streaming-example-convert-mp4-to-hls-using-ffmpeg"><strong>Example: Convert MP4 to HLS Using FFmpeg</strong></h3>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>ffmpeg<span class="w"> </span>-i<span class="w"> </span>input.mp4<span class="w"> </span>-codec:<span class="w"> </span>copy<span class="w"> </span>-start_number<span class="w"> </span><span class="m">0</span><span class="w"> </span>-hls_time<span class="w"> </span><span class="m">10</span><span class="w"> </span>-hls_list_size<span class="w"> </span><span class="m">0</span><span class="w"> </span>-f<span class="w"> </span>hls<span class="w"> </span>output.m3u8
</code></pre></div></td></tr></table></div>
- <code>-hls_time 10</code>  Splits video into <strong>10-second</strong> segments.
- <code>-hls_list_size 0</code>  Keeps all segments in the playlist.
- <code>output.m3u8</code>  The playlist file.</p>
<h3 id="video%20processing-docs_200_streaming-how-to-serve-the-stream"><strong>How to Serve the Stream</strong></h3>
<ol>
<li>Move the <code>output.m3u8</code> and <code>.ts</code> files to a web server.</li>
<li>
<p>Access the stream via:<br />
   <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>http://yourserver.com/path/output.m3u8
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p>Play it in:</p>
</li>
</ol>
<p><strong>Web browser</strong> with <code>hls.js</code> OR
   <strong>VLC media player</strong> (Open Network Stream) OR
   <strong>iOS Safari (built-in HLS support)</strong></p>
<hr />
<h2 id="video%20processing-docs_200_streaming-dash-command-with-ffmpeg"><strong> DASH Command with FFmpeg</strong></h2>
<p>Run:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>ffmpeg<span class="w"> </span>-i<span class="w"> </span>vid_file.mp4<span class="w"> </span>-codec:<span class="w"> </span>copy<span class="w"> </span>-map<span class="w"> </span><span class="m">0</span><span class="w"> </span>-f<span class="w"> </span>dash<span class="w"> </span>output.mpd
</code></pre></div></td></tr></table></div></p>
<h3 id="video%20processing-docs_200_streaming-explanation-of-flags"><strong> Explanation of Flags:</strong></h3>
<ul>
<li><code>-i vid_file.mp4</code>  Input video file.</li>
<li><code>-codec: copy</code>  Copies the streams without re-encoding.</li>
<li><code>-map 0</code>  Ensures all streams (audio &amp; video) are included.</li>
<li><code>-f dash</code>  Specifies DASH output format.</li>
<li><code>output.mpd</code>  The DASH manifest file.</li>
</ul>
<hr />
<h2 id="video%20processing-docs_200_streaming-dash-output-files"><strong> DASH Output Files</strong></h2>
<p>This will generate:</p>
<ul>
<li><strong><code>output.mpd</code></strong>  The DASH manifest (index) file.</li>
<li><strong>Segmented <code>.m4s</code> video/audio chunks</strong>.</li>
</ul>
<hr />
<h2 id="video%20processing-docs_200_streaming-serving-dash-with-python-http-server"><strong> Serving DASH with Python HTTP Server</strong></h2>
<p>Just like HLS, you can serve DASH using:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>python3<span class="w"> </span>-m<span class="w"> </span>http.server<span class="w"> </span><span class="m">9000</span>
</code></pre></div></td></tr></table></div>
<p>Then play in VLC:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>http://localhost:9000/output.mpd
</code></pre></div></td></tr></table></div>
 <strong>VLC supports DASH</strong>, so this should work without additional configuration.</p>
<hr />
<h2 id="video%20processing-docs_200_streaming-play-dash-in-a-browser"><strong> Play DASH in a Browser</strong></h2>
<p>Browsers dont natively support DASH, so you need a <strong>DASH player</strong> like <a href="https://reference.dashif.org/dash.js/latest/samples/getting-started/basic-example.html">dash.js</a>.</p>
<p>To embed DASH in HTML, use:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">video</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;dashPlayer&quot;</span> <span class="na">controls</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">source</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://localhost:9000/output.mpd&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;application/dash+xml&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">video</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdn.dashjs.org/latest/dash.all.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">player</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">dashjs</span><span class="p">.</span><span class="nx">MediaPlayer</span><span class="p">().</span><span class="nx">create</span><span class="p">();</span>
<span class="w">    </span><span class="nx">player</span><span class="p">.</span><span class="nx">initialize</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;#dashPlayer&quot;</span><span class="p">),</span><span class="w"> </span><span class="s2">&quot;http://localhost:9000/output.mpd&quot;</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div></p>
<hr />
<h2 id="video%20processing-docs_200_streaming-advanced-dash-multi-bitrate-encoding"><strong> Advanced DASH: Multi-Bitrate Encoding</strong></h2>
<p>To <strong>support adaptive streaming</strong>, generate multiple bitrates:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code>ffmpeg<span class="w"> </span>-i<span class="w"> </span>vid_file.mp4<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-map<span class="w"> </span><span class="m">0</span>:v<span class="w"> </span>-map<span class="w"> </span><span class="m">0</span>:a<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-b:v:0<span class="w"> </span>2000k<span class="w"> </span>-b:v:1<span class="w"> </span>1000k<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-s:v:0<span class="w"> </span>1920x1080<span class="w"> </span>-s:v:1<span class="w"> </span>1280x720<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-c:v<span class="w"> </span>libx264<span class="w"> </span>-c:a<span class="w"> </span>aac<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-f<span class="w"> </span>dash<span class="w"> </span>-seg_duration<span class="w"> </span><span class="m">4</span><span class="w"> </span>-use_timeline<span class="w"> </span><span class="m">1</span><span class="w"> </span>-use_template<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>output.mpd
</code></pre></div></td></tr></table></div>
<p> <strong>This creates multiple video quality options</strong> that DASH players can switch between dynamically.</p>
<hr />
<h3 id="video%20processing-docs_200_streaming-summary"><strong> Summary</strong></h3>
<ul>
<li><strong>Basic DASH:</strong> <code>ffmpeg -i vid_file.mp4 -codec: copy -map 0 -f dash output.mpd</code></li>
<li><strong>Serve DASH:</strong> <code>python3 -m http.server 9000</code></li>
<li><strong>Play in VLC:</strong> <code>http://localhost:9000/output.mpd</code></li>
<li><strong>Play in Browser:</strong> Use <code>dash.js</code></li>
<li><strong>Adaptive Streaming:</strong> Encode multiple bitrates with <code>-b:v</code> and <code>-s:v</code></li>
</ul></section></section>
                    <section class='print-page md-section' id='section-9' heading-number='9'>
                        <h1>AI<a class='headerlink' href='#section-9' title='Permanent link'></a>
                        </h1>
                    <section class="print-page" id="ai-docs_105_local_llm" heading-number="9.1"><h1 id="ai-docs_105_local_llm-ollama">Ollama</h1>
<p>Ollama is an open-source LLM runtime environment.</p>
<h2 id="ai-docs_105_local_llm-run-with-docker-compose">Run with Docker Compose</h2>
<p>Here is a docker compose that runs it all. 
Save this to a file called <code>docker-compose.yaml</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ollama</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ollama/ollama:latest</span>
<span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ollama</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;11434:11434&quot;</span><span class="w">   </span><span class="c1"># Ollama API exposed</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ollama_data:/root/.ollama</span><span class="w">  </span><span class="c1"># Persist models</span>

<span class="w">  </span><span class="nt">open-webui</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ghcr.io/open-webui/open-webui:main</span>
<span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">open-webui</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;3000:8080&quot;</span><span class="w">   </span><span class="c1"># WebUI runs here</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">OLLAMA_API_BASE_URL=http://ollama:11434</span>
<span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ollama</span>

<span class="nt">volumes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ollama_data</span><span class="p">:</span>
</code></pre></div></td></tr></table></div>
<p>Run the docker compose file with <code>docker compose up -d</code>.</p>
<h2 id="ai-docs_105_local_llm-access-via-webui">Access via WebUI</h2>
<p>You can go to <a href="https://localhost:3000">https://localhost:3000</a> to use the web ui.</p>
<h2 id="ai-docs_105_local_llm-api-call">API Call</h2>
<h3 id="ai-docs_105_local_llm-raw-api-call">Raw API Call</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="err">### Generate text with llama3</span>
<span class="err">POST http://localhost:11434/api/generate</span>
<span class="err">Content-Type: application/json</span>

<span class="err">{</span>
<span class="err">  &quot;model&quot;: &quot;llama3&quot;,</span>
<span class="err">  &quot;prompt&quot;: &quot;Write a haiku about data pipelines&quot;</span>
<span class="err">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="ai-docs_105_local_llm-python-api-call">Python API Call</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>


<span class="k">def</span><span class="w"> </span><span class="nf">ask_ai</span><span class="p">(</span><span class="n">prompt</span><span class="p">):</span>
<span class="w">   </span><span class="sd">&quot;&quot;&quot;Ask local AI model a question and get a streaming response.&quot;&quot;&quot;</span>
   <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;http://localhost:11434/api/generate&quot;</span>
   <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
       <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;llama3&quot;</span><span class="p">,</span>
       <span class="s2">&quot;prompt&quot;</span><span class="p">:</span> <span class="n">prompt</span>
   <span class="p">}</span>
   <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">}</span>
   <span class="k">return</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">ask_ai</span><span class="p">(</span><span class="s2">&quot;What is the number pi?&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">iter_lines</span><span class="p">():</span>
   <span class="k">if</span> <span class="n">line</span><span class="p">:</span>
       <span class="n">decoded_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>
       <span class="nb">print</span><span class="p">(</span><span class="n">decoded_json</span><span class="p">[</span><span class="s1">&#39;response&#39;</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h2 id="ai-docs_105_local_llm-download-other-models">Download Other Models</h2>
<p>Available models can be found here:
https://registry.ollama.ai/search</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="err">POST http://localhost:11434/api/pull</span>
<span class="err">Content-Type: application/json</span>

<span class="err">{</span>
<span class="err">  &quot;name&quot;: &quot;mistral&quot;</span>
<span class="err">}</span>
</code></pre></div></td></tr></table></div>
<p>or download a model with the docker command: 
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># download mistral model</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>ollama<span class="w"> </span>ollama<span class="w"> </span>pull<span class="w"> </span>mistral

<span class="c1"># download llama3 model</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>ollama<span class="w"> </span>ollama<span class="w"> </span>pull<span class="w"> </span>llama3
</code></pre></div></td></tr></table></div></p>
<p>For more info on the REST API definition: https://github.com/ollama/ollama/blob/main/docs/api.md</p></section><section class="print-page" id="ai-mcp" heading-number="9.2"><h1 id="ai-mcp-mcp">MCP</h1>
<hr />
<ul>
<li>Its the <strong>decision-making + orchestration layer</strong> between an LLM and the outside world.</li>
<li>Whether its a server, a local script, or a function call depends on your use case.</li>
</ul>
<hr />
<h2 id="ai-mcp-mcp-is-simply-a-decision-making-ai-process">MCP is simply a decision making AI process.</h2>
<hr />
<p>Conceptually, <strong>MCP is simply a decisionmaking AI process</strong> that:</p>
<ol>
<li><strong>Receives a request</strong> from the user.</li>
<li><strong>Understands the available capabilities</strong> (tools, APIs, data).</li>
<li><strong>Chooses what to do</strong>  which tools to use, in what order, and with what parameters.</li>
<li><strong>Executes those tools</strong> and feeds results back into the reasoning loop.</li>
<li><strong>Produces the final answer or action</strong>.</li>
</ol>
<hr />
<p>You can think of it like:</p>
<ul>
<li><strong>Without MCP</strong>  LLM just chats, no actions.</li>
<li><strong>With MCP</strong>  LLM chats <em>and</em> decides how to use other resources to accomplish a goal.</li>
</ul>
<p>Whether it lives in:</p>
<ul>
<li>A <strong>local script</strong></li>
<li>A <strong>web server</strong></li>
<li>A <strong>cloud service</strong></li>
</ul>
<p>doesnt change the concept  the MCP part is the <strong>orchestration brain</strong>.</p>
<hr />
<h2 id="ai-mcp-use-cases">Use Cases</h2>
<hr />
<ul>
<li>MCP is a great decision-maker when things are ambiguous or user-driven.</li>
<li>But in a strict, well-bounded pipeline, procedural code will always win for speed, cost, and control.</li>
</ul>
<hr />
<h2 id="ai-mcp-simple-how-to">Simple How-To</h2>
<hr />
<ol>
<li>Pick your LLM you want to use for MCP.</li>
<li>Define the tools you want the model to have access to (python functions).</li>
<li>Give the model access to those tools.</li>
<li>Run.</li>
</ol>
<p>Demo....</p>
<hr />
<h2 id="ai-mcp-what-kind-of-server-is-an-mcp-server">What kind of server is an MCP server?</h2>
<hr />
<p>An <strong>MCP server</strong> is not as complex as you might think. It's really just:</p>
<blockquote>
<p>A <strong>web server</strong> that hosts your MCP logic and exposes it over an API so other apps (or people) can use it.</p>
</blockquote>
<hr />
<h3 id="ai-mcp-why-you-might-make-mcp-into-a-server">Why you might make MCP into a server</h3>
<ul>
<li>You want <strong>multiple clients</strong> (web apps, mobile apps, scripts) to use the same tools and orchestration logic.</li>
<li>You want a <strong>centralized place</strong> to manage:<ul>
<li>API keys</li>
<li>Data sources</li>
<li>Permissions</li>
<li>Logging and monitoring of tool calls</li>
</ul>
</li>
<li>You want it <strong>always running</strong> instead of firing up the Python script each time.</li>
</ul>
<hr />
<h3 id="ai-mcp-what-it-looks-like">What it looks like</h3>
<p>If we turned our current LangGraph example into a server:</p>
<ul>
<li>The LangGraph agent would still decide which tools to run.</li>
<li>The tools would still be Python functions calling APIs or databases.</li>
<li>But instead of calling <code>.invoke()</code> in a local script, youd send a POST request like:</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="err">POST /ask</span>
<span class="err">{</span>
<span class="err">  &quot;question&quot;: &quot;What&#39;s the population of Chicago and the weather there?&quot;</span>
<span class="err">}</span>
</code></pre></div></td></tr></table></div>
<p>And the server would respond with the final text answer.</p>
<hr />
<p>So yes  an MCP server is basically:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Web server + MCP logic + LLM + tools
</code></pre></div></td></tr></table></div>
<p>The MCP part is still the <strong>decision-making layer</strong>, the server part is just about how its deployed.</p>
<hr />
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">MCP Demo</span>
<span class="sd">--------</span>

<span class="sd">This is a demo of how to use LangChain with MCP.</span>

<span class="sd">To run this demo, first install the dependencies: ``uv add langchain-anthropic python-dotenv langgraph``</span>


<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dotenv</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_dotenv</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">langchain_anthropic</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChatAnthropic</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">langchain_core.tools</span><span class="w"> </span><span class="kn">import</span> <span class="n">tool</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.prebuilt</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_react_agent</span>

<span class="n">load_dotenv</span><span class="p">()</span>

<span class="c1"># 1. Define your LLM</span>
<span class="n">llm</span> <span class="o">=</span> <span class="n">ChatAnthropic</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-opus-20240229&quot;</span><span class="p">,</span>
    <span class="n">api_key</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;ANTHROPIC_API_KEY&quot;</span><span class="p">),</span>
    <span class="n">temperature</span><span class="o">=</span><span class="mi">0</span>  <span class="c1"># tells the llm how varied responses should be. 0=always same answer (highest probability).</span>
<span class="p">)</span>

<span class="c1"># 2. Define a tool</span>
<span class="nd">@tool</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_weather</span><span class="p">(</span><span class="n">city</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets the weather for a given city.&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[Tool] Getting weather for </span><span class="si">{</span><span class="n">city</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;The weather in </span><span class="si">{</span><span class="n">city</span><span class="si">}</span><span class="s2"> is sunny.&quot;</span>

<span class="nd">@tool</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_population</span><span class="p">(</span><span class="n">city</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets the population of a given city.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;The population of </span><span class="si">{</span><span class="n">city</span><span class="si">}</span><span class="s2"> is about 3 million.&quot;</span>


<span class="nd">@tool</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_latitude_and_longitude</span><span class="p">(</span><span class="n">city</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets the latitude and longitude of a given city.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;The population of </span><span class="si">{</span><span class="n">city</span><span class="si">}</span><span class="s2"> is about 3 million.&quot;</span>



<span class="c1"># 3. Create the agent (LangGraph style)</span>
<span class="n">agent</span> <span class="o">=</span> <span class="n">create_react_agent</span><span class="p">(</span><span class="n">llm</span><span class="p">,</span> <span class="p">[</span><span class="n">get_weather</span><span class="p">,</span> <span class="n">get_population</span><span class="p">,</span> <span class="n">get_latitude_and_longitude</span><span class="p">],</span> <span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># 4. Invoke it</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">agent</span><span class="o">.</span><span class="n">invoke</span><span class="p">({</span><span class="s2">&quot;messages&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;What is the weather like in San Francisco?.&quot;</span><span class="p">}]})</span>

<span class="c1"># Get the last message</span>
<span class="n">last_message</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;messages&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">last_message</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</code></pre></div></td></tr></table></div></section></section>
                    <section class='print-page md-section' id='section-10' heading-number='10'>
                        <h1>Low-Level<a class='headerlink' href='#section-10' title='Permanent link'></a>
                        </h1>
                    <section class="print-page" id="low%20level-foundations" heading-number="10.1"><h1 id="low%20level-foundations-foundations"> Foundations</h1>
<ul>
<li><strong>Binary &amp; Hexadecimal</strong>  how computers represent data.</li>
<li><strong>Boolean logic &amp; gates</strong>  the math of 0s and 1s.</li>
<li><strong>Memory addressing</strong>  how data lives in RAM and how the CPU finds it.</li>
</ul>
<hr />
<h3 id="low%20level-foundations-cpu-instructions"> CPU &amp; Instructions</h3>
<ul>
<li><strong>Assembly language</strong>  the CPUs direct instructions (add, move, jump).</li>
<li><strong>Instruction set architectures (ISA)</strong>  x86 vs ARM vs RISC-V.</li>
<li><strong>Registers &amp; stack</strong>  tiny but super-fast memory inside the CPU.</li>
<li><strong>Interrupts</strong>  how hardware says hey CPU, stop and listen to me.</li>
</ul>
<hr />
<h3 id="low%20level-foundations-operating-system-concepts"> Operating System Concepts</h3>
<ul>
<li><strong>System calls</strong>  how user programs ask the OS to do privileged work (like file access).</li>
<li><strong>Processes &amp; threads</strong>  how the OS runs multiple programs at once.</li>
<li><strong>Virtual memory</strong>  how programs see their own memory space, even though RAM is shared.</li>
<li><strong>Scheduling</strong>  how the OS decides which process runs next.</li>
<li><strong>Device drivers</strong>  how the OS talks to hardware.</li>
</ul>
<hr />
<h3 id="low%20level-foundations-hardware-io"> Hardware &amp; I/O</h3>
<ul>
<li><strong>Buses &amp; ports</strong>  how components (CPU, RAM, GPU, disk) communicate.</li>
<li><strong>Storage devices</strong>  how disks store and retrieve data.</li>
<li><strong>Networking</strong>  packets, NICs, how TCP/IP actually leaves your computer.</li>
<li><strong>Keyboard/mouse (HID), display, GPU basics</strong>  common hardware roles.</li>
</ul>
<hr />
<h3 id="low%20level-foundations-systems-programming"> Systems Programming</h3>
<ul>
<li><strong>Memory management</strong>  stack vs heap, allocation, fragmentation.</li>
<li><strong>Pointers &amp; references</strong>  how languages like C and Rust directly manipulate memory.</li>
<li><strong>Concurrency</strong>  threads, locks, atomics, deadlocks.</li>
<li><strong>File systems</strong>  how bytes on disk become folders/files.</li>
<li><strong>Compilers &amp; interpreters</strong>  how code becomes machine instructions.</li>
</ul>
<hr />
<h3 id="low%20level-foundations-cool-projects-to-learn-by-doing"> Cool Projects to Learn By Doing</h3>
<ul>
<li>Write a tiny program in <strong>assembly</strong>.</li>
<li>Implement a <strong>toy memory allocator</strong> in C or Rust.</li>
<li>Build a very simple <strong>command-line shell</strong>.</li>
<li>Follow an OS tutorial (like write your own kernel in Rust  <a href="https://os.phil-opp.com/">Phil Opps blog</a>).</li>
<li>Write a basic <strong>network packet sniffer</strong>.</li>
</ul></section><section class="print-page" id="low%20level-drivers" heading-number="10.2"><h1 id="low%20level-drivers-drivers">Drivers</h1>
<p>A driver is a special kind of program that acts as the "translator"
between the OS and a piece of hardware.</p>
<p>The hardware speaks its own low-level language (signals, registers, protocols).
The OS needs a way to understand that language in a consistent way.</p>
<p>Because it needs to interact with the OS, good drivers are written with
a language that compiles to machine code (C, Rust, Zig, etc.).</p>
<h2 id="low%20level-drivers-when">When</h2>
<p>The only time a developer would need to create a driver is if there is
new hardware. Maybe a brand new hardware your company made or that you
invented. This is because it requires deep knowledge of how the hardware 
works internally.</p>
<p>Creating drivers falls more into systems engineering/hardware engineering.</p>
<p><strong>Summary: Make hardware? You'll need to make drivers...</strong></p></section></section><section class="print-page" id="rust-rust01" heading-number="11"><h1 id="rust-rust01-rust-notes">Rust Notes</h1>
<h2 id="rust-rust01-table-of-contents">Table of Contents</h2>
<ol>
<li><a href="#rust-rust01-1-cargo">Cargo</a></li>
<li><a href="#rust-rust01-">Running a Program - Detailed</a></li>
<li><a href="#rust-rust01-3-rust-language-basics">Rust Basics</a><ul>
<li><a href="#rust-rust01-data-types">Data Types</a></li>
<li><a href="#rust-rust01-variables">Variables</a></li>
<li><a href="#rust-rust01-references">References</a></li>
<li><a href="#rust-rust01-shadowing">Shadowing</a></li>
<li><a href="#rust-rust01-scope">Scope</a></li>
<li><a href="#rust-rust01-">Statements &amp; Expressions</a></li>
<li><a href="#rust-rust01-functions">Functions</a></li>
<li><a href="#rust-rust01-returning-from-function">Returning from Function</a></li>
<li><a href="#rust-rust01-if-expressions">If Expressions</a></li>
<li><a href="#rust-rust01-loops">Loops</a></li>
<li><a href="#rust-rust01-comments">Comments</a></li>
</ul>
</li>
<li><a href="#rust-rust01-4-ownership">Ownership</a><ul>
<li><a href="#rust-rust01-ownership-behaviors">Ownership Rules</a></li>
<li><a href="#rust-rust01-references-and-pointers">References, Pointers, and Borrowing</a></li>
<li><a href="#rust-rust01-moving-variables">Moving Variables</a></li>
<li><a href="#rust-rust01-">Copying Variables</a></li>
<li><a href="#rust-rust01-dangling-references">Dangling References</a></li>
<li><a href="#rust-rust01-side-note-stack-and-heap">Stack and Heap</a></li>
</ul>
</li>
<li><a href="#rust-rust01-5-structs">Structs</a></li>
<li><a href="#rust-rust01-6-enums">Enums</a></li>
<li><a href="#rust-rust01-7-managing-projects">Managing Projects</a></li>
<li><a href="#rust-rust01-8-collections-data-structures">Collections</a></li>
<li><a href="#rust-rust01-9-error-handling">Error Handling</a></li>
<li><a href="#rust-rust01-10-generic-types-traits-lifetimes">Generics</a></li>
</ol>
<p>Official Docs: https://doc.rust-lang.org/book/ch01-03-hello-cargo.html</p>
<h2 id="rust-rust01-1-cargo">1. Cargo</h2>
<p>Cargo is Rusts build system and package manager.</p>
<p>A rust project will have the following files:
* src/
    * main.rs
* Cargo.toml
* .gitignore
* .git</p>
<p>Create a project in new directory: <code>cargo new project_name</code> \
Create a project in existing directory: <code>cargo init</code></p>
<p><strong>Cargo.toml</strong> is the config file for your project and looks like this:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">[package]</span><span class="w">  </span><span class="c1"># SECTION HEADING</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;rust_learning&quot;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.1.0&quot;</span>
<span class="n">edition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;2021&quot;</span>

<span class="c1"># See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html</span>

<span class="k">[dependencies]</span><span class="w">  </span><span class="c1"># PACKAGE DEPENDENCIES - KNOWN AS CRATES</span>
</code></pre></div></td></tr></table></div>
<h3 id="rust-rust01-file-structure">File Structure</h3>
<p>Cargo expects your code to live in the src folder.
The top-level project directory should only be used for README files, licenses, config files,
and other things not directly related to your code.</p>
<h3 id="rust-rust01-create-and-run-w-cargo">Create and Run w/ Cargo:</h3>
<ol>
<li>Create a rust project
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>cargo new project_name
cd project_name
</code></pre></div></td></tr></table></div></li>
<li>Update <strong>main.rs</strong> files in src folder. This the source code of your project.</li>
<li>Compile and run <code>cargo run</code></li>
<li>To build non-debug file <code>cargo build --release</code></li>
</ol>
<hr>

<p><a href="#rust-rust01-table-of-contents">Back to Top</a></p>
<h2 id="rust-rust01-2-running-a-program-detailed">2. Running a Program - Detailed</h2>
<h5 id="rust-rust01-build-process">Build Process</h5>
<p>When your project was created with cargo, compile the project with: <code>cargo build</code>.
The default build made is debug, so cargo puts your file .exe file into the following directory
<code>./target/debug/&lt;filename&gt;.exe</code></p>
<p>But this is not very efficient.  Instead of compiling and running in two steps, we can do both with: <code>cargo run</code></p>
<h5 id="rust-rust01-compile-check">Compile Check</h5>
<p>You can also check if your code will compile, but not creating an .exe file, by running: <code>cargo check</code></p>
<h5 id="rust-rust01-build-profiles-dev-and-release">Build Profiles, Dev and Release</h5>
<p>When your project is finally ready for release, you can use <code>cargo build --release</code> to compile it with optimizations.
This command will create an executable in <code>target/release</code> instead of <code>target/debug</code>.
The optimizations make your Rust code run faster, but turning them on lengthens the time it takes for your
program to compile. This is why there are two different profiles:
1. Development, when you want to rebuild quickly and often
2. Building the final program youll give to a user that wont be rebuilt repeatedly and that will run as fast as possible.</p>
<h5 id="rust-rust01-benchmarking">Benchmarking</h5>
<p>If youre benchmarking your codes execution time, be sure to run <code>cargo build --release</code> and benchmark with the executable in <code>target/release</code>.</p>
<h5 id="rust-rust01-cargolock">Cargo.lock</h5>
<p>Running cargo build for the first time also causes Cargo to create a new file at the top level: Cargo.lock. This file keeps track of the exact versions of dependencies in your project. This project doesnt have dependencies, so the file is a bit sparse. You wont ever need to change this file manually; Cargo manages its contents for you.</p>
<p>From <a href="https://doc.rust-lang.org/book/ch01-03-hello-cargo.html?search=">https://doc.rust-lang.org/book/ch01-03-hello-cargo.html?search=</a></p>
<h3 id="rust-rust01-running-with-rustc">Running with <code>rustc</code></h3>
<p><code>rustc</code> is the basic rust compiler.  It is not recommended to use this for building projects,
but it is useful for testing code.</p>
<p><code>rustc filename.rs</code> will create the .exe file.<br />
You can then run the <code>./filename.exe</code> file, or you can run a command in the terminal.
On Windows, when the file is compiled, there is a .pdb file created which is debugging information.</p>
<hr>

<p><a href="#rust-rust01-table-of-contents">Back to Top</a></p>
<h2 id="rust-rust01-3-rust-language-basics">3. Rust Language Basics</h2>
<h4 id="rust-rust01-data-types">Data Types</h4>
<p>Rust is a statically typed language, which means that it must know the types of all variables at compile time.</p>
<ul>
<li>
<p>Scalar Types - single value types</p>
<ul>
<li>Integers<ul>
<li>Signed (has a negative and positive)</li>
<li>i8, i16, i32, i64, i128, isize</li>
</ul>
</li>
<li>Unsigned (only positive)<ul>
<li>u8, u16, u32, u64, u128, usize</li>
</ul>
</li>
<li>Floating-Point Numbers<ul>
<li>f32, f64 with f64 being the default. Always signed.</li>
</ul>
</li>
<li>Booleans<ul>
<li>bool (true, false)</li>
</ul>
</li>
<li>Characters<ul>
<li>char (single quotes)
  <code>rust
fn main() {
    let c = 'z';
    let z: char = ''; // with explicit type annotation
    let heart_eyed_cat = '';
}</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>Compound Types - grouped values</p>
<ul>
<li>Tuples<ul>
<li>Fixed length, non-mutable, can contain different types.</li>
<li>Parenthesis <code>let tup = (500, 6.4, 1);</code></li>
<li>Can destructure a tuple: <code>let (x, y, z) = tup;</code></li>
<li>Can access a tuple by index:
  <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mf">6.4</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">five_hundred</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">six_point_four</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div></li>
</ul>
</li>
<li>Arrays<ul>
<li>Fixed length, non-mutable, must contain same type.</li>
<li>Square brackets <code>let a = [1, 2, 3, 4, 5];</code></li>
<li>Can access an array by index: <code>let first = a[0];</code></li>
<li>Arrays are useful when you want your data allocated on the stack rather than the heap. or when you want to ensure you always have a fixed number of elements</li>
<li>An array isnt as flexible as the vector type, though. A vector is a similar collection type provided by the standard library that is allowed to grow or shrink in size. If youre unsure whether to use an array or a vector, chances are you should use a vector.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="rust-rust01-variables">Variables</h4>
<p>Variables are created by using the let keyword: <code>let x = 5;</code>
Variables are immutable by default.  To make a variable mutable, use the mut keyword: <code>let mut x = 5;</code></p>
<h4 id="rust-rust01-references">References</h4>
<p>Using a reference: <code>read_line(&amp;mut x)</code>. The <code>&amp;</code> before a variable name indicates that its a reference.
This gives you a way to access one piece of data without needing to copy that data into memory multiple times.
References are also immutable by default.</p>
<h4 id="rust-rust01-shadowing">Shadowing</h4>
<p>Overwriting a variable instead of making a new one.</p>
<h4 id="rust-rust01-scope">Scope</h4>
<p>Scope is the area of code where a variable is valid.  This is usually expressed within curly braces:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Outer scope</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">outer_variable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="c1">// x is valid from here until the end of the function</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Inner scope</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">inner_variable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span><span class="w"> </span><span class="c1">// y is valid from here until the end of the inner scope</span>
<span class="w">        </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;inner_variable: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">inner_variable</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// You can access outer variables from inner scopes</span>
<span class="w">        </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;outer_variable: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">outer_variable</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// inner_variable is not valid here</span>
<span class="w">    </span><span class="c1">// we can still access outer_variable here</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;outer_variable: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">outer_variable</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
<h4 id="rust-rust01-statements-expressions">Statements &amp; Expressions</h4>
<ul>
<li><strong>Statements</strong> are instructions that perform some action and do not return a value.<ul>
<li>Functions</li>
<li>Setting variables</li>
<li>Loops</li>
<li>Note: statements in rust must end with a semicolon.</li>
</ul>
</li>
<li><strong>Expressions</strong> evaluate to a resultant value. Expressions do not end in semicolon.<ul>
<li>5</li>
<li>10+6</li>
<li>Calling a function that returns</li>
<li>Calling a macro</li>
<li>If expressions</li>
<li>Note: expressions can be part of statements (let x = 6; 6 is an expression)</li>
<li>Note: expressions that are followed by a semicolon are treated as statements</li>
</ul>
</li>
</ul>
<h4 id="rust-rust01-functions">Functions</h4>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Hello, world!&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
Functions are a central design of rust. The main function will always be the first code to run.</p>
<h4 id="rust-rust01-returning-from-function">Returning from Function</h4>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">repeat_value</span><span class="p">(</span><span class="n">i</span><span class="p">:</span><span class="w"> </span><span class="kt">i32</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">i32</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">i</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
To return a value from a function, you need to have the arrow and return type.
The last will be what a function returns if it has a return type.
You can also return early with the return keyword
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">repeat_value</span><span class="p">(</span><span class="n">i</span><span class="p">:</span><span class="w"> </span><span class="kt">i32</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">i32</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">i</span><span class="o">+</span><span class="mi">5</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">i</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
<p>If a function will not return anything you can exclude the arrow and return type.
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">just_print</span><span class="p">(</span><span class="n">i</span><span class="p">:</span><span class="w"> </span><span class="kt">i32</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;i: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
<h4 id="rust-rust01-if-expressions">If Expressions</h4>
<p>Standard if expressions, pretty similar to python.  Be sure to put the contents in the curly braces.
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">if_control</span><span class="p">(</span><span class="n">i</span><span class="p">:</span><span class="w"> </span><span class="kt">i32</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">i32</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">i</span><span class="o">+</span><span class="mi">5</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">i</span><span class="o">-</span><span class="mi">5</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">i</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
<p>If statements can also be used on the right side of a variable.
This is because if statements evaluate to a value and are actually called <strong><a href="#rust-rust01-statements--expressions">if expressions</a></strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">condition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">condition</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="mi">5</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="mi">6</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;The value of number is: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">number</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="rust-rust01-loops">Loops</h4>
<p>There are 3 kinds of loops:
1. Loop
    1. Infinite loop - continuously execute something until a condition is met and then either use the continue or break keyword.
   <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">loop</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;again!&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
   You can return values from a loop by using break.
    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">counter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">loop</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">counter</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">counter</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">break</span><span class="w"> </span><span class="n">counter</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;The result is {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
<p><strong>Loop labels</strong> help with control flow of multiple loops. The default for break is to break the inner most loop. You can
   use loop labels to break out of higher loops within inner loops
    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">remaining</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<span class="w">    </span><span class="o">&#39;</span><span class="na">outer_loop</span><span class="p">:</span><span class="w"> </span><span class="nc">loop</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Count = {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">count</span><span class="p">);</span>
<span class="w">        </span><span class="k">loop</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">count</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">            </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Loop {} of {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">count</span><span class="p">,</span><span class="w"> </span><span class="n">remaining</span><span class="p">);</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">remaining</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">break</span><span class="w"> </span><span class="nl">&#39;outer_loop</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;End of program&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
<ol>
<li>
<p>While - Good for looping until a condition is met.
    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}!&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">number</span><span class="p">);</span>
<span class="w">        </span><span class="n">number</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;LIFTOFF!!!&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p>For - Good for looping through a collection
    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p">];</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">iter</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;the value is: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">element</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
</li>
</ol>
<h3 id="rust-rust01-comments">Comments</h3>
<p><code>//</code> just like javascript</p>
<hr>

<p><a href="#rust-rust01-table-of-contents">Back to Top</a></p>
<h2 id="rust-rust01-4-ownership">4. Ownership</h2>
<p>Three rules of ownership:
1. Each value in Rust has a variable thats called its owner.
2. There can only be one owner at a time.
3. When the owner goes out of scope, the value will be dropped.</p>
<p>Ownership is Rusts most unique feature, and it enables Rust to make memory safety guarantees without needing a garbage collector.</p>
<h4 id="rust-rust01-ownership-behaviors">Ownership Behaviors</h4>
<ul>
<li>Ownership can be moved or copied.<ul>
<li>If data is on the stack, it will be copied.  If on the heap, it will be moved.</li>
<li>Copying is cheap, moving is expensive.</li>
</ul>
</li>
<li>If a variable goes out of scope, it gets dropped automatically which frees up the memory.</li>
<li>When passing a variable into a function, ownership of the variable goes to the function.</li>
<li>If the variable is not on the stack, it will not exist outside of that function it was passed into, unless it returns a value.
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// s comes into scope</span>

<span class="w">    </span><span class="n">takes_ownership</span><span class="p">(</span><span class="n">s</span><span class="p">);</span><span class="w">             </span><span class="c1">// s&#39;s value moves into the function...</span>
<span class="w">                                    </span><span class="c1">// ... and so is no longer valid here</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w">                      </span><span class="c1">// x comes into scope</span>

<span class="w">    </span><span class="n">makes_copy</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w">                  </span><span class="c1">// x would move into the function,</span>
<span class="w">                                    </span><span class="c1">// but i32 is Copy, so its okay to still</span>
<span class="w">                                    </span><span class="c1">// use x afterward</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div></li>
</ul>
<h4 id="rust-rust01-references-and-pointers">References and Pointers</h4>
<p>There are two types of pointers in rust:
1. References
2. Raw pointers</p>
<p>A reference is like a pointer in that its an address we can follow to access the data stored at that address, without taking ownership of the variable.</p>
<p>References are a safe way to access memory and are used by the <code>&amp;</code> character:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">x</span><span class="p">;</span><span class="w">  </span><span class="c1">// y is a reference to x</span>

<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;The value of x is {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">);</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;The value of y is {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Raw pointers have no safety guarantees and are used by the <code>*</code>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">x</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="kt">i32</span><span class="p">;</span><span class="w">  </span><span class="c1">// y is a raw pointer to x</span>

<span class="k">unsafe</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;The value of x is {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">y</span><span class="p">);</span><span class="w">  </span><span class="c1">// this will print the value of x</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
<p>References are created by using the <code>&amp;</code>, creating a reference is called <strong>borrowing</strong>. Borrowing allows you to pass a variable into a function without taking ownership of it.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">(){</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculate_length</span><span class="p">(</span><span class="o">&amp;</span><span class="n">s1</span><span class="p">);</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;The length of &#39;{}&#39; is {}.&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">s1</span><span class="p">,</span><span class="w"> </span><span class="n">len</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">calculate_length</span><span class="p">(</span><span class="n">s</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nb">String</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">usize</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">s</span><span class="p">.</span><span class="n">len</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Just as when you borrow something from a person, you have to give it back the same way you received it.  This means you can't modify it when borrowing AKA REFERENCES ARE IMMUTABLE BY DEFAULT, JUST LIKE VARIABLES</p>
<p>To make a reference mutable looks very similar to variables:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">(){</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">change</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">change</span><span class="p">(</span><span class="n">some_string</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="nb">String</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">some_string</span><span class="p">.</span><span class="n">push_str</span><span class="p">(</span><span class="s">&quot;, world&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
<p>NOTE: If you have a mutable reference to a value, there can be no other simultaneous references to that value.  This prevents issues with data races.</p>
<p>Note that a references scope starts from where it is introduced and continues through the last time that reference is used. For instance, this code will compile because the last usage of the immutable references, the println!, occurs before the mutable reference is introduced:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">r1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">s</span><span class="p">;</span><span class="w"> </span><span class="c1">// no problem</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">r2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">s</span><span class="p">;</span><span class="w"> </span><span class="c1">// no problem</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{} and {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">r1</span><span class="p">,</span><span class="w"> </span><span class="n">r2</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// r1 and r2 are no longer used after this point</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">r3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="p">;</span><span class="w"> </span><span class="c1">// no problem</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">r3</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>The example above is ok because by the time r3 (the mutable referece) is created, the immutable references are out of scope.  They drop after their final usage.</p>
<h4 id="rust-rust01-moving-variables">Moving Variables</h4>
<p>When setting a variable equal to a new variable, Rust invalidates the first variable.
This is to prevent double free errors which are when the ownership model tries to drop one of the variables but not the other that is also referencing the same memory.</p>
<p>s1 becomes invalid when s2 is assigned to s1.  This is because s1 and s2 are both pointing to the same memory address.  When s2 is assigned to s1, s1 is no longer valid because it is no longer the only owner of the memory address.</p>
<h4 id="rust-rust01-stack-data-copy">Stack Data - Copy</h4>
<p>Data that is stored on the stack is so efficient that its not a problem to manage.  As a convience, Rust is not afraid to duplicate data thats stored on the stack.  In other words, references on the stack that point to data on the heap need much more management which is why there are more rules and limiations to follow. Like moving variables,</p>
<p>For stack data, there's no differences between shallow and deep copys because of something called the copy trait.  Variables that hold data with types that have the copy trait, are copied instead of moved so they are still valid after the copy.</p>
<p>Here are some of the types that implement Copy:
* All the integer types, such as u32.
* The Boolean type, bool, with values true and false.
* All the floating-point types, such as f64.
* The character type, char.
* Tuples, if they only contain types that also implement Copy. For example, (i32, i32) implements Copy, but (i32, String) does no</p>
<p><strong>How does this work with functions?</strong></p>
<p>Ownership is passed through functions using this same concept of ownership.  If the variable is a type that has the copy trait, the variable is still valid after its passed. Otherwise ownership is passed into the function and then no goes out of scope once the function ends.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// s comes into scope</span>

<span class="w">    </span><span class="n">takes_ownership</span><span class="p">(</span><span class="n">s</span><span class="p">);</span><span class="w">             </span><span class="c1">// s&#39;s value moves into the function...</span>
<span class="w">                                    </span><span class="c1">// ... and so is no longer valid here</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w">                      </span><span class="c1">// x comes into scope</span>

<span class="w">    </span><span class="n">makes_copy</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w">                  </span><span class="c1">// x would move into the function,</span>
<span class="w">                                    </span><span class="c1">// but i32 is Copy, so its okay to still</span>
<span class="w">                                    </span><span class="c1">// use x afterward</span>
<span class="w">    </span><span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">takes_ownership</span><span class="p">(</span><span class="n">some_string</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// some_string comes into scope</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">some_string</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="c1">// Here, some_string goes out of scope and `drop` is called. The backing</span>
<span class="w">  </span><span class="c1">// memory is freed.</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">makes_copy</span><span class="p">(</span><span class="n">some_integer</span><span class="p">:</span><span class="w"> </span><span class="kt">i32</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// some_integer comes into scope</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">some_integer</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="c1">// Here, some_integer goes out of scope. Nothing special happens.</span>
</code></pre></div></td></tr></table></div>
<p>But what if you want a function to use a value but not take ownership of it.  Its annoying to have to constantly return the variable to use it again.</p>
<h4 id="rust-rust01-dangling-references">Dangling References</h4>
<p>Dangling references are when a variable is created and a reference to that variable created, and the variable goes out of scope but the program tries to keep the reference alive.</p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">dangle</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kp">&amp;</span><span class="nb">String</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// dangle returns a reference to a String</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// s is a new String</span>

<span class="w">    </span><span class="o">&amp;</span><span class="n">s</span><span class="w"> </span><span class="c1">// we return a reference to the String, s</span>
<span class="p">}</span><span class="w"> </span><span class="c1">// Here, s goes out of scope, and is dropped. Its memory goes away.</span>
<span class="w">  </span><span class="c1">// Danger!</span>
</code></pre></div></td></tr></table></div>
The variable <code>s</code> will go out of scope at the end of the function above but its trying to return the reference, which will reference something that no longer exits.  DANGER!  Rust will throw an error to catch these.</p>
<h2 id="rust-rust01-side-note-stack-and-heap">Side Note: Stack and Heap</h2>
<p>About memory allocation</p>
<ul>
<li>Data is stored in either the stack or the heap when in memory.</li>
<li>The stack is more organized and quicker.  This holds data where the length is known and fixed.</li>
<li>The heap is a less organized, less efficeint data store.  This holds data where the length is not known at runtime or might change.  This is because the program has to find a space for the memory but a stack just goes right on top every single time.</li>
<li>Data that is on the stack is directly related.  So <code>let x = 6;</code> is actually connected to 6.  Data on the heap creates a pointer that points to the address of the data on the heap.  To access a piece of memory on the heap, you need to follow a pointer.  This means the program is bouncing around the memory to find what its looking for, instead of using the data thats right next to it already.</li>
<li>Data on the stack can be copied but data on the heap can only be referenced (pointed).  Sort of like shallow copy and deep copy.</li>
</ul>
<p>If you want to "deepcopy" data on the heap, you need to call the method clone.  But keep in mind this is expensive.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s1</span><span class="p">.</span><span class="n">clone</span><span class="p">();</span>

<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;s1 = {}, s2 = {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">s1</span><span class="p">,</span><span class="w"> </span><span class="n">s2</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>But to "deep copy" data on the stack, its as simple as creating another variable
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>

<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;x = {}, y = {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
Data on the stack is very efficient so this is fine.</p>
<p><a href="#rust-rust01-table-of-contents">Back to Top</a></p>
<h2 id="rust-rust01-5-structs">5. Structs</h2>
<p>Structs are sort of like python classes. They are used to create custom data types, they must be declared before use, and they can be mutable or immutable.
They are good for grouping related data together.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">User</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">username</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">,</span>
<span class="w">    </span><span class="n">email</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">,</span>
<span class="w">    </span><span class="n">sign_in_count</span><span class="p">:</span><span class="w"> </span><span class="kt">u64</span><span class="p">,</span>
<span class="w">    </span><span class="n">active</span><span class="p">:</span><span class="w"> </span><span class="kt">bool</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>To create an instance of a struct, you can use the curly braces and key value pairs:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="n">user1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">email</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;user@web.com&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">username</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;user1&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">active</span><span class="p">:</span><span class="w"> </span><span class="nc">true</span><span class="p">,</span>
<span class="w">    </span><span class="n">sign_in_count</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>To make mutable, use the mut keyword:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">user1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">..</span><span class="n">etc</span><span class="o">..</span>
</code></pre></div></td></tr></table></div>
<p>Accessing values in a struct is done with dot notation:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;user1 email: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">user1</span><span class="p">.</span><span class="n">email</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Structs can also have methods, which are created in the impl block:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">Rectangle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">width</span><span class="p">:</span><span class="w"> </span><span class="kt">u32</span><span class="p">,</span>
<span class="w">    </span><span class="n">height</span><span class="p">:</span><span class="w"> </span><span class="kt">u32</span>
<span class="p">}</span>

<span class="k">impl</span><span class="w"> </span><span class="n">Rectangle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">area</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">u32</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">self</span><span class="p">.</span><span class="n">width</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">height</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>The first parameter of a method is always self.  Self refers to the instance of the struct that the method is being called on.  You can have multiple parameters in a method, but the first one must always be self.</p>
<p>To call a method on a struct, use dot notation:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">rect1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Rectangle</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">width</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span>
<span class="w">        </span><span class="n">height</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;The area of rect1 is {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">rect1</span><span class="p">.</span><span class="n">area</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p><a href="#rust-rust01-table-of-contents">Back to Top</a></p>
<h2 id="rust-rust01-6-enums">6. Enums</h2>
<p>Enumerations (or enums) are like structs but different in that they can only be one of a few values.  They are useful for when you want to limit the possible values of a variable.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">enum</span><span class="w"> </span><span class="nc">IpAddrKind</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">V4</span><span class="p">,</span>
<span class="w">    </span><span class="n">V6</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>To create an instance of an enum, use the double colon syntax:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="n">four</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">IpAddrKind</span><span class="p">::</span><span class="n">V4</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="n">six</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">IpAddrKind</span><span class="p">::</span><span class="n">V6</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p>Enums can also have data associated with them:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">enum</span><span class="w"> </span><span class="nc">IpAddr</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">V4</span><span class="p">(</span><span class="nb">String</span><span class="p">),</span>
<span class="w">    </span><span class="n">V6</span><span class="p">(</span><span class="nb">String</span><span class="p">),</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>To create an instance of an enum with data:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="n">home</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">IpAddr</span><span class="p">::</span><span class="n">V4</span><span class="p">(</span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;127.0.0.1&quot;</span><span class="p">));</span>
<span class="kd">let</span><span class="w"> </span><span class="n">loopback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">IpAddr</span><span class="p">::</span><span class="n">V6</span><span class="p">(</span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;::1&quot;</span><span class="p">));</span>
</code></pre></div></td></tr></table></div>
<p>Enums can also have methods, which are created in the impl block:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">enum</span><span class="w"> </span><span class="nc">IpAddr</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">V4</span><span class="p">(</span><span class="nb">String</span><span class="p">),</span>
<span class="w">    </span><span class="n">V6</span><span class="p">(</span><span class="nb">String</span><span class="p">),</span>
<span class="p">}</span>

<span class="k">impl</span><span class="w"> </span><span class="n">IpAddr</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">print</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;ip address: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>To call a method on an enum, use dot notation:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">home</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">IpAddr</span><span class="p">::</span><span class="n">V4</span><span class="p">(</span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;127.0.0.1&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="n">home</span><span class="p">.</span><span class="n">print</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Enums can also have multiple types of data associated with them:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">enum</span><span class="w"> </span><span class="nc">IpAddr</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">V4</span><span class="p">(</span><span class="kt">u8</span><span class="p">,</span><span class="w"> </span><span class="kt">u8</span><span class="p">,</span><span class="w"> </span><span class="kt">u8</span><span class="p">,</span><span class="w"> </span><span class="kt">u8</span><span class="p">),</span>
<span class="w">    </span><span class="n">V6</span><span class="p">(</span><span class="nb">String</span><span class="p">),</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Once you create an enum, you can use it with pattern matching or the <code>let if</code> syntax. There are some tricks
you can use with pattern matching such as <code>other =&gt; function(other)</code> to call a function with the value of other.</p>
<p><a href="https://doc.rust-lang.org/book/ch06-02-match.html">More Here</a></p>
<p><code>Option&lt;T&gt;</code> is a built-in enum that lets you easily evaluate whether a value is present or not.  It is useful for when you want to return a value or nothing at all.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">enum</span><span class="w"> </span><span class="nb">Option</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">Some</span><span class="p">(</span><span class="n">T</span><span class="p">),</span>
<span class="w">    </span><span class="nb">None</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">divide</span><span class="p">(</span><span class="n">numerator</span><span class="p">:</span><span class="w"> </span><span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">denominator</span><span class="p">:</span><span class="w"> </span><span class="kt">i32</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Option</span><span class="o">&lt;</span><span class="kt">i32</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">denominator</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nb">None</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nb">Some</span><span class="p">(</span><span class="n">numerator</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">denominator</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">divide</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<span class="w">    </span><span class="k">match</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nb">Some</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Result: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">),</span>
<span class="w">        </span><span class="nb">None</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Cannot divide by 0&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Option<T> will evaluate to either Some(T) or None, but not both! Once you have an Option<T>,
you will need to extract the T out to perform operations on it.
Choices for extracting this data include pattern matching with
<code>match</code>, <code>if let</code>, or Option methods such as <code>.unwrap()</code>, <code>.unwrap_or()</code>, <code>.map()</code>, and others.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">divide</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="c1">// this will give 0 because the result is None and unwrap_or returns the value or the default given.</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Result: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">unwrap_or</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>

<span class="c1">// this will panic because unwrap returns the value or panics if None</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Result: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">unwrap</span><span class="p">());</span>
</code></pre></div></td></tr></table></div>
<p><a href="https://doc.rust-lang.org/book/ch05-00-structs.html">Docs</a></p>
<p><a href="#rust-rust01-table-of-contents">Back to Top</a></p>
<h2 id="rust-rust01-7-managing-projects">7. Managing Projects</h2>
<p>When building a project its important to organize the code for readability and re-usability.</p>
<ul>
<li>Packages: A Cargo feature that lets you build, test, and share crates</li>
<li>Crates: A tree of modules that produces a library or executable</li>
<li>Modules and use: Let you control the organization, scope, and privacy of paths</li>
<li>Paths: A way of naming an item, such as a struct, function, or module</li>
</ul>
<p>Crate: Smallest amount of code the compiler considers at one time. A crate is either a 'binary crate' or a 'library crate'.
* A binary crate must have a 'main' function, which is the starting point of the program.
* A library crate doesn't need 'main', and its not compiled into an executable. Its meant to share functionality with other projects.
Package: A package is a rust project that Cargo can manage. A grouping of one or more crates that does things, contains 'Cargo.toml'.
Modules: A way to group code. A module can either be its own .rs file or a subgroup within a .rs file (called in-line module).
Inline modules are setup similar to functions but use the <code>mod</code> keyword and can help control privacy.
Modules are a good way to group related activities. For example, a car needs to accelerate, brake, steer, and
each of these have different details to make them happen.
Paths: Paths for modules use <code>::</code> ie <code>crate::front_of_house::hosting::add_to_waitlist();</code> this is like import for python.
To import a module use the keyword <code>use</code> ie <code>use crate::front_of_house::hosting;</code>
Modules are set to private by default, use <code>pub</code> to make them public.</p>
<p><a href="#rust-rust01-table-of-contents">Back to Top</a></p>
<h2 id="rust-rust01-8-collections-data-structures">8. Collections (data structures)</h2>
<ol>
<li>Vector (vec!)</li>
<li>string</li>
<li>Hash map</li>
</ol>
<p>Vectors detail:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// create a vector</span>
<span class="kd">let</span><span class="w"> </span><span class="n">v</span><span class="p">:</span><span class="w"> </span><span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">i32</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span><span class="p">::</span><span class="n">new</span><span class="p">();</span>
<span class="n">or</span>
<span class="kd">let</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">];</span>
</code></pre></div></td></tr></table></div>
<p>Update a vector</p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">];</span>
<span class="n">v</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
Get elements from a vector with index or <code>get</code></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">];</span>
<span class="fm">println!</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
<span class="fm">println!</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="mi">2</span><span class="p">));</span>
</code></pre></div></td></tr></table></div>
<p><a href="#rust-rust01-table-of-contents">Back to Top</a></p>
<h2 id="rust-rust01-9-error-handling">9. Error Handling</h2>
<p>There are 2 kinds of error handling:
1. panic! (unrecoverable)
2. Result (recoverable)</p>
<p>How to use result:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">fs</span><span class="p">::</span><span class="n">File</span><span class="p">;</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">greeting_file_result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">File</span><span class="p">::</span><span class="n">open</span><span class="p">(</span><span class="s">&quot;hello.txt&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">greeting_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="n">greeting_file_result</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nb">Ok</span><span class="p">(</span><span class="n">file</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">file</span><span class="p">,</span>
<span class="w">        </span><span class="nb">Err</span><span class="p">(</span><span class="n">error</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="fm">panic!</span><span class="p">(</span><span class="s">&quot;Problem opening the file: {:?}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="p">),</span>
<span class="w">    </span><span class="p">};</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>The Result type returns either an Ok or an Err type.</p>
<p><a href="#rust-rust01-table-of-contents">Back to Top</a></p>
<h2 id="rust-rust01-10-generic-types-traits-lifetimes">10. Generic Types, Traits, Lifetimes</h2>
<p>Generics:
If you're creating a function or struct, anything with a data type, you can use generics to make that type variable.</p>
<p>For example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">largest</span><span class="p">(</span><span class="n">list</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="p">[</span><span class="n">T</span><span class="p">])</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">T</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">largest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">list</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">list</span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">largest</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">largest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">item</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">largest</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>This function allows for any data type now.</p></section></div><style>.print-site-enumerate-headings #index > h1:before { content: '1 ' }

                .print-site-enumerate-headings #index h2:before { content: '1.' counter(counter-index-2) ' ' }
                .print-site-enumerate-headings #index h2 {  counter-reset: counter-index-3 ;  counter-increment: counter-index-2 }
            
                .print-site-enumerate-headings #index h3:before { content: '1.' counter(counter-index-2) '.' counter(counter-index-3) ' ' }
                .print-site-enumerate-headings #index h3 {  counter-increment: counter-index-3 }
            
.print-site-enumerate-headings #section-2 > h1:before { content: '2 ' }
.print-site-enumerate-headings #section-2-1 > h1:before { content: '2.1 ' }
.print-site-enumerate-headings #python-docs_1_what_is_python > h1:before { content: '2.1.1 ' }

.print-site-enumerate-headings #python-docs_2_how_to_use > h1:before { content: '2.1.2 ' }

.print-site-enumerate-headings #python-docs_3_writing_code > h1:before { content: '2.1.3 ' }

.print-site-enumerate-headings #section-2-2 > h1:before { content: '2.2 ' }
.print-site-enumerate-headings #python-docs_5_advanced_topics > h1:before { content: '2.2.1 ' }

.print-site-enumerate-headings #python-docs_7_important_libraries > h1:before { content: '2.2.2 ' }

.print-site-enumerate-headings #python-docs_9_std_lib > h1:before { content: '2.2.3 ' }

.print-site-enumerate-headings #python-testing > h1:before { content: '2.2.4 ' }

.print-site-enumerate-headings #section-2-3 > h1:before { content: '2.3 ' }
.print-site-enumerate-headings #python-docs_4_building_large_projects > h1:before { content: '2.3.1 ' }

.print-site-enumerate-headings #python-deployment > h1:before { content: '2.3.2 ' }

.print-site-enumerate-headings #python-docs_6_publishing_project > h1:before { content: '2.3.3 ' }

.print-site-enumerate-headings #section-2-4 > h1:before { content: '2.4 ' }
.print-site-enumerate-headings #python-python_uv > h1:before { content: '2.4.1 ' }

.print-site-enumerate-headings #python-docs_8_documentation > h1:before { content: '2.4.2 ' }

.print-site-enumerate-headings #section-3 > h1:before { content: '3 ' }
.print-site-enumerate-headings #git-basics > h1:before { content: '3.1 ' }

                .print-site-enumerate-headings #git-basics h2:before { content: '3.1.' counter(counter-git-basics-2) ' ' }
                .print-site-enumerate-headings #git-basics h2 {  counter-increment: counter-git-basics-2 }
            
.print-site-enumerate-headings #git-remotes > h1:before { content: '3.2 ' }

                .print-site-enumerate-headings #git-remotes h2:before { content: '3.2.' counter(counter-git-remotes-2) ' ' }
                .print-site-enumerate-headings #git-remotes h2 {  counter-increment: counter-git-remotes-2 }
            
.print-site-enumerate-headings #git-branches > h1:before { content: '3.3 ' }

                .print-site-enumerate-headings #git-branches h2:before { content: '3.3.' counter(counter-git-branches-2) ' ' }
                .print-site-enumerate-headings #git-branches h2 {  counter-increment: counter-git-branches-2 }
            
.print-site-enumerate-headings #section-4 > h1:before { content: '4 ' }
.print-site-enumerate-headings #docker-intro > h1:before { content: '4.1 ' }

                .print-site-enumerate-headings #docker-intro h2:before { content: '4.1.' counter(counter-docker-intro-2) ' ' }
                .print-site-enumerate-headings #docker-intro h2 {  counter-increment: counter-docker-intro-2 }
            
.print-site-enumerate-headings #docker-basics > h1:before { content: '4.2 ' }

                .print-site-enumerate-headings #docker-basics h2:before { content: '4.2.' counter(counter-docker-basics-2) ' ' }
                .print-site-enumerate-headings #docker-basics h2 {  counter-increment: counter-docker-basics-2 }
            
.print-site-enumerate-headings #docker-docker_compose > h1:before { content: '4.3 ' }

                .print-site-enumerate-headings #docker-docker_compose h2:before { content: '4.3.' counter(counter-docker-docker_compose-2) ' ' }
                .print-site-enumerate-headings #docker-docker_compose h2 {  counter-increment: counter-docker-docker_compose-2 }
            
.print-site-enumerate-headings #docker-docker_images > h1:before { content: '4.4 ' }

                .print-site-enumerate-headings #docker-docker_images h2:before { content: '4.4.' counter(counter-docker-docker_images-2) ' ' }
                .print-site-enumerate-headings #docker-docker_images h2 {  counter-increment: counter-docker-docker_images-2 }
            
.print-site-enumerate-headings #section-5 > h1:before { content: '5 ' }
.print-site-enumerate-headings #self_host-storage_vs_compute > h1:before { content: '5.1 ' }

                .print-site-enumerate-headings #self_host-storage_vs_compute h2:before { content: '5.1.' counter(counter-self_host-storage_vs_compute-2) ' ' }
                .print-site-enumerate-headings #self_host-storage_vs_compute h2 {  counter-increment: counter-self_host-storage_vs_compute-2 }
            
.print-site-enumerate-headings #ai-docs_105_local_llm > h1:before { content: '5.2 ' }

                .print-site-enumerate-headings #ai-docs_105_local_llm h2:before { content: '5.2.' counter(counter-ai-docs_105_local_llm-2) ' ' }
                .print-site-enumerate-headings #ai-docs_105_local_llm h2 {  counter-increment: counter-ai-docs_105_local_llm-2 }
            
.print-site-enumerate-headings #self_host-samba > h1:before { content: '5.3 ' }

                .print-site-enumerate-headings #self_host-samba h2:before { content: '5.3.' counter(counter-self_host-samba-2) ' ' }
                .print-site-enumerate-headings #self_host-samba h2 {  counter-increment: counter-self_host-samba-2 }
            
.print-site-enumerate-headings #self_host-syncthing > h1:before { content: '5.4 ' }

                .print-site-enumerate-headings #self_host-syncthing h2:before { content: '5.4.' counter(counter-self_host-syncthing-2) ' ' }
                .print-site-enumerate-headings #self_host-syncthing h2 {  counter-increment: counter-self_host-syncthing-2 }
            
.print-site-enumerate-headings #self_host-video_streaming > h1:before { content: '5.5 ' }

                .print-site-enumerate-headings #self_host-video_streaming h2:before { content: '5.5.' counter(counter-self_host-video_streaming-2) ' ' }
                .print-site-enumerate-headings #self_host-video_streaming h2 {  counter-increment: counter-self_host-video_streaming-2 }
            
.print-site-enumerate-headings #self_host-frigate > h1:before { content: '5.6 ' }

                .print-site-enumerate-headings #self_host-frigate h2:before { content: '5.6.' counter(counter-self_host-frigate-2) ' ' }
                .print-site-enumerate-headings #self_host-frigate h2 {  counter-increment: counter-self_host-frigate-2 }
            
.print-site-enumerate-headings #self_host-web_server > h1:before { content: '5.7 ' }

                .print-site-enumerate-headings #self_host-web_server h2:before { content: '5.7.' counter(counter-self_host-web_server-2) ' ' }
                .print-site-enumerate-headings #self_host-web_server h2 {  counter-increment: counter-self_host-web_server-2 }
            
.print-site-enumerate-headings #self_host-wireguard > h1:before { content: '5.8 ' }

                .print-site-enumerate-headings #self_host-wireguard h2:before { content: '5.8.' counter(counter-self_host-wireguard-2) ' ' }
                .print-site-enumerate-headings #self_host-wireguard h2 {  counter-increment: counter-self_host-wireguard-2 }
            
.print-site-enumerate-headings #git-remotes > h1:before { content: '5.9 ' }

                .print-site-enumerate-headings #git-remotes h2:before { content: '5.9.' counter(counter-git-remotes-2) ' ' }
                .print-site-enumerate-headings #git-remotes h2 {  counter-increment: counter-git-remotes-2 }
            
.print-site-enumerate-headings #self_host-nas > h1:before { content: '5.10 ' }

                .print-site-enumerate-headings #self_host-nas h2:before { content: '5.10.' counter(counter-self_host-nas-2) ' ' }
                .print-site-enumerate-headings #self_host-nas h2 {  counter-increment: counter-self_host-nas-2 }
            
.print-site-enumerate-headings #section-6 > h1:before { content: '6 ' }
.print-site-enumerate-headings #networking-docs_100_networking > h1:before { content: '6.1 ' }

                .print-site-enumerate-headings #networking-docs_100_networking h2:before { content: '6.1.' counter(counter-networking-docs_100_networking-2) ' ' }
                .print-site-enumerate-headings #networking-docs_100_networking h2 {  counter-increment: counter-networking-docs_100_networking-2 }
            
.print-site-enumerate-headings #networking-docs_100_servers > h1:before { content: '6.2 ' }

                .print-site-enumerate-headings #networking-docs_100_servers h2:before { content: '6.2.' counter(counter-networking-docs_100_servers-2) ' ' }
                .print-site-enumerate-headings #networking-docs_100_servers h2 {  counter-increment: counter-networking-docs_100_servers-2 }
            
.print-site-enumerate-headings #networking-docs_101_caddy > h1:before { content: '6.3 ' }

                .print-site-enumerate-headings #networking-docs_101_caddy h2:before { content: '6.3.' counter(counter-networking-docs_101_caddy-2) ' ' }
                .print-site-enumerate-headings #networking-docs_101_caddy h2 {  counter-increment: counter-networking-docs_101_caddy-2 }
            
.print-site-enumerate-headings #networking-docs_102_dns_server > h1:before { content: '6.4 ' }

                .print-site-enumerate-headings #networking-docs_102_dns_server h2:before { content: '6.4.' counter(counter-networking-docs_102_dns_server-2) ' ' }
                .print-site-enumerate-headings #networking-docs_102_dns_server h2 {  counter-increment: counter-networking-docs_102_dns_server-2 }
            
.print-site-enumerate-headings #section-7 > h1:before { content: '7 ' }
.print-site-enumerate-headings #linux-docs_104_linux > h1:before { content: '7.1 ' }

                .print-site-enumerate-headings #linux-docs_104_linux h2:before { content: '7.1.' counter(counter-linux-docs_104_linux-2) ' ' }
                .print-site-enumerate-headings #linux-docs_104_linux h2 {  counter-increment: counter-linux-docs_104_linux-2 }
            
.print-site-enumerate-headings #linux-docs_103_ssh > h1:before { content: '7.2 ' }

                .print-site-enumerate-headings #linux-docs_103_ssh h2:before { content: '7.2.' counter(counter-linux-docs_103_ssh-2) ' ' }
                .print-site-enumerate-headings #linux-docs_103_ssh h2 {  counter-increment: counter-linux-docs_103_ssh-2 }
            
.print-site-enumerate-headings #linux-docs_199_backups > h1:before { content: '7.3 ' }

                .print-site-enumerate-headings #linux-docs_199_backups h2:before { content: '7.3.' counter(counter-linux-docs_199_backups-2) ' ' }
                .print-site-enumerate-headings #linux-docs_199_backups h2 {  counter-increment: counter-linux-docs_199_backups-2 }
            
.print-site-enumerate-headings #section-8 > h1:before { content: '8 ' }
.print-site-enumerate-headings #video%20processing-docs_200_ffmpeg > h1:before { content: '8.1 ' }

                .print-site-enumerate-headings #video%20processing-docs_200_ffmpeg h2:before { content: '8.1.' counter(counter-video%20processing-docs_200_ffmpeg-2) ' ' }
                .print-site-enumerate-headings #video%20processing-docs_200_ffmpeg h2 {  counter-increment: counter-video%20processing-docs_200_ffmpeg-2 }
            
.print-site-enumerate-headings #video%20processing-docs_200_streaming > h1:before { content: '8.2 ' }

                .print-site-enumerate-headings #video%20processing-docs_200_streaming h2:before { content: '8.2.' counter(counter-video%20processing-docs_200_streaming-2) ' ' }
                .print-site-enumerate-headings #video%20processing-docs_200_streaming h2 {  counter-increment: counter-video%20processing-docs_200_streaming-2 }
            
.print-site-enumerate-headings #section-9 > h1:before { content: '9 ' }
.print-site-enumerate-headings #ai-docs_105_local_llm > h1:before { content: '9.1 ' }

                .print-site-enumerate-headings #ai-docs_105_local_llm h2:before { content: '9.1.' counter(counter-ai-docs_105_local_llm-2) ' ' }
                .print-site-enumerate-headings #ai-docs_105_local_llm h2 {  counter-increment: counter-ai-docs_105_local_llm-2 }
            
.print-site-enumerate-headings #ai-mcp > h1:before { content: '9.2 ' }

                .print-site-enumerate-headings #ai-mcp h2:before { content: '9.2.' counter(counter-ai-mcp-2) ' ' }
                .print-site-enumerate-headings #ai-mcp h2 {  counter-increment: counter-ai-mcp-2 }
            
.print-site-enumerate-headings #section-10 > h1:before { content: '10 ' }
.print-site-enumerate-headings #low%20level-foundations > h1:before { content: '10.1 ' }

                .print-site-enumerate-headings #low%20level-foundations h2:before { content: '10.1.' counter(counter-low%20level-foundations-2) ' ' }
                .print-site-enumerate-headings #low%20level-foundations h2 {  counter-increment: counter-low%20level-foundations-2 }
            
.print-site-enumerate-headings #low%20level-drivers > h1:before { content: '10.2 ' }

                .print-site-enumerate-headings #low%20level-drivers h2:before { content: '10.2.' counter(counter-low%20level-drivers-2) ' ' }
                .print-site-enumerate-headings #low%20level-drivers h2 {  counter-increment: counter-low%20level-drivers-2 }
            
.print-site-enumerate-headings #rust-rust01 > h1:before { content: '11 ' }

                .print-site-enumerate-headings #rust-rust01 h2:before { content: '11.' counter(counter-rust-rust01-2) ' ' }
                .print-site-enumerate-headings #rust-rust01 h2 {  counter-reset: counter-rust-rust01-3 ;  counter-increment: counter-rust-rust01-2 }
            
                .print-site-enumerate-headings #rust-rust01 h3:before { content: '11.' counter(counter-rust-rust01-2) '.' counter(counter-rust-rust01-3) ' ' }
                .print-site-enumerate-headings #rust-rust01 h3 {  counter-increment: counter-rust-rust01-3 }
            </style>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "/notes/", "features": [], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.60a45f97.min.js"></script>
      
        <script src="../js/print-site.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
      
        <script src="../files/inject_edit_page.js"></script>
      
    
  </body>
</html>